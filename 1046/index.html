<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Fine-tuning CodeLlama-7B for Fortran Code Generation</title>
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/5.3.3/zephyr/bootstrap.min.css"
      integrity="sha512-CWXb9sx63+REyEBV/cte+dE1hSsYpJifb57KkqAXjsN3gZQt6phZt7e5RhgZrUbaNfCdtdpcqDZtuTEB+D3q2Q=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer" />
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@11.9.0/build/styles/atom-one-dark.min.css" />
    <link
      rel="stylesheet"
      href="https://unpkg.com/highlightjs-copy/dist/highlightjs-copy.min.css" />
    <script src="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@11.9.0/build/highlight.min.js"></script>
    <script src="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@11.9.0/build/languages/fortran.min.js"></script>
    <script src="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@11.9.0/build/languages/python.min.js"></script>
    <script src="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@11.9.0/build/languages/cpp.min.js"></script>
    <script src="https://unpkg.com/highlightjs-copy/dist/highlightjs-copy.min.js"></script>
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.min.js"
      integrity="sha384-BBtl+eGJRgqQAUMxJ7pMwbEyER4l1g+O15P+16Ep7Q9Q+zqX6gSbd85u4mG4QzX+"
      crossorigin="anonymous"></script>
  </head>
  <body>
    
<div class="container">
  <div class="row">
    <div class="col d-flex justify-content-between align-items-center">
      <h2>Last Stone Weight</h2>
      <div>
        <a href="/" class="btn btn-outline-primary me-2">
          üè†
        </a>
        <a
          href="/1037/"
          class="btn btn-outline-secondary me-2">
          ‚¨ÖÔ∏è
        </a>
        <a
          href="/1047/"
          class="btn btn-outline-secondary">
          ‚û°Ô∏è
        </a>
      </div>
    </div>
  </div>

  <div class="row">
    <div class="col">
      <div class="leetcode-problem-content card">
        <div class="card-body">
          <p>You are given an array of integers <code>stones</code> where <code>stones[i]</code> is the weight of the <code>ith</code> stone.</p>
<p>We are playing a game with the stones. On each turn, we choose the <strong>heaviest two stones</strong> and smash them together. Suppose the heaviest two stones have weights <code>x</code> and <code>y</code> with <code>x &lt;= y</code>. The result of this smash is:</p>
<ul>
<li>If <code>x == y</code>, both stones are destroyed, and</li>
<li>If <code>x != y</code>, the stone of weight <code>x</code> is destroyed, and the stone of weight <code>y</code> has new weight <code>y - x</code>.</li>
</ul>
<p>At the end of the game, there is <strong>at most one</strong> stone left.</p>
<p>Return <em>the weight of the last remaining stone</em>. If there are no stones left, return <code>0</code>.</p>
<p><strong>Example 1:</strong></p>
<p><strong>Input:</strong> stones = [2,7,4,1,8,1]
<strong>Output:</strong> 1
<strong>Explanation:</strong> 
We combine 7 and 8 to get 1 so the array converts to [2,4,1,1,1] then,
we combine 2 and 4 to get 2 so the array converts to [2,1,1,1] then,
we combine 2 and 1 to get 1 so the array converts to [1,1,1] then,
we combine 1 and 1 to get 0 so the array converts to [1] then that's the value of the last stone.</p>
<p><strong>Example 2:</strong></p>
<p><strong>Input:</strong> stones = [1]
<strong>Output:</strong> 1</p>
<p><strong>Constraints:</strong></p>
<ul>
<li><code>1 &lt;= stones.length &lt;= 30</code></li>
<li><code>1 &lt;= stones[i] &lt;= 1000</code></li>
</ul>
          <hr />
          <span class="fst-italic">
            Note: This problem is from
            <a
              href="https://leetcode.com/problems/last-stone-weight/description/">LeetCode</a>.
          </span>
        </div>
      </div>
      <style>
        .leetcode-problem-content {
          max-height: 200px;
          overflow-y: auto;
        }
      </style>
    </div>
  </div>
  <div class="row">
    <div class="col-md-6">
      <ul class="nav nav-underline mb-2" id="myTab" role="tablist">
        <li class="nav-item" role="presentation">
          <button
            class="nav-link active"
            id="our-model-tab"
            data-bs-toggle="tab"
            data-bs-target="#our-model-tab-pane"
            type="button"
            role="tab"
            aria-controls="our-model-tab-pane"
            aria-selected="true">
            ü¶æ Our model
          </button>
        </li>
      </ul>
      <div class="tab-content" id="myTabContent">
        <div
          class="tab-pane fade show active"
          id="our-model-tab-pane"
          role="tabpanel"
          aria-labelledby="our-model-tab"
          tabindex="0">
          <div class="row mb-2">
            <div class="col">
              <div
                class="card border-danger"
                style="border-width: 2px">
                <div class="card-body">
                  <span class="font-emoji">
                    ‚ùå
                  </span>
                  <strong>Compiled</strong>
                </div>
              </div>
            </div>

            <div class="col">
              <div
                class="card border-danger"
                style="border-width: 2px">
                <div class="card-body">
                  <span class="font_emoji">
                    ‚ùå
                  </span>
                  <strong>Executed</strong>
                </div>
              </div>
            </div>

            <div class="col">
              <div
                class="card border-danger"
                style="border-width: 2px">
                <div class="card-body">
                  <span class="font-emoji">
                    ‚ùå
                  </span>
                  <strong>Correct</strong>
                </div>
              </div>
            </div>
          </div>
          <pre><code class="language-fortran model-code">program main
    implicit none

    integer, parameter :: n_examples = 2
    integer, parameter :: stones(n_examples) = reshape([2, 7, 4, 1, 8, 1], shape=[n_examples])
    integer :: i

    do i = 1, n_examples
        print '(A, I0)', 'Example ', i
        print '(A, I0)', 'Stones: ', stones(i)
        print '(A, I0)', 'Result: ', solve(stones(i))
        print *, ''
    end do

contains

    function solve(stones) result(result)
        implicit none
        integer, intent(in) :: stones(:)
        integer :: result, x, y

        if (size(stones) == 1) then
            result = stones(1)
        else
            x = maxval(stones)
            y = minval(stones)
            if (x == y) then
                result = 0
            else
                if (x < y) then
                    result = y - x
                else
                    result = x
                end if
            end if
        end if
    end function solve
end program main</code></pre>

           
          <div class="alert alert-danger" role="alert">
            <strong>stderr</strong>
            <pre>temp.f95:11:43:

   11 |         print '(A, I0)', 'Result: ', solve(stones(i))
      |                                           1
Error: Rank mismatch in argument ‚Äòstones‚Äô at (1) (rank-1 and scalar)
</pre>
          </div>
          
        </div>
      </div>
    </div>
    <div class="col-md-6">
      <ul class="nav nav-underline mb-2" id="myTab" role="tablist">
        <li class="nav-item" role="presentation">
          <button
            class="nav-link active"
            id="codellama-tab"
            data-bs-toggle="tab"
            data-bs-target="#codellama-tab-pane"
            type="button"
            role="tab"
            aria-controls="codellama-tab-pane"
            aria-selected="true">
            ü¶ô CodeLlama-7B
          </button>
        </li>
        <li class="nav-item" role="presentation">
          <button
            class="nav-link"
            id="python-tab"
            data-bs-toggle="tab"
            data-bs-target="#python-tab-pane"
            type="button"
            role="tab"
            aria-controls="python-tab-pane"
            aria-selected="false">
            üêç Python
          </button>
        </li>
        <li class="nav-item" role="presentation">
          <button
            class="nav-link"
            id="cpp-tab"
            data-bs-toggle="tab"
            data-bs-target="#cpp-tab-pane"
            type="button"
            role="tab"
            aria-controls="cpp-tab-pane"
            aria-selected="false">
            ü§† C++
          </button>
        </li>
      </ul>
      <div class="tab-content" id="myTabContent">
        <div
          class="tab-pane fade show active"
          id="codellama-tab-pane"
          role="tabpanel"
          aria-labelledby="codellama-tab"
          tabindex="0">
          <div class="row mb-2">
            <div class="col">
              <div
                class="card border-danger"
                style="border-width: 2px">
                <div class="card-body">
                  <span class="font-emoji">
                    ‚ùå
                  </span>
                  <strong>Compiled</strong>
                </div>
              </div>
            </div>

            <div class="col">
              <div
                class="card border-danger"
                style="border-width: 2px">
                <div class="card-body">
                  <span class="font-emoji">
                    ‚ùå
                  </span>
                  <strong>Executed</strong>
                </div>
              </div>
            </div>

            <div class="col">
              <div
                class="card border-danger"
                style="border-width: 2px">
                <div class="card-body">
                  <span class="font-emoji">
                    ‚ùå
                  </span>
                  <strong>Correct</strong>
                </div>
              </div>
            </div>
          </div>
          <pre><code class="language-fortran model-code">module smashing_stones
implicit none
contains

function smashing_stones(stones) result(last_stone)
integer, intent(in) :: stones(:)
integer :: last_stone, i, j, x, y

! Sort the stones in descending order
call sort(stones)

! Initialize the last stone
last_stone = stones(1)

! Loop through the stones and smash the heaviest two
do i = 2, size(stones)
    x = stones(i - 1)
    y = stones(i)

    ! If x == y, both stones are destroyed
    if (x == y) then
        last_stone = 0
        exit
    ! If x != y, the stone of weight x is destroyed, and the stone of weight y has new weight y - x
    else
        last_stone = y - x
    end if
end do

end function smashing_stones

end module smashing_stones

program test_smashing_stones
use smashing_stones
implicit none
integer :: stones(6)

! Test case 1
stones = [2, 7, 4, 1, 8, 1]
write (*,*) 'Test case 1:', smashing_stones(stones)

! Test case 2
stones = [1]
write (*,*) 'Test case 2:', smashing_stones(stones)

! Test case 3
stones = [2, 1, 1, 1, 1, 1]
write (*,*) 'Test case 3:', smashing_stones(stones)

! Test case 4
stones = [2, 7, 4, 1, 8, 1, 2]
write (*,*) 'Test case 4:', smashing_stones(stones)

! Test case 5
stones = [2, 1, 1, 1, 1, 1, 2]
write (*,*) 'Test case 5:', smashing_stones(stones)

end program test_smashing_stones
</code></pre>
           
          <div class="alert alert-danger" role="alert">
            <strong>stderr</strong>
            <pre>temp.f95:5:24:

    5 | function smashing_stones(stones) result(last_stone)
      |                        1
Error: MODULE attribute of ‚Äòsmashing_stones‚Äô conflicts with PROCEDURE attribute at (1)
temp.f95:6:32:

    6 | integer, intent(in) :: stones(:)
      |                                1
Error: Unexpected data declaration statement in CONTAINS section at (1)
temp.f95:7:33:

    7 | integer :: last_stone, i, j, x, y
      |                                 1
Error: Unexpected data declaration statement in CONTAINS section at (1)
temp.f95:10:17:

   10 | call sort(stones)
      |                 1
Error: Unexpected CALL statement in CONTAINS section at (1)
temp.f95:13:22:

   13 | last_stone = stones(1)
      |                      1
Error: Unexpected assignment statement in CONTAINS section at (1)
temp.f95:16:22:

   16 | do i = 2, size(stones)
      |                      1
Error: Unexpected DO statement in CONTAINS section at (1)
temp.f95:17:21:

   17 |     x = stones(i - 1)
      |                     1
Error: Unexpected assignment statement in CONTAINS section at (1)
temp.f95:18:17:

   18 |     y = stones(i)
      |                 1
Error: Unexpected assignment statement in CONTAINS section at (1)
temp.f95:21:20:

   21 |     if (x == y) then
      |                    1
Error: Unexpected block IF statement in CONTAINS section at (1)
temp.f95:22:22:

   22 |         last_stone = 0
      |                      1
Error: Unexpected assignment statement in CONTAINS section at (1)
temp.f95:23:12:

   23 |         exit
      |            1
Error: EXIT statement at (1) is not within a construct
temp.f95:25:8:

   25 |     else
      |        1
Error: Unexpected ELSE statement in CONTAINS section at (1)
temp.f95:26:26:

   26 |         last_stone = y - x
      |                          1
Error: Unexpected assignment statement in CONTAINS section at (1)
temp.f95:27:7:

   27 |     end if
      |       1
Error: Expecting END MODULE statement at (1)
temp.f95:28:3:

   28 | end do
      |   1
Error: Expecting END MODULE statement at (1)
temp.f95:30:3:

   30 | end function smashing_stones
      |   1
Error: Expecting END MODULE statement at (1)
temp.f95:35:5:

   35 | use smashing_stones
      |     1
Fatal Error: Cannot open module file ‚Äòsmashing_stones.mod‚Äô for reading at (1): No such file or directory
compilation terminated.
</pre>
          </div>
          
        </div>
        <div
          class="tab-pane fade"
          id="python-tab-pane"
          role="tabpanel"
          aria-labelledby="python-tab"
          tabindex="0">
          <alert class="alert alert-info d-flex">
            <strong>üåê Data from online sources</strong>
          </alert>
          <pre><code class="language-python">def longestOnes(nums, k):
    left, right, max_ones, zero_count = 0, 0, 0, 0
    while right &lt; len(nums):
        if nums[right] == 0:
            zero_count += 1
        while zero_count &gt; k:
            if nums[left] == 0:
                zero_count -= 1
            left += 1
        max_ones = max(max_ones, right - left + 1)
        right += 1
    return max_ones
</code></pre>
<pre><code>The algorithm for this problem is a sliding window solution. We iterate through the array, and for each iteration, we check if the current element is a 0. If it is, we increment the zeroCount. If the zeroCount exceeds k, we move the left pointer of the sliding window forwards, checking if the element we are leaving is a 0, and decrementing the zeroCount accordingly. We then calculate and store the maximum consecutive 1's within the sliding window for each iteration, incrementing the right pointer of the sliding window at every step. Finally, we return the maximum consecutive 1's after iterating through the whole array. The algorithm focuses on processing the array in a single pass and adjusting window boundaries accordingly. Each language implementation follows this algorithm and uses similar variable names for convenience.
</code></pre>
        </div>
        <div
          class="tab-pane fade"
          id="cpp-tab-pane"
          role="tabpanel"
          aria-labelledby="cpp-tab"
          tabindex="0">
          <alert class="alert alert-info d-flex">
            <strong>üåê Data from online sources</strong>
          </alert>
          <pre><code class="language-cpp">int longestOnes(vector&lt;int&gt;&amp; nums, int k) {
    int left = 0, right = 0, maxOnes = 0, zeroCount = 0;
    while (right &lt; nums.size()) {
        if (nums[right] == 0) zeroCount++;
        while (zeroCount &gt; k) {
            if (nums[left] == 0) zeroCount--;
            left++;
        }
        maxOnes = max(maxOnes, right - left + 1);
        right++;
    }
    return maxOnes;
}
</code></pre>
<pre><code>The algorithm for this problem is a sliding window solution. We iterate through the array, and for each iteration, we check if the current element is a 0. If it is, we increment the zeroCount. If the zeroCount exceeds k, we move the left pointer of the sliding window forwards, checking if the element we are leaving is a 0, and decrementing the zeroCount accordingly. We then calculate and store the maximum consecutive 1's within the sliding window for each iteration, incrementing the right pointer of the sliding window at every step. Finally, we return the maximum consecutive 1's after iterating through the whole array. The algorithm focuses on processing the array in a single pass and adjusting window boundaries accordingly. Each language implementation follows this algorithm and uses similar variable names for convenience.
</code></pre>
        </div>
      </div>
      <style>
        .model-code {
          max-height: 600px;
          overflow-y: auto;
        }

        .font-emoji {
          font-family: emoji;
        }
      </style>
    </div>
  </div>
</div>
<script>
  hljs.addPlugin(new CopyButtonPlugin());
  hljs.highlightAll();
</script>

  </body>
</html>