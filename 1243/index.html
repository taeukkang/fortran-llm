<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Fine-tuning CodeLlama-7B for Fortran Code Generation</title>
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/5.3.3/zephyr/bootstrap.min.css"
      integrity="sha512-CWXb9sx63+REyEBV/cte+dE1hSsYpJifb57KkqAXjsN3gZQt6phZt7e5RhgZrUbaNfCdtdpcqDZtuTEB+D3q2Q=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer" />
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@11.9.0/build/styles/atom-one-dark.min.css" />
    <link
      rel="stylesheet"
      href="https://unpkg.com/highlightjs-copy/dist/highlightjs-copy.min.css" />
    <script src="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@11.9.0/build/highlight.min.js"></script>
    <script src="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@11.9.0/build/languages/fortran.min.js"></script>
    <script src="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@11.9.0/build/languages/python.min.js"></script>
    <script src="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@11.9.0/build/languages/cpp.min.js"></script>
    <script src="https://unpkg.com/highlightjs-copy/dist/highlightjs-copy.min.js"></script>
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.min.js"
      integrity="sha384-BBtl+eGJRgqQAUMxJ7pMwbEyER4l1g+O15P+16Ep7Q9Q+zqX6gSbd85u4mG4QzX+"
      crossorigin="anonymous"></script>
  </head>
  <body>
    
<div class="container">
  <div class="row">
    <div class="col d-flex justify-content-between align-items-center">
      <h2>Array Transformation</h2>
      <div>
        <a href="/" class="btn btn-outline-primary me-2">
          üè†
        </a>
        <a
          href="/1232/"
          class="btn btn-outline-secondary me-2">
          ‚¨ÖÔ∏è
        </a>
        <a
          href="/1252/"
          class="btn btn-outline-secondary">
          ‚û°Ô∏è
        </a>
      </div>
    </div>
  </div>

  <div class="row">
    <div class="col">
      <div class="leetcode-problem-content card">
        <div class="card-body">
          <p>Given an initial array <code>arr</code>, every day you produce a new array using the array of the previous day.</p>
<p>On the <code>i</code>-th day, you do the following operations on the array of day <code>i-1</code> to produce the array of day <code>i</code>:</p>
<ol>
<li>If an element is smaller than both its left neighbor and its right neighbor, then this element is incremented.</li>
<li>If an element is bigger than both its left neighbor and its right neighbor, then this element is decremented.</li>
<li>The first and last elements never change.</li>
</ol>
<p>After some days, the array does not change. Return that final array.</p>
<p><strong>Example 1:</strong></p>
<p><strong>Input:</strong> arr = [6,2,3,4]
<strong>Output:</strong> [6,3,3,4]
<strong>Explanation:</strong> 
On the first day, the array is changed from [6,2,3,4] to [6,3,3,4].
No more operations can be done to this array.</p>
<p><strong>Example 2:</strong></p>
<p><strong>Input:</strong> arr = [1,6,3,4,3,5]
<strong>Output:</strong> [1,4,4,4,4,5]
<strong>Explanation:</strong> 
On the first day, the array is changed from [1,6,3,4,3,5] to [1,5,4,3,4,5].
On the second day, the array is changed from [1,5,4,3,4,5] to [1,4,4,4,4,5].
No more operations can be done to this array.</p>
<p><strong>Constraints:</strong></p>
<ul>
<li><code>3 &lt;= arr.length &lt;= 100</code></li>
<li><code>1 &lt;= arr[i] &lt;= 100</code></li>
</ul>
          <hr />
          <span class="fst-italic">
            Note: This problem is from
            <a
              href="https://leetcode.com/problems/array-transformation/description/">LeetCode</a>.
          </span>
        </div>
      </div>
      <style>
        .leetcode-problem-content {
          max-height: 200px;
          overflow-y: auto;
        }
      </style>
    </div>
  </div>
  <div class="row">
    <div class="col-md-6">
      <ul class="nav nav-underline mb-2" id="myTab" role="tablist">
        <li class="nav-item" role="presentation">
          <button
            class="nav-link active"
            id="our-model-tab"
            data-bs-toggle="tab"
            data-bs-target="#our-model-tab-pane"
            type="button"
            role="tab"
            aria-controls="our-model-tab-pane"
            aria-selected="true">
            ü¶æ Our model
          </button>
        </li>
      </ul>
      <div class="tab-content" id="myTabContent">
        <div
          class="tab-pane fade show active"
          id="our-model-tab-pane"
          role="tabpanel"
          aria-labelledby="our-model-tab"
          tabindex="0">
          <div class="row mb-2">
            <div class="col">
              <div
                class="card border-danger"
                style="border-width: 2px">
                <div class="card-body">
                  <span class="font-emoji">
                    ‚ùå
                  </span>
                  <strong>Compiled</strong>
                </div>
              </div>
            </div>

            <div class="col">
              <div
                class="card border-danger"
                style="border-width: 2px">
                <div class="card-body">
                  <span class="font_emoji">
                    ‚ùå
                  </span>
                  <strong>Executed</strong>
                </div>
              </div>
            </div>

            <div class="col">
              <div
                class="card border-danger"
                style="border-width: 2px">
                <div class="card-body">
                  <span class="font-emoji">
                    ‚ùå
                  </span>
                  <strong>Correct</strong>
                </div>
              </div>
            </div>
          </div>
          <pre><code class="language-fortran model-code">program main
    implicit none

    integer, parameter :: n = 100
    integer :: i, j, k
    integer :: arr(n)
    logical :: changed

    ! Example 1
    arr = [6, 2, 3, 4]
    call solve(arr)
    write(*,*) "Example 1:"
    write(*,'(10I3)') arr

    ! Example 2
    arr = [1, 6, 3, 4, 3, 5]
    call solve(arr)
    write(*,*) "Example 2:"
    write(*,'(10I3)') arr

contains

    subroutine solve(arr)
        implicit none
        integer, intent(inout) :: arr(:)
        integer :: i, j, k
        logical :: changed

        do while (changed)
            changed = .false.
            do i = 2, size(arr)-1
                if (arr(i) < arr(i-1) .and. arr(i) < arr(i+1)) then
                    arr(i) = arr(i) + 1
                    changed = .true.
                end if
                if (arr(i) > arr(i-1) .and. arr(i) > arr(i+1)) then
                    arr(i) = arr(i) - 1
                    changed = .true.
                end if
            end do
        end do
    end subroutine solve

end program main</code></pre>

           
          <div class="alert alert-danger" role="alert">
            <strong>stderr</strong>
            <pre>temp.f95:10:4:

   10 |     arr = [6, 2, 3, 4]
      |    1
Error: Different shape for array assignment at (1) on dimension 1 (100 and 4)
temp.f95:16:4:

   16 |     arr = [1, 6, 3, 4, 3, 5]
      |    1
Error: Different shape for array assignment at (1) on dimension 1 (100 and 6)
</pre>
          </div>
          
        </div>
      </div>
    </div>
    <div class="col-md-6">
      <ul class="nav nav-underline mb-2" id="myTab" role="tablist">
        <li class="nav-item" role="presentation">
          <button
            class="nav-link active"
            id="codellama-tab"
            data-bs-toggle="tab"
            data-bs-target="#codellama-tab-pane"
            type="button"
            role="tab"
            aria-controls="codellama-tab-pane"
            aria-selected="true">
            ü¶ô CodeLlama-7B
          </button>
        </li>
        <li class="nav-item" role="presentation">
          <button
            class="nav-link"
            id="python-tab"
            data-bs-toggle="tab"
            data-bs-target="#python-tab-pane"
            type="button"
            role="tab"
            aria-controls="python-tab-pane"
            aria-selected="false">
            üêç Python
          </button>
        </li>
        <li class="nav-item" role="presentation">
          <button
            class="nav-link"
            id="cpp-tab"
            data-bs-toggle="tab"
            data-bs-target="#cpp-tab-pane"
            type="button"
            role="tab"
            aria-controls="cpp-tab-pane"
            aria-selected="false">
            ü§† C++
          </button>
        </li>
      </ul>
      <div class="tab-content" id="myTabContent">
        <div
          class="tab-pane fade show active"
          id="codellama-tab-pane"
          role="tabpanel"
          aria-labelledby="codellama-tab"
          tabindex="0">
          <div class="row mb-2">
            <div class="col">
              <div
                class="card border-success"
                style="border-width: 2px">
                <div class="card-body">
                  <span class="font-emoji">
                    ‚úÖ
                  </span>
                  <strong>Compiled</strong>
                </div>
              </div>
            </div>

            <div class="col">
              <div
                class="card border-success"
                style="border-width: 2px">
                <div class="card-body">
                  <span class="font-emoji">
                    ‚úÖ
                  </span>
                  <strong>Executed</strong>
                </div>
              </div>
            </div>

            <div class="col">
              <div
                class="card border-danger"
                style="border-width: 2px">
                <div class="card-body">
                  <span class="font-emoji">
                    ‚ùå
                  </span>
                  <strong>Correct</strong>
                </div>
              </div>
            </div>
          </div>
          <pre><code class="language-fortran model-code">module example

implicit none

contains

function solve(arr) result(final_arr)

integer, intent(in) :: arr(:)
integer :: final_arr(size(arr))

integer :: i, j

final_arr = arr

do i = 2, size(arr) - 1
    do j = i - 1, i + 1
        if (final_arr(i) < final_arr(j)) then
            final_arr(i) = final_arr(i) + 1
        end if
    end do
end do

do i = 2, size(arr) - 1
    do j = i - 1, i + 1
        if (final_arr(i) > final_arr(j)) then
            final_arr(i) = final_arr(i) - 1
        end if
    end do
end do

end function solve

end module example

program main

use example

implicit none

integer, parameter :: n = 6
integer :: arr(n) = [6, 2, 3, 4, 3, 5]
integer :: final_arr(n)

final_arr = solve(arr)

write (*, *) final_arr

end program main
</code></pre>
          
          <div class="alert alert-info" role="alert">
            <strong>stdout</strong>
            <pre>           6           3           3           3           4           5
</pre>
          </div>
           
        </div>
        <div
          class="tab-pane fade"
          id="python-tab-pane"
          role="tabpanel"
          aria-labelledby="python-tab"
          tabindex="0">
          <alert class="alert alert-info d-flex">
            <strong>üåê Data from online sources</strong>
          </alert>
          <pre><code class="language-python">def sumEvenGrandparent(root, parent=None, grandparent=None):
    if not root:
        return 0
    sum = 0
    if grandparent and grandparent.val % 2 == 0:
        sum += root.val
    sum += sumEvenGrandparent(root.left, root, parent) + sumEvenGrandparent(root.right, root, parent)
    return sum
</code></pre>
<p>We perform a depth-first search traversal of the binary tree. 
For each node, we maintain the current node's parent and grandparent in the traversal.
While traversing the tree, we check if the current node's grandparent has an even value.
If yes, we add the current node's value to the sum.
The algorithm is the same for all languages, with only syntax differences.</p>
        </div>
        <div
          class="tab-pane fade"
          id="cpp-tab-pane"
          role="tabpanel"
          aria-labelledby="cpp-tab"
          tabindex="0">
          <alert class="alert alert-info d-flex">
            <strong>üåê Data from online sources</strong>
          </alert>
          <pre><code class="language-cpp">int sumEvenGrandparent(TreeNode* root, TreeNode* parent = nullptr, TreeNode* grandparent = nullptr) {
    if (!root) return 0;
    int sum = 0;
    if (grandparent &amp;&amp; grandparent-&gt;val % 2 == 0) {
        sum += root-&gt;val;
    }
    sum += sumEvenGrandparent(root-&gt;left, root, parent) + sumEvenGrandparent(root-&gt;right, root, parent);
    return sum;
}
</code></pre>
<p>We perform a depth-first search traversal of the binary tree. 
For each node, we maintain the current node's parent and grandparent in the traversal.
While traversing the tree, we check if the current node's grandparent has an even value.
If yes, we add the current node's value to the sum.
The algorithm is the same for all languages, with only syntax differences.</p>
        </div>
      </div>
      <style>
        .model-code {
          max-height: 600px;
          overflow-y: auto;
        }

        .font-emoji {
          font-family: emoji;
        }
      </style>
    </div>
  </div>
</div>
<script>
  hljs.addPlugin(new CopyButtonPlugin());
  hljs.highlightAll();
</script>

  </body>
</html>