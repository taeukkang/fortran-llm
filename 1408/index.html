<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Fine-tuning CodeLlama-7B for Fortran Code Generation</title>
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/5.3.3/zephyr/bootstrap.min.css"
      integrity="sha512-CWXb9sx63+REyEBV/cte+dE1hSsYpJifb57KkqAXjsN3gZQt6phZt7e5RhgZrUbaNfCdtdpcqDZtuTEB+D3q2Q=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer" />
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@11.9.0/build/styles/atom-one-dark.min.css" />
    <link
      rel="stylesheet"
      href="https://unpkg.com/highlightjs-copy/dist/highlightjs-copy.min.css" />
    <script src="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@11.9.0/build/highlight.min.js"></script>
    <script src="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@11.9.0/build/languages/fortran.min.js"></script>
    <script src="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@11.9.0/build/languages/python.min.js"></script>
    <script src="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@11.9.0/build/languages/cpp.min.js"></script>
    <script src="https://unpkg.com/highlightjs-copy/dist/highlightjs-copy.min.js"></script>
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.min.js"
      integrity="sha384-BBtl+eGJRgqQAUMxJ7pMwbEyER4l1g+O15P+16Ep7Q9Q+zqX6gSbd85u4mG4QzX+"
      crossorigin="anonymous"></script>
  </head>
  <body>
    
<div class="container">
  <div class="row">
    <div class="col d-flex justify-content-between align-items-center">
      <h2>String Matching in an Array</h2>
      <div>
        <a href="/" class="btn btn-outline-primary me-2">
          üè†
        </a>
        <a
          href="/1403/"
          class="btn btn-outline-secondary me-2">
          ‚¨ÖÔ∏è
        </a>
        <a
          href="/1413/"
          class="btn btn-outline-secondary">
          ‚û°Ô∏è
        </a>
      </div>
    </div>
  </div>

  <div class="row">
    <div class="col">
      <div class="leetcode-problem-content card">
        <div class="card-body">
          <p>Given an array of string <code>words</code>, return <em>all strings in</em> <code>words</code> <em>that is a <strong>substring</strong> of another word</em>. You can return the answer in <strong>any order</strong>.</p>
<p>A <strong>substring</strong> is a contiguous sequence of characters within a string</p>
<p><strong>Example 1:</strong></p>
<p><strong>Input:</strong> words = [ "mass ", "as ", "hero ", "superhero "]
<strong>Output:</strong> [ "as ", "hero "]
<strong>Explanation:</strong>  "as " is substring of  "mass " and  "hero " is substring of  "superhero ".
[ "hero ", "as "] is also a valid answer.</p>
<p><strong>Example 2:</strong></p>
<p><strong>Input:</strong> words = [ "leetcode ", "et ", "code "]
<strong>Output:</strong> [ "et ", "code "]
<strong>Explanation:</strong>  "et ",  "code " are substring of  "leetcode ".</p>
<p><strong>Example 3:</strong></p>
<p><strong>Input:</strong> words = [ "blue ", "green ", "bu "]
<strong>Output:</strong> []
<strong>Explanation:</strong> No string of words is substring of another string.</p>
<p><strong>Constraints:</strong></p>
<ul>
<li><code>1 &lt;= words.length &lt;= 100</code></li>
<li><code>1 &lt;= words[i].length &lt;= 30</code></li>
<li><code>words[i]</code> contains only lowercase English letters.</li>
<li>All the strings of <code>words</code> are <strong>unique</strong>.</li>
</ul>
          <hr />
          <span class="fst-italic">
            Note: This problem is from
            <a
              href="https://leetcode.com/problems/string-matching-in-an-array/description/">LeetCode</a>.
          </span>
        </div>
      </div>
      <style>
        .leetcode-problem-content {
          max-height: 200px;
          overflow-y: auto;
        }
      </style>
    </div>
  </div>
  <div class="row">
    <div class="col-md-6">
      <ul class="nav nav-underline mb-2" id="myTab" role="tablist">
        <li class="nav-item" role="presentation">
          <button
            class="nav-link active"
            id="our-model-tab"
            data-bs-toggle="tab"
            data-bs-target="#our-model-tab-pane"
            type="button"
            role="tab"
            aria-controls="our-model-tab-pane"
            aria-selected="true">
            ü¶æ Our model
          </button>
        </li>
      </ul>
      <div class="tab-content" id="myTabContent">
        <div
          class="tab-pane fade show active"
          id="our-model-tab-pane"
          role="tabpanel"
          aria-labelledby="our-model-tab"
          tabindex="0">
          <div class="row mb-2">
            <div class="col">
              <div
                class="card border-success"
                style="border-width: 2px">
                <div class="card-body">
                  <span class="font-emoji">
                    ‚úÖ
                  </span>
                  <strong>Compiled</strong>
                </div>
              </div>
            </div>

            <div class="col">
              <div
                class="card border-danger"
                style="border-width: 2px">
                <div class="card-body">
                  <span class="font_emoji">
                    ‚ùå
                  </span>
                  <strong>Executed</strong>
                </div>
              </div>
            </div>

            <div class="col">
              <div
                class="card border-danger"
                style="border-width: 2px">
                <div class="card-body">
                  <span class="font-emoji">
                    ‚ùå
                  </span>
                  <strong>Correct</strong>
                </div>
              </div>
            </div>
          </div>
          <pre><code class="language-fortran model-code">program main
    implicit none

    integer, parameter :: n = 4
    character(len=30), dimension(n) :: words
    character(len=30), allocatable, dimension(:) :: substrs
    integer :: i, j

    ! Example 1
    words(1) = 'mass '
    words(2) = 'as '
    words(3) = 'hero '
    words(4) = 'superhero '

    call get_substrs(words, substrs)
    do i = 1, size(substrs)
        write(*,*) trim(substrs(i))
    end do

    ! Example 2
    words(1) = 'leetcode '
    words(2) = 'et '
    words(3) = 'code '

    call get_substrs(words, substrs)
    do i = 1, size(substrs)
        write(*,*) trim(substrs(i))
    end do

    ! Example 3
    words(1) = 'blue '
    words(2) = 'green '
    words(3) = 'bu '

    call get_substrs(words, substrs)
    if (size(substrs) > 0) then
        do i = 1, size(substrs)
            write(*,*) trim(substrs(i))
        end do
    else
        write(*,*) 'No substring found'
    end if

contains

    subroutine get_substrs(words, substrs)
        implicit none
        character(len=*), intent(in) :: words(:)
        character(len=*), allocatable, intent(out) :: substrs(:)
        integer :: i, j, k, l
        logical :: found

        allocate(substrs(0))

        do i = 1, size(words) - 1
            do j = i + 1, size(words)
                found = .false.
                do k = 1, len(words(j))
                    do l = 1, len(words(i))
                        if (words(j)(k:k) == words(i)(l:l)) then
                            found = .true.
                            exit
                        end if
                    end do
                    if (found) exit
                end do
                if (found) then
                    allocate(character(len=len(words(i))) :: substrs(size(substrs)+1))
                    substrs(size(substrs)) = words(i)
                end if
            end do
        end do
    end subroutine get_substrs

end program main</code></pre>

           
          <div class="alert alert-danger" role="alert">
            <strong>stderr</strong>
            <pre>At line 68 of file temp.f95
Fortran runtime error: Attempting to allocate already allocated variable 'substrs'

Error termination. Backtrace:
#0  0x7a2aa20c2960 in ???
#1  0x7a2aa20c34d9 in ???
#2  0x56a041fb0803 in get_substrs.0
#3  0x56a041fb0c2a in MAIN__
#4  0x56a041fb12fc in main
</pre>
          </div>
          
        </div>
      </div>
    </div>
    <div class="col-md-6">
      <ul class="nav nav-underline mb-2" id="myTab" role="tablist">
        <li class="nav-item" role="presentation">
          <button
            class="nav-link active"
            id="codellama-tab"
            data-bs-toggle="tab"
            data-bs-target="#codellama-tab-pane"
            type="button"
            role="tab"
            aria-controls="codellama-tab-pane"
            aria-selected="true">
            ü¶ô CodeLlama-7B
          </button>
        </li>
        <li class="nav-item" role="presentation">
          <button
            class="nav-link"
            id="python-tab"
            data-bs-toggle="tab"
            data-bs-target="#python-tab-pane"
            type="button"
            role="tab"
            aria-controls="python-tab-pane"
            aria-selected="false">
            üêç Python
          </button>
        </li>
        <li class="nav-item" role="presentation">
          <button
            class="nav-link"
            id="cpp-tab"
            data-bs-toggle="tab"
            data-bs-target="#cpp-tab-pane"
            type="button"
            role="tab"
            aria-controls="cpp-tab-pane"
            aria-selected="false">
            ü§† C++
          </button>
        </li>
      </ul>
      <div class="tab-content" id="myTabContent">
        <div
          class="tab-pane fade show active"
          id="codellama-tab-pane"
          role="tabpanel"
          aria-labelledby="codellama-tab"
          tabindex="0">
          <div class="row mb-2">
            <div class="col">
              <div
                class="card border-success"
                style="border-width: 2px">
                <div class="card-body">
                  <span class="font-emoji">
                    ‚úÖ
                  </span>
                  <strong>Compiled</strong>
                </div>
              </div>
            </div>

            <div class="col">
              <div
                class="card border-danger"
                style="border-width: 2px">
                <div class="card-body">
                  <span class="font-emoji">
                    ‚ùå
                  </span>
                  <strong>Executed</strong>
                </div>
              </div>
            </div>

            <div class="col">
              <div
                class="card border-danger"
                style="border-width: 2px">
                <div class="card-body">
                  <span class="font-emoji">
                    ‚ùå
                  </span>
                  <strong>Correct</strong>
                </div>
              </div>
            </div>
          </div>
          <pre><code class="language-fortran model-code">program substring_strings
      implicit none

      integer, parameter :: MAX_WORDS = 100
      integer, parameter :: MAX_LENGTH = 30

      character(len=MAX_LENGTH), dimension(MAX_WORDS) :: words
      character(len=MAX_LENGTH), dimension(MAX_WORDS) :: substring_words
      integer :: num_words, i, j, k

      ! Read the input
      read(*,*) num_words
      do i = 1, num_words
        read(*,*) words(i)
      end do

      ! Initialize the output array
      substring_words = ""

      ! Loop through each word and check if it is a substring of another word
      do i = 1, num_words
        do j = i + 1, num_words
          if (index(words(j), words(i)) /= 0) then
            ! The word at index j is a substring of the word at index i
            substring_words(k) = words(j)
            k = k + 1
          end if
        end do
      end do

      ! Print the output
      do i = 1, k - 1
        write(*,*) substring_words(i)
      end do

      end program substring_strings
</code></pre>
           
          <div class="alert alert-danger" role="alert">
            <strong>stderr</strong>
            <pre>At line 12 of file temp.f95 (unit = 5, file = 'stdin')
Fortran runtime error: End of file

Error termination. Backtrace:
#0  0x7fcbd4865960 in ???
#1  0x7fcbd48664d9 in ???
#2  0x7fcbd4aba17b in ???
#3  0x7fcbd4ab3684 in ???
#4  0x7fcbd4ab42aa in ???
#5  0x56d13c18e22e in MAIN__
#6  0x56d13c18e560 in main
</pre>
          </div>
          
        </div>
        <div
          class="tab-pane fade"
          id="python-tab-pane"
          role="tabpanel"
          aria-labelledby="python-tab"
          tabindex="0">
          <alert class="alert alert-info d-flex">
            <strong>üåê Data from online sources</strong>
          </alert>
          <pre><code class="language-python">import math

def smallest_divisor(nums, threshold):
    left, right = 1, 10**6
    while left &lt; right:
        mid = (left + right) // 2
        total = sum(math.ceil(n / mid) for n in nums)
        if total &gt; threshold:
            left = mid + 1
        else:
            right = mid
    return left
</code></pre>
<p>We will use a binary search to find the smallest divisor. Define the search range initially from 1 to 1,000,000 (10^6). Calculate the middle value 'mid' between the given search range (left and right), and then get the sum of division results using that middle value in the array. If the sum of the division results is greater than the given threshold, that means the divisor must be larger, so we update the left boundary to be equal to 'mid' + 1. If the sum is less than or equal to the threshold, it means the divisor can be smaller or the value itself, so we update the right boundary to be equal to 'mid'. We repeat this process until the left and right boundaries are equal, and the final answer will be the left boundary.</p>
        </div>
        <div
          class="tab-pane fade"
          id="cpp-tab-pane"
          role="tabpanel"
          aria-labelledby="cpp-tab"
          tabindex="0">
          <alert class="alert alert-info d-flex">
            <strong>üåê Data from online sources</strong>
          </alert>
          <pre><code class="language-cpp">#include &lt;cmath&gt;
#include &lt;vector&gt;

int smallestDivisor(std::vector&lt;int&gt;&amp; nums, int threshold) {
    int left = 1, right = 1e6;
    while (left &lt; right) {
        int mid = (left + right) / 2;
        int sum = 0;
        for (int n : nums) {
            sum += std::ceil(1.0 * n / mid);
        }
        if (sum &gt; threshold) {
            left = mid + 1;
        } else {
            right = mid;
        }
    }
    return left;
}
</code></pre>
<p>We will use a binary search to find the smallest divisor. Define the search range initially from 1 to 1,000,000 (10^6). Calculate the middle value 'mid' between the given search range (left and right), and then get the sum of division results using that middle value in the array. If the sum of the division results is greater than the given threshold, that means the divisor must be larger, so we update the left boundary to be equal to 'mid' + 1. If the sum is less than or equal to the threshold, it means the divisor can be smaller or the value itself, so we update the right boundary to be equal to 'mid'. We repeat this process until the left and right boundaries are equal, and the final answer will be the left boundary.</p>
        </div>
      </div>
      <style>
        .model-code {
          max-height: 600px;
          overflow-y: auto;
        }

        .font-emoji {
          font-family: emoji;
        }
      </style>
    </div>
  </div>
</div>
<script>
  hljs.addPlugin(new CopyButtonPlugin());
  hljs.highlightAll();
</script>

  </body>
</html>