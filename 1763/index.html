<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Fine-tuning CodeLlama-7B for Fortran Code Generation</title>
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/5.3.3/zephyr/bootstrap.min.css"
      integrity="sha512-CWXb9sx63+REyEBV/cte+dE1hSsYpJifb57KkqAXjsN3gZQt6phZt7e5RhgZrUbaNfCdtdpcqDZtuTEB+D3q2Q=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer" />
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@11.9.0/build/styles/atom-one-dark.min.css" />
    <link
      rel="stylesheet"
      href="https://unpkg.com/highlightjs-copy/dist/highlightjs-copy.min.css" />
    <script src="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@11.9.0/build/highlight.min.js"></script>
    <script src="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@11.9.0/build/languages/fortran.min.js"></script>
    <script src="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@11.9.0/build/languages/python.min.js"></script>
    <script src="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@11.9.0/build/languages/cpp.min.js"></script>
    <script src="https://unpkg.com/highlightjs-copy/dist/highlightjs-copy.min.js"></script>
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.min.js"
      integrity="sha384-BBtl+eGJRgqQAUMxJ7pMwbEyER4l1g+O15P+16Ep7Q9Q+zqX6gSbd85u4mG4QzX+"
      crossorigin="anonymous"></script>
  </head>
  <body>
    
<div class="container">
  <div class="row">
    <div class="col d-flex justify-content-between align-items-center">
      <h2>Longest Nice Substring</h2>
      <div>
        <a href="/fortran-llm/" class="btn btn-outline-primary me-2">
          üè†
        </a>
        <a
          href="/fortran-llm/1758/"
          class="btn btn-outline-secondary me-2">
          ‚¨ÖÔ∏è
        </a>
        <a
          href="/fortran-llm/1768/"
          class="btn btn-outline-secondary">
          ‚û°Ô∏è
        </a>
      </div>
    </div>
  </div>

  <div class="row">
    <div class="col">
      <div class="leetcode-problem-content card">
        <div class="card-body">
          <p>A string <code>s</code> is <strong>nice</strong> if, for every letter of the alphabet that <code>s</code> contains, it appears <strong>both</strong> in uppercase and lowercase. For example, <code>"abABB "</code> is nice because <code>'A'</code> and <code>'a'</code> appear, and <code>'B'</code> and <code>'b'</code> appear. However, <code>"abA "</code> is not because <code>'b'</code> appears, but <code>'B'</code> does not.</p>
<p>Given a string <code>s</code>, return <em>the longest <strong>substring</strong> of <code>s</code> that is <strong>nice</strong>. If there are multiple, return the substring of the <strong>earliest</strong> occurrence. If there are none, return an empty string</em>.</p>
<p><strong>Example 1:</strong></p>
<p><strong>Input:</strong> s =  "YazaAay "
<strong>Output:</strong>  "aAa "
**Explanation: ** "aAa " is a nice string because 'A/a' is the only letter of the alphabet in s, and both 'A' and 'a' appear.
 "aAa " is the longest nice substring.</p>
<p><strong>Example 2:</strong></p>
<p><strong>Input:</strong> s =  "Bb "
<strong>Output:</strong>  "Bb "
<strong>Explanation:</strong>  "Bb " is a nice string because both 'B' and 'b' appear. The whole string is a substring.</p>
<p><strong>Example 3:</strong></p>
<p><strong>Input:</strong> s =  "c "
<strong>Output:</strong>  " "
<strong>Explanation:</strong> There are no nice substrings.</p>
<p><strong>Constraints:</strong></p>
<ul>
<li><code>1 &lt;= s.length &lt;= 100</code></li>
<li><code>s</code> consists of uppercase and lowercase English letters.</li>
</ul>
          <hr />
          <span class="fst-italic">
            Note: This problem is from
            <a
              href="https://leetcode.com/problems/longest-nice-substring/description/">LeetCode</a>.
          </span>
        </div>
      </div>
      <style>
        .leetcode-problem-content {
          max-height: 200px;
          overflow-y: auto;
        }
      </style>
    </div>
  </div>
  <div class="row">
    <div class="col-md-6">
      <ul class="nav nav-underline mb-2" id="myTab" role="tablist">
        <li class="nav-item" role="presentation">
          <button
            class="nav-link active"
            id="our-model-tab"
            data-bs-toggle="tab"
            data-bs-target="#our-model-tab-pane"
            type="button"
            role="tab"
            aria-controls="our-model-tab-pane"
            aria-selected="true">
            ü¶æ Our model
          </button>
        </li>
      </ul>
      <div class="tab-content" id="myTabContent">
        <div
          class="tab-pane fade show active"
          id="our-model-tab-pane"
          role="tabpanel"
          aria-labelledby="our-model-tab"
          tabindex="0">
          <div class="row mb-2">
            <div class="col">
              <div
                class="card border-danger"
                style="border-width: 2px">
                <div class="card-body">
                  <span class="font-emoji">
                    ‚ùå
                  </span>
                  <strong>Compiled</strong>
                </div>
              </div>
            </div>

            <div class="col">
              <div
                class="card border-danger"
                style="border-width: 2px">
                <div class="card-body">
                  <span class="font_emoji">
                    ‚ùå
                  </span>
                  <strong>Executed</strong>
                </div>
              </div>
            </div>

            <div class="col">
              <div
                class="card border-danger"
                style="border-width: 2px">
                <div class="card-body">
                  <span class="font-emoji">
                    ‚ùå
                  </span>
                  <strong>Correct</strong>
                </div>
              </div>
            </div>
          </div>
          <pre><code class="language-fortran model-code">program main
    implicit none

    character(len=:), allocatable :: s
    integer :: i, j

    ! Examples
    s = "YazaAay "
    print *, longestNiceSubstring(s)
    s = "Bb "
    print *, longestNiceSubstring(s)
    s = "c "
    print *, longestNiceSubstring(s)

contains

    function longestNiceSubstring(s) result(res)
        implicit none
        character(len=*), intent(in) :: s
        character(len=:), allocatable :: res
        logical :: found

        allocate(character(len=size(s)) :: res)
        res = ""
        do i = 1, size(s) - 1
            found = .false.
            do j = 1, size(s) - i
                if (isNiceString(s(i+j:i+j))) then
                    found = .true.
                    exit
                end if
            end do
            if (found) then
                res = s(i:i+j-1)
            end if
        end do
    end function longestNiceSubstring

    function isNiceString(s) result(res)
        implicit none
        character(len=*), intent(in) :: s
        logical :: res

        res = .false.
        do i = 1, len_trim(s)
            if (index(s, char(ichar('A') + i - 1)) /= 0 .and. &
                index(s, char(ichar('a') + i - 1)) /= 0) then
                res = .true.
                exit
            end if
        end do
    end function isNiceString

end program main</code></pre>

           
          <div class="alert alert-danger" role="alert">
            <strong>stderr</strong>
            <pre>temp.f95:23:36:

   23 |         allocate(character(len=size(s)) :: res)
      |                                    1
Error: ‚Äòarray‚Äô argument of ‚Äòsize‚Äô intrinsic at (1) must be an array
temp.f95:27:27:

   27 |             do j = 1, size(s) - i
      |                           1
Error: ‚Äòarray‚Äô argument of ‚Äòsize‚Äô intrinsic at (1) must be an array
temp.f95:25:23:

   25 |         do i = 1, size(s) - 1
      |                       1
Error: ‚Äòarray‚Äô argument of ‚Äòsize‚Äô intrinsic at (1) must be an array
temp.f95:45:29:

   28 |                 if (isNiceString(s(i+j:i+j))) then
      |                    2         
......
   45 |         do i = 1, len_trim(s)
      |                             1
Error: Index variable ‚Äòi‚Äô redefined at (1) in procedure ‚Äòisnicestring‚Äô called from within DO loop at (2)
</pre>
          </div>
          
        </div>
      </div>
    </div>
    <div class="col-md-6">
      <ul class="nav nav-underline mb-2" id="myTab" role="tablist">
        <li class="nav-item" role="presentation">
          <button
            class="nav-link active"
            id="codellama-tab"
            data-bs-toggle="tab"
            data-bs-target="#codellama-tab-pane"
            type="button"
            role="tab"
            aria-controls="codellama-tab-pane"
            aria-selected="true">
            ü¶ô CodeLlama-7B
          </button>
        </li>
        <li class="nav-item" role="presentation">
          <button
            class="nav-link"
            id="python-tab"
            data-bs-toggle="tab"
            data-bs-target="#python-tab-pane"
            type="button"
            role="tab"
            aria-controls="python-tab-pane"
            aria-selected="false">
            üêç Python
          </button>
        </li>
        <li class="nav-item" role="presentation">
          <button
            class="nav-link"
            id="cpp-tab"
            data-bs-toggle="tab"
            data-bs-target="#cpp-tab-pane"
            type="button"
            role="tab"
            aria-controls="cpp-tab-pane"
            aria-selected="false">
            ü§† C++
          </button>
        </li>
      </ul>
      <div class="tab-content" id="myTabContent">
        <div
          class="tab-pane fade show active"
          id="codellama-tab-pane"
          role="tabpanel"
          aria-labelledby="codellama-tab"
          tabindex="0">
          <div class="row mb-2">
            <div class="col">
              <div
                class="card border-danger"
                style="border-width: 2px">
                <div class="card-body">
                  <span class="font-emoji">
                    ‚ùå
                  </span>
                  <strong>Compiled</strong>
                </div>
              </div>
            </div>

            <div class="col">
              <div
                class="card border-danger"
                style="border-width: 2px">
                <div class="card-body">
                  <span class="font-emoji">
                    ‚ùå
                  </span>
                  <strong>Executed</strong>
                </div>
              </div>
            </div>

            <div class="col">
              <div
                class="card border-danger"
                style="border-width: 2px">
                <div class="card-body">
                  <span class="font-emoji">
                    ‚ùå
                  </span>
                  <strong>Correct</strong>
                </div>
              </div>
            </div>
          </div>
          <pre><code class="language-fortran model-code">program longestNiceSubstring
    implicit none

    character(len=100) :: s
    integer :: i, j, n
    logical :: isNice
    character(len=100) :: niceSubstring

contains

    function isNice(s) result(isNice)
        implicit none
        character(len=*), intent(in) :: s
        integer :: i
        logical :: isNice

        isNice = .true.

        do i = 1, 26
            if (count(s == char(i + 96)) == 0 .and. count(s == char(i + 64)) == 0) then
                isNice = .false.
                exit
            end if
        end do
    end function isNice

end program longestNiceSubstring
</code></pre>
           
          <div class="alert alert-danger" role="alert">
            <strong>stderr</strong>
            <pre>temp.f95:11:20:

   11 |     function isNice(s) result(isNice)
      |                    1
Error: Procedure ‚Äòisnice‚Äô at (1) has an explicit interface from a previous declaration
temp.f95:12:21:

   12 |         implicit none
      |                     1
Error: Unexpected IMPLICIT NONE statement in CONTAINS section at (1)
temp.f95:13:41:

   13 |         character(len=*), intent(in) :: s
      |                                         1
Error: Unexpected data declaration statement in CONTAINS section at (1)
temp.f95:14:20:

   14 |         integer :: i
      |                    1
Error: Unexpected data declaration statement in CONTAINS section at (1)
temp.f95:15:25:

   15 |         logical :: isNice
      |                         1
Error: Unexpected data declaration statement in CONTAINS section at (1)
temp.f95:17:23:

   17 |         isNice = .true.
      |                       1
Error: Unexpected assignment statement in CONTAINS section at (1)
temp.f95:19:20:

   19 |         do i = 1, 26
      |                    1
Error: Unexpected DO statement in CONTAINS section at (1)
temp.f95:20:87:

   20 |             if (count(s == char(i + 96)) == 0 .and. count(s == char(i + 64)) == 0) then
      |                                                                                       1
Error: Unexpected block IF statement in CONTAINS section at (1)
temp.f95:21:32:

   21 |                 isNice = .false.
      |                                1
Error: Unexpected assignment statement in CONTAINS section at (1)
temp.f95:22:20:

   22 |                 exit
      |                    1
Error: EXIT statement at (1) is not within a construct
temp.f95:23:15:

   23 |             end if
      |               1
Error: Expecting END PROGRAM statement at (1)
temp.f95:24:11:

   24 |         end do
      |           1
Error: Expecting END PROGRAM statement at (1)
temp.f95:25:7:

   25 |     end function isNice
      |       1
Error: Expecting END PROGRAM statement at (1)
</pre>
          </div>
          
        </div>
        <div
          class="tab-pane fade"
          id="python-tab-pane"
          role="tabpanel"
          aria-labelledby="python-tab"
          tabindex="0">
          <alert class="alert alert-info d-flex">
            <strong>üåê Data from online sources</strong>
          </alert>
          <pre><code class="language-python">def longestNiceSubstring(s: str) -&gt; str:
    n = len(s)
    result = &quot;&quot;
    for i in range(n):
        for j in range(i + 1, n):
            is_nice = True
            for ch in range(ord('A'), ord('Z') + 1):
                upper = chr(ch) in s[i:j+1]
                lower = chr(ch + 32) in s[i:j+1]
                if (upper and not lower) or (not upper and lower):
                    is_nice = False
                    break
            if is_nice and j - i + 1 &gt; len(result):
                result = s[i:j+1]
    return result
</code></pre>
<p>The algorithm iterates through all possible substrings using two nested <code>for</code> loops. Then, for each substring, it checks if the substring is nice. If a substring is nice and its length is greater than the current longest nice substring found, it updates the result to store the new longest nice substring.</p>
<p>Specifically, in the innermost loop, the algorithm checks if there is any character (in uppercase form) present and missing its counterpart (lowercase form) or vice versa. If it finds such a pair, it marks the substring as not nice and breaks the loop. If the substring is nice, it updates the result if the substring is longer than the current longest nice substring found.</p>
        </div>
        <div
          class="tab-pane fade"
          id="cpp-tab-pane"
          role="tabpanel"
          aria-labelledby="cpp-tab"
          tabindex="0">
          <alert class="alert alert-info d-flex">
            <strong>üåê Data from online sources</strong>
          </alert>
          <pre><code class="language-cpp">#include &lt;string&gt;
using namespace std;

string longestNiceSubstring(string s) {
    int n = s.length();
    string result = &quot;&quot;;
    for (int i = 0; i &lt; n; i++) {
        for (int j = i + 1; j &lt; n; ++j) {
            bool isNice = true;
            for (char ch = 'A'; ch &lt;= 'Z'; ++ch) {
                bool upper = false, lower = false;
                for (int k = i; k &lt;= j; ++k) {
                    if (s[k] == ch) upper = true;
                    if (s[k] == (ch + 32)) lower = true;
                }
                if ((upper &amp;&amp; !lower) || (!upper &amp;&amp; lower)) {
                    isNice = false;
                    break;
                }
            }
            if (isNice &amp;&amp; j - i + 1 &gt; result.length()) {
                result = s.substr(i, j - i + 1);
            }
        }
    }
    return result;
}
</code></pre>
<p>The algorithm iterates through all possible substrings using two nested <code>for</code> loops. Then, for each substring, it checks if the substring is nice. If a substring is nice and its length is greater than the current longest nice substring found, it updates the result to store the new longest nice substring.</p>
<p>Specifically, in the innermost loop, the algorithm checks if there is any character (in uppercase form) present and missing its counterpart (lowercase form) or vice versa. If it finds such a pair, it marks the substring as not nice and breaks the loop. If the substring is nice, it updates the result if the substring is longer than the current longest nice substring found.</p>
        </div>
      </div>
      <style>
        .model-code {
          max-height: 600px;
          overflow-y: auto;
        }

        .font-emoji {
          font-family: emoji;
        }
      </style>
    </div>
  </div>
</div>
<script>
  hljs.addPlugin(new CopyButtonPlugin());
  hljs.highlightAll();
</script>

  </body>
</html>