<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Fine-tuning CodeLlama-7B for Fortran Code Generation</title>
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/5.3.3/zephyr/bootstrap.min.css"
      integrity="sha512-CWXb9sx63+REyEBV/cte+dE1hSsYpJifb57KkqAXjsN3gZQt6phZt7e5RhgZrUbaNfCdtdpcqDZtuTEB+D3q2Q=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer" />
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@11.9.0/build/styles/atom-one-dark.min.css" />
    <link
      rel="stylesheet"
      href="https://unpkg.com/highlightjs-copy/dist/highlightjs-copy.min.css" />
    <script src="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@11.9.0/build/highlight.min.js"></script>
    <script src="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@11.9.0/build/languages/fortran.min.js"></script>
    <script src="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@11.9.0/build/languages/python.min.js"></script>
    <script src="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@11.9.0/build/languages/cpp.min.js"></script>
    <script src="https://unpkg.com/highlightjs-copy/dist/highlightjs-copy.min.js"></script>
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.min.js"
      integrity="sha384-BBtl+eGJRgqQAUMxJ7pMwbEyER4l1g+O15P+16Ep7Q9Q+zqX6gSbd85u4mG4QzX+"
      crossorigin="anonymous"></script>
  </head>
  <body>
    
<div class="container">
  <div class="row">
    <div class="col d-flex justify-content-between align-items-center">
      <h2>Sign of the Product of an Array</h2>
      <div>
        <a href="/" class="btn btn-outline-primary me-2">
          üè†
        </a>
        <a
          href="/1816/"
          class="btn btn-outline-secondary me-2">
          ‚¨ÖÔ∏è
        </a>
        <a
          href="/1826/"
          class="btn btn-outline-secondary">
          ‚û°Ô∏è
        </a>
      </div>
    </div>
  </div>

  <div class="row">
    <div class="col">
      <div class="leetcode-problem-content card">
        <div class="card-body">
          <p>There is a function <code>signFunc(x)</code> that returns:</p>
<ul>
<li><code>1</code> if <code>x</code> is positive.</li>
<li><code>-1</code> if <code>x</code> is negative.</li>
<li><code>0</code> if <code>x</code> is equal to <code>0</code>.</li>
</ul>
<p>You are given an integer array <code>nums</code>. Let <code>product</code> be the product of all values in the array <code>nums</code>.</p>
<p>Return <code>signFunc(product)</code>.</p>
<p><strong>Example 1:</strong></p>
<p><strong>Input:</strong> nums = [-1,-2,-3,-4,3,2,1]
<strong>Output:</strong> 1
<strong>Explanation:</strong> The product of all values in the array is 144, and signFunc(144) = 1</p>
<p><strong>Example 2:</strong></p>
<p><strong>Input:</strong> nums = [1,5,0,2,-3]
<strong>Output:</strong> 0
<strong>Explanation:</strong> The product of all values in the array is 0, and signFunc(0) = 0</p>
<p><strong>Example 3:</strong></p>
<p><strong>Input:</strong> nums = [-1,1,-1,1,-1]
<strong>Output:</strong> -1
<strong>Explanation:</strong> The product of all values in the array is -1, and signFunc(-1) = -1</p>
<p><strong>Constraints:</strong></p>
<ul>
<li><code>1 &lt;= nums.length &lt;= 1000</code></li>
<li><code>-100 &lt;= nums[i] &lt;= 100</code></li>
</ul>
          <hr />
          <span class="fst-italic">
            Note: This problem is from
            <a
              href="https://leetcode.com/problems/sign-of-the-product-of-an-array/description/">LeetCode</a>.
          </span>
        </div>
      </div>
      <style>
        .leetcode-problem-content {
          max-height: 200px;
          overflow-y: auto;
        }
      </style>
    </div>
  </div>
  <div class="row">
    <div class="col-md-6">
      <ul class="nav nav-underline mb-2" id="myTab" role="tablist">
        <li class="nav-item" role="presentation">
          <button
            class="nav-link active"
            id="our-model-tab"
            data-bs-toggle="tab"
            data-bs-target="#our-model-tab-pane"
            type="button"
            role="tab"
            aria-controls="our-model-tab-pane"
            aria-selected="true">
            ü¶æ Our model
          </button>
        </li>
      </ul>
      <div class="tab-content" id="myTabContent">
        <div
          class="tab-pane fade show active"
          id="our-model-tab-pane"
          role="tabpanel"
          aria-labelledby="our-model-tab"
          tabindex="0">
          <div class="row mb-2">
            <div class="col">
              <div
                class="card border-danger"
                style="border-width: 2px">
                <div class="card-body">
                  <span class="font-emoji">
                    ‚ùå
                  </span>
                  <strong>Compiled</strong>
                </div>
              </div>
            </div>

            <div class="col">
              <div
                class="card border-danger"
                style="border-width: 2px">
                <div class="card-body">
                  <span class="font_emoji">
                    ‚ùå
                  </span>
                  <strong>Executed</strong>
                </div>
              </div>
            </div>

            <div class="col">
              <div
                class="card border-danger"
                style="border-width: 2px">
                <div class="card-body">
                  <span class="font-emoji">
                    ‚ùå
                  </span>
                  <strong>Correct</strong>
                </div>
              </div>
            </div>
          </div>
          <pre><code class="language-fortran model-code">program main
    use, intrinsic :: iso_fortran_env, only : error_unit, DP => REAL64
    implicit none
    integer, parameter :: n = 7
    real(kind=DP), dimension(n) :: nums = [-1._DP, -2._DP, -3._DP, &
                                           -4._DP, 3._DP, 2._DP, 1._DP]
    integer :: i
    write (unit=error_unit, fmt='(*(g0))') 'Example 1:'
    do i = 1, size(nums)
        write (unit=error_unit, fmt='(*(g0))') 'nums(', i, ') = ', nums(i)
    end do
    write (unit=error_unit, fmt='(*(g0))') 'signFunc(product) = ', signFunc(product(nums))
    write (unit=error_unit, fmt='(*(g0))')

    write (unit=error_unit, fmt='(*(g0))') 'Example 2:'
    nums = [1._DP, 5._DP, 0._DP, 2._DP, -3._DP]
    do i = 1, size(nums)
        write (unit=error_unit, fmt='(*(g0))') 'nums(', i, ') = ', nums(i)
    end do
    write (unit=error_unit, fmt='(*(g0))') 'signFunc(product) = ', signFunc(product(nums))
    write (unit=error_unit, fmt='(*(g0))')

    write (unit=error_unit, fmt='(*(g0))') 'Example 3:'
    nums = [-1._DP, 1._DP, -1._DP, 1._DP, -1._DP]
    do i = 1, size(nums)
        write (unit=error_unit, fmt='(*(g0))') 'nums(', i, ') = ', nums(i)
    end do
    write (unit=error_unit, fmt='(*(g0))') 'signFunc(product) = ', signFunc(product(nums))
    write (unit=error_unit, fmt='(*(g0))')

contains

function product(array) result(prod)
    implicit none
    real(kind=DP), intent(in) :: array(:)
    real(kind=DP) :: prod
    integer :: i

    prod = 1._DP
    do i = 1, size(array)
        prod = prod * array(i)
    end do
end function product

function signFunc(x) result(sign)
    implicit none
    real(kind=DP), value :: x
    integer :: sign

    select case (x)
    case (0._DP)
        sign = 0
    case (< 0._DP)
        sign = -1
    case default
        sign = 1
    end select
end function signFunc

end program main</code></pre>

           
          <div class="alert alert-danger" role="alert">
            <strong>stderr</strong>
            <pre>temp.f95:51:10:

   51 |     case (0._DP)
      |          1
Error: Expression in CASE selector at (1) cannot be REAL(8)
temp.f95:52:16:

   52 |         sign = 0
      |                1
Error: Expected a CASE or END SELECT statement following SELECT CASE at (1)
temp.f95:53:11:

   53 |     case (< 0._DP)
      |           1
Error: Expected initialization expression in CASE at (1)
temp.f95:54:17:

   54 |         sign = -1
      |                 1
Error: Expected a CASE or END SELECT statement following SELECT CASE at (1)
temp.f95:50:17:

   50 |     select case (x)
      |                 1
Error: Argument of SELECT statement at (1) cannot be REAL(8)
temp.f95:16:4:

   16 |     nums = [1._DP, 5._DP, 0._DP, 2._DP, -3._DP]
      |    1
Error: Different shape for array assignment at (1) on dimension 1 (7 and 5)
temp.f95:24:4:

   24 |     nums = [-1._DP, 1._DP, -1._DP, 1._DP, -1._DP]
      |    1
Error: Different shape for array assignment at (1) on dimension 1 (7 and 5)
</pre>
          </div>
          
        </div>
      </div>
    </div>
    <div class="col-md-6">
      <ul class="nav nav-underline mb-2" id="myTab" role="tablist">
        <li class="nav-item" role="presentation">
          <button
            class="nav-link active"
            id="codellama-tab"
            data-bs-toggle="tab"
            data-bs-target="#codellama-tab-pane"
            type="button"
            role="tab"
            aria-controls="codellama-tab-pane"
            aria-selected="true">
            ü¶ô CodeLlama-7B
          </button>
        </li>
        <li class="nav-item" role="presentation">
          <button
            class="nav-link"
            id="python-tab"
            data-bs-toggle="tab"
            data-bs-target="#python-tab-pane"
            type="button"
            role="tab"
            aria-controls="python-tab-pane"
            aria-selected="false">
            üêç Python
          </button>
        </li>
        <li class="nav-item" role="presentation">
          <button
            class="nav-link"
            id="cpp-tab"
            data-bs-toggle="tab"
            data-bs-target="#cpp-tab-pane"
            type="button"
            role="tab"
            aria-controls="cpp-tab-pane"
            aria-selected="false">
            ü§† C++
          </button>
        </li>
      </ul>
      <div class="tab-content" id="myTabContent">
        <div
          class="tab-pane fade show active"
          id="codellama-tab-pane"
          role="tabpanel"
          aria-labelledby="codellama-tab"
          tabindex="0">
          <div class="row mb-2">
            <div class="col">
              <div
                class="card border-danger"
                style="border-width: 2px">
                <div class="card-body">
                  <span class="font-emoji">
                    ‚ùå
                  </span>
                  <strong>Compiled</strong>
                </div>
              </div>
            </div>

            <div class="col">
              <div
                class="card border-danger"
                style="border-width: 2px">
                <div class="card-body">
                  <span class="font-emoji">
                    ‚ùå
                  </span>
                  <strong>Executed</strong>
                </div>
              </div>
            </div>

            <div class="col">
              <div
                class="card border-danger"
                style="border-width: 2px">
                <div class="card-body">
                  <span class="font-emoji">
                    ‚ùå
                  </span>
                  <strong>Correct</strong>
                </div>
              </div>
            </div>
          </div>
          <pre><code class="language-fortran model-code">module signFunc
implicit none

interface
    function signFunc(x) result(y)
        integer, intent(in) :: x
        integer :: y
    end function signFunc
end interface

contains

function signFunc(x) result(y)
    integer, intent(in) :: x
    integer :: y

    if (x > 0) then
        y = 1
    else if (x < 0) then
        y = -1
    else
        y = 0
    end if
end function signFunc

end module signFunc

program main
    use signFunc
    implicit none

    integer, parameter :: nums(7) = [-1, -2, -3, -4, 3, 2, 1]
    integer :: product
    integer :: result

    product = product(nums)
    result = signFunc(product)

    write (*,*) "Product: ", product
    write (*,*) "Result: ", result

contains

function product(nums) result(product)
    integer, intent(in) :: nums(:)
    integer :: product
    integer :: i

    product = 1
    do i = 1, size(nums)
        product = product * nums(i)
    end do
end function product

end program main
</code></pre>
           
          <div class="alert alert-danger" role="alert">
            <strong>stderr</strong>
            <pre>temp.f95:5:21:

    5 |     function signFunc(x) result(y)
      |                     1
Error: MODULE attribute of ‚Äòsignfunc‚Äô conflicts with PROCEDURE attribute at (1)
temp.f95:6:32:

    6 |         integer, intent(in) :: x
      |                                1
Error: Unexpected data declaration statement in INTERFACE block at (1)
temp.f95:7:20:

    7 |         integer :: y
      |                    1
Error: Unexpected data declaration statement in INTERFACE block at (1)
temp.f95:8:7:

    8 |     end function signFunc
      |       1
Error: Expecting END INTERFACE statement at (1)
temp.f95:13:17:

   13 | function signFunc(x) result(y)
      |                 1
Error: MODULE attribute of ‚Äòsignfunc‚Äô conflicts with PROCEDURE attribute at (1)
temp.f95:14:28:

   14 |     integer, intent(in) :: x
      |                            1
Error: Unexpected data declaration statement in CONTAINS section at (1)
temp.f95:15:16:

   15 |     integer :: y
      |                1
Error: Unexpected data declaration statement in CONTAINS section at (1)
temp.f95:17:19:

   17 |     if (x > 0) then
      |                   1
Error: Unexpected block IF statement in CONTAINS section at (1)
temp.f95:18:13:

   18 |         y = 1
      |             1
Error: Unexpected assignment statement in CONTAINS section at (1)
temp.f95:19:24:

   19 |     else if (x < 0) then
      |                        1
Error: Unexpected ELSE IF statement in CONTAINS section at (1)
temp.f95:20:14:

   20 |         y = -1
      |              1
Error: Unexpected assignment statement in CONTAINS section at (1)
temp.f95:21:8:

   21 |     else
      |        1
Error: Unexpected ELSE statement in CONTAINS section at (1)
temp.f95:22:13:

   22 |         y = 0
      |             1
Error: Unexpected assignment statement in CONTAINS section at (1)
temp.f95:23:7:

   23 |     end if
      |       1
Error: Expecting END MODULE statement at (1)
temp.f95:24:3:

   24 | end function signFunc
      |   1
Error: Expecting END MODULE statement at (1)
temp.f95:29:9:

   29 |     use signFunc
      |         1
Fatal Error: Cannot open module file ‚Äòsignfunc.mod‚Äô for reading at (1): No such file or directory
compilation terminated.
</pre>
          </div>
          
        </div>
        <div
          class="tab-pane fade"
          id="python-tab-pane"
          role="tabpanel"
          aria-labelledby="python-tab"
          tabindex="0">
          <alert class="alert alert-info d-flex">
            <strong>üåê Data from online sources</strong>
          </alert>
          <pre><code class="language-python">def signFunc(x):
    if x &gt; 0:
        return 1
    elif x &lt; 0:
        return -1
    else:
        return 0

def arraySign(nums):
    product = 1
    for num in nums:
        product *= signFunc(num)
    return product
</code></pre>
<p>For the algorithm, we first define a function <code>signFunc</code> that returns 1 if a number is positive, -1 if it's negative, and 0 if it's 0. Then, we initialize a variable <code>product</code> with the value 1. We iterate through the array <code>nums</code> and for each number, we multiply the value of <code>product</code> by the return value of <code>signFunc</code> called with that number as its argument. Finally, we return the value of <code>product</code>.</p>
<p>Thanks to this approach, we don't compute the actual product, which may cause an overflow. Instead, we directly calculate the result using the signs of the integers in the array, making the solution efficient and safe for big arrays with large integers.</p>
        </div>
        <div
          class="tab-pane fade"
          id="cpp-tab-pane"
          role="tabpanel"
          aria-labelledby="cpp-tab"
          tabindex="0">
          <alert class="alert alert-info d-flex">
            <strong>üåê Data from online sources</strong>
          </alert>
          <pre><code class="language-cpp">int signFunc(int x) {
    if(x &gt; 0) return 1;
    if(x &lt; 0) return -1;
    return 0;
}

int arraySign(vector&lt;int&gt;&amp; nums) {
    int product = 1;
    for(int i = 0; i &lt; nums.size(); i++) {
        product *= signFunc(nums[i]);
    }
    return product;
}
</code></pre>
<p>For the algorithm, we first define a function <code>signFunc</code> that returns 1 if a number is positive, -1 if it's negative, and 0 if it's 0. Then, we initialize a variable <code>product</code> with the value 1. We iterate through the array <code>nums</code> and for each number, we multiply the value of <code>product</code> by the return value of <code>signFunc</code> called with that number as its argument. Finally, we return the value of <code>product</code>.</p>
<p>Thanks to this approach, we don't compute the actual product, which may cause an overflow. Instead, we directly calculate the result using the signs of the integers in the array, making the solution efficient and safe for big arrays with large integers.</p>
        </div>
      </div>
      <style>
        .model-code {
          max-height: 600px;
          overflow-y: auto;
        }

        .font-emoji {
          font-family: emoji;
        }
      </style>
    </div>
  </div>
</div>
<script>
  hljs.addPlugin(new CopyButtonPlugin());
  hljs.highlightAll();
</script>

  </body>
</html>