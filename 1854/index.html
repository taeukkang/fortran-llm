<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Fine-tuning CodeLlama-7B for Fortran Code Generation</title>
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/5.3.3/zephyr/bootstrap.min.css"
      integrity="sha512-CWXb9sx63+REyEBV/cte+dE1hSsYpJifb57KkqAXjsN3gZQt6phZt7e5RhgZrUbaNfCdtdpcqDZtuTEB+D3q2Q=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer" />
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@11.9.0/build/styles/atom-one-dark.min.css" />
    <link
      rel="stylesheet"
      href="https://unpkg.com/highlightjs-copy/dist/highlightjs-copy.min.css" />
    <script src="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@11.9.0/build/highlight.min.js"></script>
    <script src="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@11.9.0/build/languages/fortran.min.js"></script>
    <script src="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@11.9.0/build/languages/python.min.js"></script>
    <script src="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@11.9.0/build/languages/cpp.min.js"></script>
    <script src="https://unpkg.com/highlightjs-copy/dist/highlightjs-copy.min.js"></script>
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.min.js"
      integrity="sha384-BBtl+eGJRgqQAUMxJ7pMwbEyER4l1g+O15P+16Ep7Q9Q+zqX6gSbd85u4mG4QzX+"
      crossorigin="anonymous"></script>
  </head>
  <body>
    
<div class="container">
  <div class="row">
    <div class="col d-flex justify-content-between align-items-center">
      <h2>Maximum Population Year</h2>
      <div>
        <a href="/fortran-llm/" class="btn btn-outline-primary me-2">
          üè†
        </a>
        <a
          href="/fortran-llm/1848/"
          class="btn btn-outline-secondary me-2">
          ‚¨ÖÔ∏è
        </a>
        <a
          href="/fortran-llm/1859/"
          class="btn btn-outline-secondary">
          ‚û°Ô∏è
        </a>
      </div>
    </div>
  </div>

  <div class="row">
    <div class="col">
      <div class="leetcode-problem-content card">
        <div class="card-body">
          <p>You are given a 2D integer array <code>logs</code> where each <code>logs[i] = [birthi, deathi]</code> indicates the birth and death years of the <code>ith</code> person.</p>
<p>The <strong>population</strong> of some year <code>x</code> is the number of people alive during that year. The <code>ith</code> person is counted in year <code>x</code>'s population if <code>x</code> is in the <strong>inclusive</strong> range <code>[birthi, deathi - 1]</code>. Note that the person is <strong>not</strong> counted in the year that they die.</p>
<p>Return <em>the <strong>earliest</strong> year with the <strong>maximum population</strong></em>.</p>
<p><strong>Example 1:</strong></p>
<p><strong>Input:</strong> logs = [[1993,1999],[2000,2010]]
<strong>Output:</strong> 1993
<strong>Explanation:</strong> The maximum population is 1, and 1993 is the earliest year with this population.</p>
<p><strong>Example 2:</strong></p>
<p><strong>Input:</strong> logs = [[1950,1961],[1960,1971],[1970,1981]]
<strong>Output:</strong> 1960
<strong>Explanation:</strong> 
The maximum population is 2, and it had happened in years 1960 and 1970.
The earlier year between them is 1960.</p>
<p><strong>Constraints:</strong></p>
<ul>
<li><code>1 &lt;= logs.length &lt;= 100</code></li>
<li><code>1950 &lt;= birthi &lt; deathi &lt;= 2050</code></li>
</ul>
          <hr />
          <span class="fst-italic">
            Note: This problem is from
            <a
              href="https://leetcode.com/problems/maximum-population-year/description/">LeetCode</a>.
          </span>
        </div>
      </div>
      <style>
        .leetcode-problem-content {
          max-height: 200px;
          overflow-y: auto;
        }
      </style>
    </div>
  </div>
  <div class="row">
    <div class="col-md-6">
      <ul class="nav nav-underline mb-2" id="myTab" role="tablist">
        <li class="nav-item" role="presentation">
          <button
            class="nav-link active"
            id="our-model-tab"
            data-bs-toggle="tab"
            data-bs-target="#our-model-tab-pane"
            type="button"
            role="tab"
            aria-controls="our-model-tab-pane"
            aria-selected="true">
            ü¶æ Our model
          </button>
        </li>
      </ul>
      <div class="tab-content" id="myTabContent">
        <div
          class="tab-pane fade show active"
          id="our-model-tab-pane"
          role="tabpanel"
          aria-labelledby="our-model-tab"
          tabindex="0">
          <div class="row mb-2">
            <div class="col">
              <div
                class="card border-danger"
                style="border-width: 2px">
                <div class="card-body">
                  <span class="font-emoji">
                    ‚ùå
                  </span>
                  <strong>Compiled</strong>
                </div>
              </div>
            </div>

            <div class="col">
              <div
                class="card border-danger"
                style="border-width: 2px">
                <div class="card-body">
                  <span class="font_emoji">
                    ‚ùå
                  </span>
                  <strong>Executed</strong>
                </div>
              </div>
            </div>

            <div class="col">
              <div
                class="card border-danger"
                style="border-width: 2px">
                <div class="card-body">
                  <span class="font-emoji">
                    ‚ùå
                  </span>
                  <strong>Correct</strong>
                </div>
              </div>
            </div>
          </div>
          <pre><code class="language-fortran model-code">program main
    implicit none

    integer, parameter :: dp = selected_real_kind(15)

    integer, dimension(:), allocatable :: logs
    integer :: n, i, j, k, m, max_pop, min_year, max_year, pop
    logical :: found

    ! read input
    read(*,*) n
    allocate(logs(n))
    do i = 1, n
        read(*,*) logs(i)%birth, logs(i)%death
    end do

    ! sort by birth year
    call sort(logs)

    ! find earliest year with maximum population
    max_pop = 0
    min_year = huge(min_year)
    max_year = -huge(max_year)
    do i = 1, n
        pop = 0
        found = .false.
        do j = 1, n
            if (logs(j)%birth >= logs(i)%birth .and. &
                logs(j)%death <= logs(i)%death) then
                pop = pop + 1
                found = .true.
            end if
        end do
        if (found) then
            if (pop > max_pop) then
                max_pop = pop
                min_year = logs(i)%birth
                max_year = logs(i)%death
            else if (pop == max_pop) then
                if (logs(i)%birth < min_year) then
                    min_year = logs(i)%birth
                end if
                if (logs(i)%death > max_year) then
                    max_year = logs(i)%death
                end if
            end if
        end if
    end do

    write(*,'(I0)') min_year

contains

    subroutine sort(arr)
        implicit none
        integer, dimension(:), intent(inout) :: arr
        integer :: i, j, temp

        do i = 1, size(arr)-1
            do j = i+1, size(arr)
                if (arr(i)%birth > arr(j)%birth) then
                    temp = arr(i)%birth
                    arr(i)%birth = arr(j)%birth
                    arr(j)%birth = temp
                    temp = arr(i)%death
                    arr(i)%death = arr(j)%death
                    arr(j)%death = temp
                end if
            end do
        end do
    end subroutine sort

end program main</code></pre>

           
          <div class="alert alert-danger" role="alert">
            <strong>stderr</strong>
            <pre>temp.f95:14:27:

   14 |         read(*,*) logs(i)%birth, logs(i)%death
      |                           1
Error: Unexpected ‚Äò%‚Äô for nonderived-type variable ‚Äòlogs‚Äô at (1)
temp.f95:28:25:

   28 |             if (logs(j)%birth >= logs(i)%birth .and. &
      |                         1
Error: Unexpected ‚Äò%‚Äô for nonderived-type variable ‚Äòlogs‚Äô at (1)
temp.f95:32:15:

   32 |             end if
      |               1
Error: Expecting END DO statement at (1)
temp.f95:37:36:

   37 |                 min_year = logs(i)%birth
      |                                    1
Error: Unexpected ‚Äò%‚Äô for nonderived-type variable ‚Äòlogs‚Äô at (1)
temp.f95:38:36:

   38 |                 max_year = logs(i)%death
      |                                    1
Error: Unexpected ‚Äò%‚Äô for nonderived-type variable ‚Äòlogs‚Äô at (1)
temp.f95:40:29:

   40 |                 if (logs(i)%birth < min_year) then
      |                             1
Error: Unexpected ‚Äò%‚Äô for nonderived-type variable ‚Äòlogs‚Äô at (1)
temp.f95:41:40:

   41 |                     min_year = logs(i)%birth
      |                                        1
Error: Unexpected ‚Äò%‚Äô for nonderived-type variable ‚Äòlogs‚Äô at (1)
temp.f95:43:29:

   43 |                 if (logs(i)%death > max_year) then
      |                             1
Error: Unexpected ‚Äò%‚Äô for nonderived-type variable ‚Äòlogs‚Äô at (1)
temp.f95:44:40:

   44 |                     max_year = logs(i)%death
      |                                        1
Error: Unexpected ‚Äò%‚Äô for nonderived-type variable ‚Äòlogs‚Äô at (1)
temp.f95:46:15:

   46 |             end if
      |               1
Error: Expecting END DO statement at (1)
temp.f95:47:11:

   47 |         end if
      |           1
Error: Expecting END DO statement at (1)
temp.f95:61:28:

   61 |                 if (arr(i)%birth > arr(j)%birth) then
      |                            1
Error: Unexpected ‚Äò%‚Äô for nonderived-type variable ‚Äòarr‚Äô at (1)
temp.f95:62:35:

   62 |                     temp = arr(i)%birth
      |                                   1
Error: Unexpected ‚Äò%‚Äô for nonderived-type variable ‚Äòarr‚Äô at (1)
temp.f95:63:28:

   63 |                     arr(i)%birth = arr(j)%birth
      |                            1
Error: Unexpected ‚Äò%‚Äô for nonderived-type variable ‚Äòarr‚Äô at (1)
temp.f95:64:28:

   64 |                     arr(j)%birth = temp
      |                            1
Error: Unexpected ‚Äò%‚Äô for nonderived-type variable ‚Äòarr‚Äô at (1)
temp.f95:65:35:

   65 |                     temp = arr(i)%death
      |                                   1
Error: Unexpected ‚Äò%‚Äô for nonderived-type variable ‚Äòarr‚Äô at (1)
temp.f95:66:28:

   66 |                     arr(i)%death = arr(j)%death
      |                            1
Error: Unexpected ‚Äò%‚Äô for nonderived-type variable ‚Äòarr‚Äô at (1)
temp.f95:67:28:

   67 |                     arr(j)%death = temp
      |                            1
Error: Unexpected ‚Äò%‚Äô for nonderived-type variable ‚Äòarr‚Äô at (1)
temp.f95:68:19:

   68 |                 end if
      |                   1
Error: Expecting END DO statement at (1)
</pre>
          </div>
          
        </div>
      </div>
    </div>
    <div class="col-md-6">
      <ul class="nav nav-underline mb-2" id="myTab" role="tablist">
        <li class="nav-item" role="presentation">
          <button
            class="nav-link active"
            id="codellama-tab"
            data-bs-toggle="tab"
            data-bs-target="#codellama-tab-pane"
            type="button"
            role="tab"
            aria-controls="codellama-tab-pane"
            aria-selected="true">
            ü¶ô CodeLlama-7B
          </button>
        </li>
        <li class="nav-item" role="presentation">
          <button
            class="nav-link"
            id="python-tab"
            data-bs-toggle="tab"
            data-bs-target="#python-tab-pane"
            type="button"
            role="tab"
            aria-controls="python-tab-pane"
            aria-selected="false">
            üêç Python
          </button>
        </li>
        <li class="nav-item" role="presentation">
          <button
            class="nav-link"
            id="cpp-tab"
            data-bs-toggle="tab"
            data-bs-target="#cpp-tab-pane"
            type="button"
            role="tab"
            aria-controls="cpp-tab-pane"
            aria-selected="false">
            ü§† C++
          </button>
        </li>
      </ul>
      <div class="tab-content" id="myTabContent">
        <div
          class="tab-pane fade show active"
          id="codellama-tab-pane"
          role="tabpanel"
          aria-labelledby="codellama-tab"
          tabindex="0">
          <div class="row mb-2">
            <div class="col">
              <div
                class="card border-danger"
                style="border-width: 2px">
                <div class="card-body">
                  <span class="font-emoji">
                    ‚ùå
                  </span>
                  <strong>Compiled</strong>
                </div>
              </div>
            </div>

            <div class="col">
              <div
                class="card border-danger"
                style="border-width: 2px">
                <div class="card-body">
                  <span class="font-emoji">
                    ‚ùå
                  </span>
                  <strong>Executed</strong>
                </div>
              </div>
            </div>

            <div class="col">
              <div
                class="card border-danger"
                style="border-width: 2px">
                <div class="card-body">
                  <span class="font-emoji">
                    ‚ùå
                  </span>
                  <strong>Correct</strong>
                </div>
              </div>
            </div>
          </div>
          <pre><code class="language-fortran model-code">module PopulationCounter
contains
    function get_earliest_year_with_max_population(logs) result(earliest_year)
        integer, intent(in) :: logs(:, :)
        integer :: birth(size(logs, 1)), death(size(logs, 1)), population(0:2050)
        integer :: i, j, max_population, earliest_year

        ! Initialize the birth and death years
        do i = 1, size(logs, 1)
            birth(i) = logs(i, 1)
            death(i) = logs(i, 2)
        end do

        ! Initialize the population array
        population = 0

        ! Loop through each year and increment the population
        do i = 1950, 2050
            do j = 1, size(logs, 1)
                if (i >= birth(j) .and. i <= death(j)) then
                    population(i) = population(i) + 1
                end if
            end do
        end do

        ! Find the earliest year with the maximum population
        max_population = maxval(population)
        earliest_year = minval(pack((/ (i, i = 1950, 2050) /), population == max_population))
    end function get_earliest_year_with_max_population
end module PopulationCounter

! Test the function with the given examples
program test_population_counter
    use PopulationCounter
    implicit none
    integer, parameter :: logs(2, 2) = reshape([1993, 1999, 2000, 2010], shape(logs))
    integer, parameter :: expected_earliest_year = 1993
    integer :: earliest_year

    earliest_year = get_earliest_year_with_max_population(logs)

    if (earliest_year == expected_earliest_year) then
        print *, "Test 1: Passed"
    else
        print *, "Test 1: Failed"
    end if

    integer, parameter :: logs2(3, 2) = reshape([1950, 1961, 1960, 1971, 1970, 1981], shape(logs2))
    integer, parameter :: expected_earliest_year2 = 1960
    earliest_year = get_earliest_year_with_max_population(logs2)

    if (earliest_year == expected_earliest_year2) then
        print *, "Test 2: Passed"
    else
        print *, "Test 2: Failed"
    end if
end program test_population_counter
</code></pre>
           
          <div class="alert alert-danger" role="alert">
            <strong>stderr</strong>
            <pre>temp.f95:28:36:

   28 |         earliest_year = minval(pack((/ (i, i = 1950, 2050) /), population == max_population))
      |                                    1
Error: Different shape for arguments 'array' and 'mask' for intrinsic 'pack' at (1) on dimension 1 (101 and 2051)
temp.f95:34:9:

   34 |     use PopulationCounter
      |         1
Fatal Error: Cannot open module file ‚Äòpopulationcounter.mod‚Äô for reading at (1): No such file or directory
compilation terminated.
</pre>
          </div>
          
        </div>
        <div
          class="tab-pane fade"
          id="python-tab-pane"
          role="tabpanel"
          aria-labelledby="python-tab"
          tabindex="0">
          <alert class="alert alert-info d-flex">
            <strong>üåê Data from online sources</strong>
          </alert>
          <pre><code class="language-python">def maxAliveYear(logs):
    years = [0] * 101
    for log in logs:
        years[log[0] - 1950] += 1
        years[log[1] - 1950] -= 1
    max_population = years[0]
    max_year = 1950
    for i in range(1, 101):
        years[i] += years[i - 1]
        if years[i] &gt; max_population:
            max_population = years[i]
            max_year = i + 1950
    return max_year
</code></pre>
<p>The algorithm iterates through the logs and increments the birth year and decrements the death year in the years array. Then, starting from the first year, it accumulates the population for each year by summing up the previous year's population with the current year's population. After that, it checks which year has the maximum population and returns that year.</p>
        </div>
        <div
          class="tab-pane fade"
          id="cpp-tab-pane"
          role="tabpanel"
          aria-labelledby="cpp-tab"
          tabindex="0">
          <alert class="alert alert-info d-flex">
            <strong>üåê Data from online sources</strong>
          </alert>
          <pre><code class="language-cpp">int maxAliveYear(vector&lt;vector&lt;int&gt;&gt;&amp; logs) {
    vector&lt;int&gt; years(101, 0);
    for (vector&lt;int&gt; log : logs) {
        years[log[0] - 1950]++;
        years[log[1] - 1950]--;
    }
    int max_population = years[0];
    int max_year = 1950;
    for (int i = 1; i &lt; 101; i++) {
        years[i] += years[i - 1];
        if (years[i] &gt; max_population) {
            max_population = years[i];
            max_year = i + 1950;
        }
    }
    return max_year;
}
</code></pre>
<p>The algorithm iterates through the logs and increments the birth year and decrements the death year in the years array. Then, starting from the first year, it accumulates the population for each year by summing up the previous year's population with the current year's population. After that, it checks which year has the maximum population and returns that year.</p>
        </div>
      </div>
      <style>
        .model-code {
          max-height: 600px;
          overflow-y: auto;
        }

        .font-emoji {
          font-family: emoji;
        }
      </style>
    </div>
  </div>
</div>
<script>
  hljs.addPlugin(new CopyButtonPlugin());
  hljs.highlightAll();
</script>

  </body>
</html>