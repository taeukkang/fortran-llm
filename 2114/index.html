<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Fine-tuning CodeLlama-7B for Fortran Code Generation</title>
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/5.3.3/zephyr/bootstrap.min.css"
      integrity="sha512-CWXb9sx63+REyEBV/cte+dE1hSsYpJifb57KkqAXjsN3gZQt6phZt7e5RhgZrUbaNfCdtdpcqDZtuTEB+D3q2Q=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer" />
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@11.9.0/build/styles/atom-one-dark.min.css" />
    <link
      rel="stylesheet"
      href="https://unpkg.com/highlightjs-copy/dist/highlightjs-copy.min.css" />
    <script src="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@11.9.0/build/highlight.min.js"></script>
    <script src="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@11.9.0/build/languages/fortran.min.js"></script>
    <script src="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@11.9.0/build/languages/python.min.js"></script>
    <script src="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@11.9.0/build/languages/cpp.min.js"></script>
    <script src="https://unpkg.com/highlightjs-copy/dist/highlightjs-copy.min.js"></script>
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.min.js"
      integrity="sha384-BBtl+eGJRgqQAUMxJ7pMwbEyER4l1g+O15P+16Ep7Q9Q+zqX6gSbd85u4mG4QzX+"
      crossorigin="anonymous"></script>
  </head>
  <body>
    
<div class="container">
  <div class="row">
    <div class="col d-flex justify-content-between align-items-center">
      <h2>Maximum Number of Words Found in Sentences</h2>
      <div>
        <a href="/fortran-llm/" class="btn btn-outline-primary me-2">
          üè†
        </a>
        <a
          href="/fortran-llm/2108/"
          class="btn btn-outline-secondary me-2">
          ‚¨ÖÔ∏è
        </a>
        <a
          href="/fortran-llm/2119/"
          class="btn btn-outline-secondary">
          ‚û°Ô∏è
        </a>
      </div>
    </div>
  </div>

  <div class="row">
    <div class="col">
      <div class="leetcode-problem-content card">
        <div class="card-body">
          <p>A <strong>sentence</strong> is a list of <strong>words</strong> that are separated by a single space with no leading or trailing spaces.</p>
<p>You are given an array of strings <code>sentences</code>, where each <code>sentences[i]</code> represents a single <strong>sentence</strong>.</p>
<p>Return <em>the <strong>maximum number of words</strong> that appear in a single sentence</em>.</p>
<p><strong>Example 1:</strong></p>
<p><strong>Input:</strong> sentences = [ "alice and bob love leetcode ",  "i think so too ",  "this is great thanks very much "]
<strong>Output:</strong> 6
<strong>Explanation:</strong> 
- The first sentence,  "alice and bob love leetcode ", has 5 words in total.
- The second sentence,  "i think so too ", has 4 words in total.
- The third sentence,  "this is great thanks very much ", has 6 words in total.
Thus, the maximum number of words in a single sentence comes from the third sentence, which has 6 words.</p>
<p><strong>Example 2:</strong></p>
<p><strong>Input:</strong> sentences = [ "please wait ",  "continue to fight ",  "continue to win "]
<strong>Output:</strong> 3
<strong>Explanation:</strong> It is possible that multiple sentences contain the same number of words. 
In this example, the second and third sentences (underlined) have the same number of words.</p>
<p><strong>Constraints:</strong></p>
<ul>
<li><code>1 &lt;= sentences.length &lt;= 100</code></li>
<li><code>1 &lt;= sentences[i].length &lt;= 100</code></li>
<li><code>sentences[i]</code> consists only of lowercase English letters and <code>' '</code> only.</li>
<li><code>sentences[i]</code> does not have leading or trailing spaces.</li>
<li>All the words in <code>sentences[i]</code> are separated by a single space.</li>
</ul>
          <hr />
          <span class="fst-italic">
            Note: This problem is from
            <a
              href="https://leetcode.com/problems/maximum-number-of-words-found-in-sentences/description/">LeetCode</a>.
          </span>
        </div>
      </div>
      <style>
        .leetcode-problem-content {
          max-height: 200px;
          overflow-y: auto;
        }
      </style>
    </div>
  </div>
  <div class="row">
    <div class="col-md-6">
      <ul class="nav nav-underline mb-2" id="myTab" role="tablist">
        <li class="nav-item" role="presentation">
          <button
            class="nav-link active"
            id="our-model-tab"
            data-bs-toggle="tab"
            data-bs-target="#our-model-tab-pane"
            type="button"
            role="tab"
            aria-controls="our-model-tab-pane"
            aria-selected="true">
            ü¶æ Our model
          </button>
        </li>
      </ul>
      <div class="tab-content" id="myTabContent">
        <div
          class="tab-pane fade show active"
          id="our-model-tab-pane"
          role="tabpanel"
          aria-labelledby="our-model-tab"
          tabindex="0">
          <div class="row mb-2">
            <div class="col">
              <div
                class="card border-danger"
                style="border-width: 2px">
                <div class="card-body">
                  <span class="font-emoji">
                    ‚ùå
                  </span>
                  <strong>Compiled</strong>
                </div>
              </div>
            </div>

            <div class="col">
              <div
                class="card border-danger"
                style="border-width: 2px">
                <div class="card-body">
                  <span class="font_emoji">
                    ‚ùå
                  </span>
                  <strong>Executed</strong>
                </div>
              </div>
            </div>

            <div class="col">
              <div
                class="card border-danger"
                style="border-width: 2px">
                <div class="card-body">
                  <span class="font-emoji">
                    ‚ùå
                  </span>
                  <strong>Correct</strong>
                </div>
              </div>
            </div>
          </div>
          <pre><code class="language-fortran model-code">program main
    implicit none

    integer :: i, j, n, m
    character(len=100), allocatable :: sentences(:)
    integer, allocatable :: counts(:)

    call get_examples()

contains

    subroutine get_examples()
        implicit none

        integer, parameter :: num_examples = 2
        character(len=100), parameter :: examples(num_examples, *) = reshape([character(len=100) :: &
            ["alice and bob love leetcode ", "i think so too ", "this is great thanks very much "], &
            ["please wait ", "continue to fight ", "continue to win "]], shape(examples))

        do i = 1, num_examples
            allocate(sentences(size(examples(i, :))))
            do j = 1, size(sentences)
                sentences(j) = examples(i, j)
            end do
            write(*, "(A)", advance="no") "Example #", i, ": "
            write(*, "(A)") solve(sentences)
        end do

    end subroutine get_examples

    function solve(sentences) result(max_words)
        implicit none
        character(len=*), intent(in) :: sentences(:)
        integer :: max_words

        integer :: i, n
        character(len=:), allocatable :: words(:)

        n = size(sentences)
        allocate(counts(n))

        do i = 1, n
            call split(sentences(i), words)
            counts(i) = size(words)
        end do

        max_words = maxval(counts)

    end function solve

    subroutine split(str, words)
        implicit none
        character(len=*), intent(in) :: str
        character(len=:), allocatable, intent(out) :: words(:)

        integer :: i, pos

        allocate(words(0))

        do while (str /= "")
            pos = index(str, " ")
            if (pos == 0) then
                words = [words, trim(str)]
                exit
            else
                words = [words, trim(str(:pos-1))]
                str = str(pos+1:)
            end if
        end do

    end subroutine split

end program main</code></pre>

           
          <div class="alert alert-danger" role="alert">
            <strong>stderr</strong>
            <pre>temp.f95:18:28:

   18 |             ["please wait ", "continue to fight ", "continue to win "]], shape(examples))
      |                            1
Error: Different CHARACTER lengths (12/18) in array constructor at (1)
temp.f95:21:49:

   21 |             allocate(sentences(size(examples(i, :))))
      |                                                 1
Error: Syntax error in argument list at (1)
temp.f95:58:17:

   58 |         allocate(words(0))
      |                 1
Error: Allocate-object at (1) with a deferred type parameter requires either a type-spec or SOURCE tag or a MOLD tag
temp.f95:67:16:

   67 |                 str = str(pos+1:)
      |                1
Error: Dummy argument ‚Äòstr‚Äô with INTENT(IN) in variable definition context (assignment) at (1)
temp.f95:23:31:

   23 |                 sentences(j) = examples(i, j)
      |                               1
Error: Function ‚Äòexamples‚Äô at (1) has no IMPLICIT type
</pre>
          </div>
          
        </div>
      </div>
    </div>
    <div class="col-md-6">
      <ul class="nav nav-underline mb-2" id="myTab" role="tablist">
        <li class="nav-item" role="presentation">
          <button
            class="nav-link active"
            id="codellama-tab"
            data-bs-toggle="tab"
            data-bs-target="#codellama-tab-pane"
            type="button"
            role="tab"
            aria-controls="codellama-tab-pane"
            aria-selected="true">
            ü¶ô CodeLlama-7B
          </button>
        </li>
        <li class="nav-item" role="presentation">
          <button
            class="nav-link"
            id="python-tab"
            data-bs-toggle="tab"
            data-bs-target="#python-tab-pane"
            type="button"
            role="tab"
            aria-controls="python-tab-pane"
            aria-selected="false">
            üêç Python
          </button>
        </li>
        <li class="nav-item" role="presentation">
          <button
            class="nav-link"
            id="cpp-tab"
            data-bs-toggle="tab"
            data-bs-target="#cpp-tab-pane"
            type="button"
            role="tab"
            aria-controls="cpp-tab-pane"
            aria-selected="false">
            ü§† C++
          </button>
        </li>
      </ul>
      <div class="tab-content" id="myTabContent">
        <div
          class="tab-pane fade show active"
          id="codellama-tab-pane"
          role="tabpanel"
          aria-labelledby="codellama-tab"
          tabindex="0">
          <div class="row mb-2">
            <div class="col">
              <div
                class="card border-danger"
                style="border-width: 2px">
                <div class="card-body">
                  <span class="font-emoji">
                    ‚ùå
                  </span>
                  <strong>Compiled</strong>
                </div>
              </div>
            </div>

            <div class="col">
              <div
                class="card border-danger"
                style="border-width: 2px">
                <div class="card-body">
                  <span class="font-emoji">
                    ‚ùå
                  </span>
                  <strong>Executed</strong>
                </div>
              </div>
            </div>

            <div class="col">
              <div
                class="card border-danger"
                style="border-width: 2px">
                <div class="card-body">
                  <span class="font-emoji">
                    ‚ùå
                  </span>
                  <strong>Correct</strong>
                </div>
              </div>
            </div>
          </div>
          <pre><code class="language-fortran model-code">module MaxWords
  implicit none
contains
  function max_words(sentences) result(max_words)
    character(len=*), intent(in) :: sentences(:)
    integer :: max_words, words
    integer :: i, j

    max_words = 0
    do i = 1, size(sentences)
      words = 0
      do j = 1, len_trim(sentences(i))
        if (sentences(i)(j:j) == ' ') then
          words = words + 1
        end if
      end do
      if (words > max_words) then
        max_words = words
      end if
    end do
  end function max_words
end module MaxWords

program test_max_words
  use MaxWords
  implicit none
  character(len=*), parameter :: sentences(3) = ["alice and bob love leetcode ", "i think so too ", "this is great thanks very much "]
  integer :: max_words

  max_words = max_words(sentences)
  write (*,*) "Max words:", max_words

  max_words = max_words(["please wait ", "continue to fight ", "continue to win "])
  write (*,*) "Max words:", max_words
end program test_max_words
</code></pre>
           
          <div class="alert alert-danger" role="alert">
            <strong>stderr</strong>
            <pre>temp.f95:4:49:

    4 |   function max_words(sentences) result(max_words)
      |                                                 1
Error: RESULT variable at (1) must be different than function name
temp.f95:5:48:

    5 |     character(len=*), intent(in) :: sentences(:)
      |                                                1
Error: Unexpected data declaration statement in CONTAINS section at (1)
temp.f95:6:25:

    6 |     integer :: max_words, words
      |                         1
Error: Symbol ‚Äòmax_words‚Äô at (1) has already been host associated
temp.f95:7:19:

    7 |     integer :: i, j
      |                   1
Error: Unexpected data declaration statement in CONTAINS section at (1)
temp.f95:9:14:

    9 |     max_words = 0
      |              1
Error: Symbol ‚Äòmax_words‚Äô at (1) has already been host associated
temp.f95:10:29:

   10 |     do i = 1, size(sentences)
      |                             1
Error: Unexpected DO statement in CONTAINS section at (1)
temp.f95:11:15:

   11 |       words = 0
      |               1
Error: Unexpected assignment statement in CONTAINS section at (1)
temp.f95:12:38:

   12 |       do j = 1, len_trim(sentences(i))
      |                                      1
Error: Unexpected DO statement in CONTAINS section at (1)
temp.f95:13:25:

   13 |         if (sentences(i)(j:j) == ' ') then
      |                         1
Error: Syntax error in IF-expression at (1)
temp.f95:14:27:

   14 |           words = words + 1
      |                           1
Error: Unexpected assignment statement in CONTAINS section at (1)
temp.f95:15:11:

   15 |         end if
      |           1
Error: Expecting END MODULE statement at (1)
temp.f95:16:9:

   16 |       end do
      |         1
Error: Expecting END MODULE statement at (1)
temp.f95:17:28:

   17 |       if (words > max_words) then
      |                            1
Error: Function ‚Äòmax_words‚Äô requires an argument list at (1)
temp.f95:18:18:

   18 |         max_words = words
      |                  1
Error: Symbol ‚Äòmax_words‚Äô at (1) has already been host associated
temp.f95:19:9:

   19 |       end if
      |         1
Error: Expecting END MODULE statement at (1)
temp.f95:20:7:

   20 |     end do
      |       1
Error: Expecting END MODULE statement at (1)
temp.f95:21:5:

   21 |   end function max_words
      |     1
Error: Expecting END MODULE statement at (1)
temp.f95:25:7:

   25 |   use MaxWords
      |       1
Fatal Error: Cannot open module file ‚Äòmaxwords.mod‚Äô for reading at (1): No such file or directory
compilation terminated.
</pre>
          </div>
          
        </div>
        <div
          class="tab-pane fade"
          id="python-tab-pane"
          role="tabpanel"
          aria-labelledby="python-tab"
          tabindex="0">
          <alert class="alert alert-info d-flex">
            <strong>üåê Data from online sources</strong>
          </alert>
          <pre><code class="language-python">def min_sessions(tasks, session_time):
    sessions = []
    tasks.sort(reverse=True)

    for task in tasks:
        added = False
        for session_idx, session in enumerate(sessions):
            if session + task &lt;= session_time:
                sessions[session_idx] += task
                added = True
                break

        if not added:
            sessions.append(task)

    return len(sessions)
</code></pre>
<p>The algorithm starts by sorting the tasks array in descending order. Then, for each task in tasks, it iterates over the sessions array and tries to insert the task into the first session that has sufficient remaining time. If no session can accommodate the task, a new session is created.</p>
<p>In the end, the size of the sessions array is the answer, which represents the minimum number of work sessions required to finish all tasks.</p>
        </div>
        <div
          class="tab-pane fade"
          id="cpp-tab-pane"
          role="tabpanel"
          aria-labelledby="cpp-tab"
          tabindex="0">
          <alert class="alert alert-info d-flex">
            <strong>üåê Data from online sources</strong>
          </alert>
          <pre><code class="language-cpp">#include &lt;vector&gt;
#include &lt;algorithm&gt;

int minSessions(std::vector&lt;int&gt;&amp; tasks, int sessionTime) {
    std::sort(tasks.begin(), tasks.end(), std::greater&lt;int&gt;());
    std::vector&lt;int&gt; sessions;

    for (int task : tasks) {
        bool added = false;
        for (int&amp; session : sessions) {
            if (session + task &lt;= sessionTime) {
                session += task;
                added = true;
                break;
            }
        }

        if (!added) {
            sessions.push_back(task);
        }
    }

    return sessions.size();
}
</code></pre>
<p>The algorithm starts by sorting the tasks array in descending order. Then, for each task in tasks, it iterates over the sessions array and tries to insert the task into the first session that has sufficient remaining time. If no session can accommodate the task, a new session is created.</p>
<p>In the end, the size of the sessions array is the answer, which represents the minimum number of work sessions required to finish all tasks.</p>
        </div>
      </div>
      <style>
        .model-code {
          max-height: 600px;
          overflow-y: auto;
        }

        .font-emoji {
          font-family: emoji;
        }
      </style>
    </div>
  </div>
</div>
<script>
  hljs.addPlugin(new CopyButtonPlugin());
  hljs.highlightAll();
</script>

  </body>
</html>