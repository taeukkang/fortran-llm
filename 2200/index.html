<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Fine-tuning CodeLlama-7B for Fortran Code Generation</title>
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/5.3.3/zephyr/bootstrap.min.css"
      integrity="sha512-CWXb9sx63+REyEBV/cte+dE1hSsYpJifb57KkqAXjsN3gZQt6phZt7e5RhgZrUbaNfCdtdpcqDZtuTEB+D3q2Q=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer" />
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@11.9.0/build/styles/atom-one-dark.min.css" />
    <link
      rel="stylesheet"
      href="https://unpkg.com/highlightjs-copy/dist/highlightjs-copy.min.css" />
    <script src="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@11.9.0/build/highlight.min.js"></script>
    <script src="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@11.9.0/build/languages/fortran.min.js"></script>
    <script src="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@11.9.0/build/languages/python.min.js"></script>
    <script src="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@11.9.0/build/languages/cpp.min.js"></script>
    <script src="https://unpkg.com/highlightjs-copy/dist/highlightjs-copy.min.js"></script>
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.min.js"
      integrity="sha384-BBtl+eGJRgqQAUMxJ7pMwbEyER4l1g+O15P+16Ep7Q9Q+zqX6gSbd85u4mG4QzX+"
      crossorigin="anonymous"></script>
  </head>
  <body>
    
<div class="container">
  <div class="row">
    <div class="col d-flex justify-content-between align-items-center">
      <h2>Find All K-Distant Indices in an Array</h2>
      <div>
        <a href="/" class="btn btn-outline-primary me-2">
          🏠
        </a>
        <a
          href="/2194/"
          class="btn btn-outline-secondary me-2">
          ⬅️
        </a>
        <a
          href="/2206/"
          class="btn btn-outline-secondary">
          ➡️
        </a>
      </div>
    </div>
  </div>

  <div class="row">
    <div class="col">
      <div class="leetcode-problem-content card">
        <div class="card-body">
          <p>You are given a <strong>0-indexed</strong> integer array <code>nums</code> and two integers <code>key</code> and <code>k</code>. A <strong>k-distant index</strong> is an index <code>i</code> of <code>nums</code> for which there exists at least one index <code>j</code> such that <code>|i - j| &lt;= k</code> and <code>nums[j] == key</code>.</p>
<p>Return <em>a list of all k-distant indices sorted in <strong>increasing order</strong></em>.</p>
<p><strong>Example 1:</strong></p>
<p><strong>Input:</strong> nums = [3,4,9,1,3,9,5], key = 9, k = 1
<strong>Output:</strong> [1,2,3,4,5,6]
<strong>Explanation:</strong> Here, <code>nums[2] == key</code> and <code>nums[5] == key. - For index 0, |0 - 2| &gt; k and |0 - 5| &gt; k, so there is no j</code> where <code>|0 - j| &lt;= k</code> and <code>nums[j] == key. Thus, 0 is not a k-distant index. - For index 1, |1 - 2| &lt;= k and nums[2] == key, so 1 is a k-distant index. - For index 2, |2 - 2| &lt;= k and nums[2] == key, so 2 is a k-distant index. - For index 3, |3 - 2| &lt;= k and nums[2] == key, so 3 is a k-distant index. - For index 4, |4 - 5| &lt;= k and nums[5] == key, so 4 is a k-distant index. - For index 5, |5 - 5| &lt;= k and nums[5] == key, so 5 is a k-distant index. - For index 6, |6 - 5| &lt;= k and nums[5] == key, so 6 is a k-distant index.</code>
Thus, we return [1,2,3,4,5,6] which is sorted in increasing order. </p>
<p><strong>Example 2:</strong></p>
<p><strong>Input:</strong> nums = [2,2,2,2,2], key = 2, k = 2
<strong>Output:</strong> [0,1,2,3,4]
<strong>Explanation:</strong> For all indices i in nums, there exists some index j such that |i - j| &lt;= k and nums[j] == key, so every index is a k-distant index. 
Hence, we return [0,1,2,3,4].</p>
<p><strong>Constraints:</strong></p>
<ul>
<li><code>1 &lt;= nums.length &lt;= 1000</code></li>
<li><code>1 &lt;= nums[i] &lt;= 1000</code></li>
<li><code>key</code> is an integer from the array <code>nums</code>.</li>
<li><code>1 &lt;= k &lt;= nums.length</code></li>
</ul>
          <hr />
          <span class="fst-italic">
            Note: This problem is from
            <a
              href="https://leetcode.com/problems/find-all-k-distant-indices-in-an-array/description/">LeetCode</a>.
          </span>
        </div>
      </div>
      <style>
        .leetcode-problem-content {
          max-height: 200px;
          overflow-y: auto;
        }
      </style>
    </div>
  </div>
  <div class="row">
    <div class="col-md-6">
      <ul class="nav nav-underline mb-2" id="myTab" role="tablist">
        <li class="nav-item" role="presentation">
          <button
            class="nav-link active"
            id="our-model-tab"
            data-bs-toggle="tab"
            data-bs-target="#our-model-tab-pane"
            type="button"
            role="tab"
            aria-controls="our-model-tab-pane"
            aria-selected="true">
            🦾 Our model
          </button>
        </li>
      </ul>
      <div class="tab-content" id="myTabContent">
        <div
          class="tab-pane fade show active"
          id="our-model-tab-pane"
          role="tabpanel"
          aria-labelledby="our-model-tab"
          tabindex="0">
          <div class="row mb-2">
            <div class="col">
              <div
                class="card border-success"
                style="border-width: 2px">
                <div class="card-body">
                  <span class="font-emoji">
                    ✅
                  </span>
                  <strong>Compiled</strong>
                </div>
              </div>
            </div>

            <div class="col">
              <div
                class="card border-success"
                style="border-width: 2px">
                <div class="card-body">
                  <span class="font_emoji">
                    ✅
                  </span>
                  <strong>Executed</strong>
                </div>
              </div>
            </div>

            <div class="col">
              <div
                class="card border-danger"
                style="border-width: 2px">
                <div class="card-body">
                  <span class="font-emoji">
                    ❌
                  </span>
                  <strong>Correct</strong>
                </div>
              </div>
            </div>
          </div>
          <pre><code class="language-fortran model-code">program main
    implicit none

    integer, parameter :: n = 7
    integer, parameter :: k = 1
    integer, parameter :: key = 9
    integer :: nums(n) = [3, 4, 9, 1, 3, 9, 5]
    integer :: i, j
    logical :: found

    do i = 1, n
        found = .false.
        do j = max(1, i - k), min(n, i + k)
            if (abs(i - j) <= k .and. nums(j) == key) then
                found = .true.
                exit
            end if
        end do
        if (found) then
            write (*, '(I0)') i
        end if
    end do

end program main</code></pre>

          
          <div class="alert alert-info" role="alert">
            <strong>stdout</strong>
            <pre>2
3
4
5
6
7
</pre>
          </div>
           
        </div>
      </div>
    </div>
    <div class="col-md-6">
      <ul class="nav nav-underline mb-2" id="myTab" role="tablist">
        <li class="nav-item" role="presentation">
          <button
            class="nav-link active"
            id="codellama-tab"
            data-bs-toggle="tab"
            data-bs-target="#codellama-tab-pane"
            type="button"
            role="tab"
            aria-controls="codellama-tab-pane"
            aria-selected="true">
            🦙 CodeLlama-7B
          </button>
        </li>
        <li class="nav-item" role="presentation">
          <button
            class="nav-link"
            id="python-tab"
            data-bs-toggle="tab"
            data-bs-target="#python-tab-pane"
            type="button"
            role="tab"
            aria-controls="python-tab-pane"
            aria-selected="false">
            🐍 Python
          </button>
        </li>
        <li class="nav-item" role="presentation">
          <button
            class="nav-link"
            id="cpp-tab"
            data-bs-toggle="tab"
            data-bs-target="#cpp-tab-pane"
            type="button"
            role="tab"
            aria-controls="cpp-tab-pane"
            aria-selected="false">
            🤠 C++
          </button>
        </li>
      </ul>
      <div class="tab-content" id="myTabContent">
        <div
          class="tab-pane fade show active"
          id="codellama-tab-pane"
          role="tabpanel"
          aria-labelledby="codellama-tab"
          tabindex="0">
          <div class="row mb-2">
            <div class="col">
              <div
                class="card border-danger"
                style="border-width: 2px">
                <div class="card-body">
                  <span class="font-emoji">
                    ❌
                  </span>
                  <strong>Compiled</strong>
                </div>
              </div>
            </div>

            <div class="col">
              <div
                class="card border-danger"
                style="border-width: 2px">
                <div class="card-body">
                  <span class="font-emoji">
                    ❌
                  </span>
                  <strong>Executed</strong>
                </div>
              </div>
            </div>

            <div class="col">
              <div
                class="card border-danger"
                style="border-width: 2px">
                <div class="card-body">
                  <span class="font-emoji">
                    ❌
                  </span>
                  <strong>Correct</strong>
                </div>
              </div>
            </div>
          </div>
          <pre><code class="language-fortran model-code">module k_distant_indices
    implicit none

contains

    function k_distant_indices(nums, key, k) result(indices)
        integer, intent(in) :: nums(:), key, k
        integer :: indices(size(nums))

        ! Initialize the indices array with the indices of the key elements
        indices = pack(reshape((/(i, i = 1, size(nums))/), shape(nums)), &
                       nums == key)

        ! Sort the indices in increasing order
        indices = sort(indices)

        ! Remove the indices that are not k-distant
        indices = indices(k_distant_mask(nums, key, k))

        ! Return the sorted indices
        return
    end function k_distant_indices

    function k_distant_mask(nums, key, k) result(mask)
        integer, intent(in) :: nums(:), key, k
        logical :: mask(size(nums))

        ! Initialize the mask with the indices of the key elements
        mask = nums == key

        ! Remove the indices that are not k-distant
        mask = mask .and. k_distant(nums, key, k)

        ! Return the mask
        return
    end function k_distant_mask

    function k_distant(nums, key, k) result(distant)
        integer, intent(in) :: nums(:), key, k
        logical :: distant(size(nums))

        ! Initialize the distant array with the indices of the key elements
        distant = pack(reshape((/(i, i = 1, size(nums))/), shape(nums)), &
                       nums == key)

        ! Remove the indices that are not k-distant
        distant = distant .and. k_distant_helper(nums, key, k)

        ! Return the distant array
        return
    end function k_distant

    function k_distant_helper(nums, key, k) result(distant)
        integer, intent(in) :: nums(:), key, k
        logical :: distant(size(nums))

        ! Initialize the distant array with the indices of the key elements
        distant = pack(reshape((/(i, i = 1, size(nums))/), shape(nums)), &
                       nums == key)

        ! Remove the indices that are not k-distant
        do i = 1, size(nums)
            distant(i) = distant(i) .and. any(abs(i - distant) <= k)
        end do

        ! Return the distant array
        return
    end function k_distant_helper
end module k_distant_indices

program test_k_distant_indices
    use k_distant_indices
    implicit none

    integer, parameter :: nums(7) = [3, 4, 9, 1, 3, 9, 5]
    integer, parameter :: key = 9
    integer, parameter :: k = 1
    integer :: indices(size(nums))

    indices = k_distant_indices(nums, key, k)

    write (*,*) indices

end program test_k_distant_indices
</code></pre>
           
          <div class="alert alert-danger" role="alert">
            <strong>stderr</strong>
            <pre>temp.f95:6:30:

    6 |     function k_distant_indices(nums, key, k) result(indices)
      |                              1
Error: MODULE attribute of ‘k_distant_indices’ conflicts with PROCEDURE attribute at (1)
temp.f95:7:46:

    7 |         integer, intent(in) :: nums(:), key, k
      |                                              1
Error: Unexpected data declaration statement in CONTAINS section at (1)
temp.f95:8:32:

    8 |         integer :: indices(size(nums))
      |                                1
Error: Symbol ‘nums’ is used before it is typed at (1)
temp.f95:12:35:

   12 |                        nums == key)
      |                                   1
Error: Unexpected assignment statement in CONTAINS section at (1)
temp.f95:15:31:

   15 |         indices = sort(indices)
      |                               1
Error: Unexpected assignment statement in CONTAINS section at (1)
temp.f95:21:14:

   21 |         return
      |              1
Error: Unexpected RETURN statement in CONTAINS section at (1)
temp.f95:22:7:

   22 |     end function k_distant_indices
      |       1
Error: Expecting END MODULE statement at (1)
temp.f95:58:35:

   58 |         distant = pack(reshape((/(i, i = 1, size(nums))/), shape(nums)), &
      |                                   1
Error: Symbol ‘i’ at (1) has no IMPLICIT type
temp.f95:43:35:

   43 |         distant = pack(reshape((/(i, i = 1, size(nums))/), shape(nums)), &
      |                                   1
Error: Symbol ‘i’ at (1) has no IMPLICIT type
temp.f95:72:9:

   72 |     use k_distant_indices
      |         1
Fatal Error: Cannot open module file ‘k_distant_indices.mod’ for reading at (1): No such file or directory
compilation terminated.
</pre>
          </div>
          
        </div>
        <div
          class="tab-pane fade"
          id="python-tab-pane"
          role="tabpanel"
          aria-labelledby="python-tab"
          tabindex="0">
          <alert class="alert alert-info d-flex">
            <strong>🌐 Data from online sources</strong>
          </alert>
          <pre><code class="language-python">def can_fit_stamps(grid, stampHeight, stampWidth):
    m, n = len(grid), len(grid[0])
    for i in range(m - stampHeight + 1):
        for j in range(n - stampWidth + 1):
            canFit = True
            for x in range(stampHeight):
                for y in range(stampWidth):
                    if grid[i + x][j + y] == 1:
                        canFit = False
                        break
                if not canFit:
                    break
            if canFit:
                return True
    return False
</code></pre>
<p>The algorithm loops through the cells of the grid, and for each cell, it checks if a stamp can fit the area starting from that cell. If the stamp fits without any occupied cells (value of 1) in the area, the function returns true. If the loop finishes without finding any fitting area, the function returns false.</p>
        </div>
        <div
          class="tab-pane fade"
          id="cpp-tab-pane"
          role="tabpanel"
          aria-labelledby="cpp-tab"
          tabindex="0">
          <alert class="alert alert-info d-flex">
            <strong>🌐 Data from online sources</strong>
          </alert>
          <pre><code class="language-cpp">bool canFitStamps(vector&lt;vector&lt;int&gt;&gt;&amp; grid, int stampHeight, int stampWidth) {
    int m = grid.size(), n = grid[0].size();
    for (int i = 0; i + stampHeight - 1 &lt; m; ++i) {
        for (int j = 0; j + stampWidth - 1 &lt; n; ++j) {
            bool canFit = true;
            for (int x = 0; x &lt; stampHeight &amp;&amp; canFit; ++x) {
                for (int y = 0; y &lt; stampWidth &amp;&amp; canFit; ++y) {
                    if (grid[i + x][j + y] == 1) {
                        canFit = false;
                    }
                }
            }
            if (canFit) {
                return true;
            }
        }
    }
    return false;
}
</code></pre>
<p>The algorithm loops through the cells of the grid, and for each cell, it checks if a stamp can fit the area starting from that cell. If the stamp fits without any occupied cells (value of 1) in the area, the function returns true. If the loop finishes without finding any fitting area, the function returns false.</p>
        </div>
      </div>
      <style>
        .model-code {
          max-height: 600px;
          overflow-y: auto;
        }

        .font-emoji {
          font-family: emoji;
        }
      </style>
    </div>
  </div>
</div>
<script>
  hljs.addPlugin(new CopyButtonPlugin());
  hljs.highlightAll();
</script>

  </body>
</html>