<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Fine-tuning CodeLlama-7B for Fortran Code Generation</title>
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/5.3.3/zephyr/bootstrap.min.css"
      integrity="sha512-CWXb9sx63+REyEBV/cte+dE1hSsYpJifb57KkqAXjsN3gZQt6phZt7e5RhgZrUbaNfCdtdpcqDZtuTEB+D3q2Q=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer" />
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@11.9.0/build/styles/atom-one-dark.min.css" />
    <link
      rel="stylesheet"
      href="https://unpkg.com/highlightjs-copy/dist/highlightjs-copy.min.css" />
    <script src="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@11.9.0/build/highlight.min.js"></script>
    <script src="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@11.9.0/build/languages/fortran.min.js"></script>
    <script src="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@11.9.0/build/languages/python.min.js"></script>
    <script src="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@11.9.0/build/languages/cpp.min.js"></script>
    <script src="https://unpkg.com/highlightjs-copy/dist/highlightjs-copy.min.js"></script>
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.min.js"
      integrity="sha384-BBtl+eGJRgqQAUMxJ7pMwbEyER4l1g+O15P+16Ep7Q9Q+zqX6gSbd85u4mG4QzX+"
      crossorigin="anonymous"></script>
  </head>
  <body>
    
<div class="container">
  <div class="row">
    <div class="col d-flex justify-content-between align-items-center">
      <h2>Palindrome Linked List</h2>
      <div>
        <a href="/fortran-llm/" class="btn btn-outline-primary me-2">
          üè†
        </a>
        <a
          href="/fortran-llm/232/"
          class="btn btn-outline-secondary me-2">
          ‚¨ÖÔ∏è
        </a>
        <a
          href="/fortran-llm/242/"
          class="btn btn-outline-secondary">
          ‚û°Ô∏è
        </a>
      </div>
    </div>
  </div>

  <div class="row">
    <div class="col">
      <div class="leetcode-problem-content card">
        <div class="card-body">
          <p>Given the <code>head</code> of a singly linked list, return <code>true</code> <em>if it is a</em> <em>palindrome</em> <em>or</em> <code>false</code> <em>otherwise</em>.</p>
<p><strong>Example 1:</strong></p>
<p><strong>Input:</strong> head = [1,2,2,1]
<strong>Output:</strong> true</p>
<p><strong>Example 2:</strong></p>
<p><strong>Input:</strong> head = [1,2]
<strong>Output:</strong> false</p>
<p><strong>Constraints:</strong></p>
<ul>
<li>The number of nodes in the list is in the range <code>[1, 105]</code>.</li>
<li><code>0 &lt;= Node.val &lt;= 9</code></li>
</ul>
<p><strong>Follow up:</strong> Could you do it in <code>O(n)</code> time and <code>O(1)</code> space?</p>
          <hr />
          <span class="fst-italic">
            Note: This problem is from
            <a
              href="https://leetcode.com/problems/palindrome-linked-list/description/">LeetCode</a>.
          </span>
        </div>
      </div>
      <style>
        .leetcode-problem-content {
          max-height: 200px;
          overflow-y: auto;
        }
      </style>
    </div>
  </div>
  <div class="row">
    <div class="col-md-6">
      <ul class="nav nav-underline mb-2" id="myTab" role="tablist">
        <li class="nav-item" role="presentation">
          <button
            class="nav-link active"
            id="our-model-tab"
            data-bs-toggle="tab"
            data-bs-target="#our-model-tab-pane"
            type="button"
            role="tab"
            aria-controls="our-model-tab-pane"
            aria-selected="true">
            ü¶æ Our model
          </button>
        </li>
      </ul>
      <div class="tab-content" id="myTabContent">
        <div
          class="tab-pane fade show active"
          id="our-model-tab-pane"
          role="tabpanel"
          aria-labelledby="our-model-tab"
          tabindex="0">
          <div class="row mb-2">
            <div class="col">
              <div
                class="card border-success"
                style="border-width: 2px">
                <div class="card-body">
                  <span class="font-emoji">
                    ‚úÖ
                  </span>
                  <strong>Compiled</strong>
                </div>
              </div>
            </div>

            <div class="col">
              <div
                class="card border-danger"
                style="border-width: 2px">
                <div class="card-body">
                  <span class="font_emoji">
                    ‚ùå
                  </span>
                  <strong>Executed</strong>
                </div>
              </div>
            </div>

            <div class="col">
              <div
                class="card border-warning"
                style="border-width: 2px">
                <div class="card-body">
                  <span class="font-emoji">
                    ‚ö†Ô∏è
                  </span>
                  <strong>Correct</strong>
                </div>
              </div>
            </div>
          </div>
          <pre><code class="language-fortran model-code">program palindrome_list
    implicit none

    type :: node
        integer :: val
        type(node), pointer :: next => null()
    end type

    type(node), pointer :: head

    logical :: result

    call test_example1()
    call test_example2()

contains

    subroutine test_example1()
        type(node), pointer :: curr
        allocate(curr)
        curr%val = 1
        curr%next => curr
        allocate(curr%next)
        curr%next%val = 2
        curr%next%next => curr
        allocate(curr%next%next)
        curr%next%next%val = 2
        curr%next%next%next => curr
        allocate(curr%next%next%next)
        curr%next%next%next%val = 1
        curr%next%next%next%next => null()
        result = is_palindrome(head)
        write (*, '(A, L1)') 'Example 1: ', result
    end subroutine

    subroutine test_example2()
        type(node), pointer :: curr
        allocate(curr)
        curr%val = 1
        curr%next => curr
        allocate(curr%next)
        curr%next%val = 2
        curr%next%next => null()
        result = is_palindrome(head)
        write (*, '(A, L1)') 'Example 2: ', result
    end subroutine

    function is_palindrome(head) result(result_)
        type(node), pointer, intent(in) :: head
        type(node), pointer :: slow, fast
        logical :: result_

        slow => head
        fast => head
        do while (associated(fast))
            if (.not. associated(fast%next)) exit
            fast => fast%next%next
            slow => slow%next
        end do

        result_ = .true.
        do while (associated(slow))
            if (slow%val /= fast%val) then
                result_ = .false.
                exit
            end if
            slow => slow%next
            fast => fast%next
        end do
    end function

end program</code></pre>

           
          <div class="alert alert-danger" role="alert">
            <strong>stderr</strong>
            <pre>
Program received signal SIGSEGV: Segmentation fault - invalid memory reference.

Backtrace for this error:
#0  0x7dbf9f648960 in ???
#1  0x7dbf9f647ac5 in ???
#2  0x7dbf9f43e51f in ???
#3  0x56473cb901d6 in is_palindrome.0
#4  0x56473cb9066f in test_example1.2
#5  0x56473cb90263 in MAIN__
#6  0x56473cb9075a in main
</pre>
          </div>
          
        </div>
      </div>
    </div>
    <div class="col-md-6">
      <ul class="nav nav-underline mb-2" id="myTab" role="tablist">
        <li class="nav-item" role="presentation">
          <button
            class="nav-link active"
            id="codellama-tab"
            data-bs-toggle="tab"
            data-bs-target="#codellama-tab-pane"
            type="button"
            role="tab"
            aria-controls="codellama-tab-pane"
            aria-selected="true">
            ü¶ô CodeLlama-7B
          </button>
        </li>
        <li class="nav-item" role="presentation">
          <button
            class="nav-link"
            id="python-tab"
            data-bs-toggle="tab"
            data-bs-target="#python-tab-pane"
            type="button"
            role="tab"
            aria-controls="python-tab-pane"
            aria-selected="false">
            üêç Python
          </button>
        </li>
        <li class="nav-item" role="presentation">
          <button
            class="nav-link"
            id="cpp-tab"
            data-bs-toggle="tab"
            data-bs-target="#cpp-tab-pane"
            type="button"
            role="tab"
            aria-controls="cpp-tab-pane"
            aria-selected="false">
            ü§† C++
          </button>
        </li>
      </ul>
      <div class="tab-content" id="myTabContent">
        <div
          class="tab-pane fade show active"
          id="codellama-tab-pane"
          role="tabpanel"
          aria-labelledby="codellama-tab"
          tabindex="0">
          <div class="row mb-2">
            <div class="col">
              <div
                class="card border-danger"
                style="border-width: 2px">
                <div class="card-body">
                  <span class="font-emoji">
                    ‚ùå
                  </span>
                  <strong>Compiled</strong>
                </div>
              </div>
            </div>

            <div class="col">
              <div
                class="card border-danger"
                style="border-width: 2px">
                <div class="card-body">
                  <span class="font-emoji">
                    ‚ùå
                  </span>
                  <strong>Executed</strong>
                </div>
              </div>
            </div>

            <div class="col">
              <div
                class="card border-danger"
                style="border-width: 2px">
                <div class="card-body">
                  <span class="font-emoji">
                    ‚ùå
                  </span>
                  <strong>Correct</strong>
                </div>
              </div>
            </div>
          </div>
          <pre><code class="language-fortran model-code">module palindrome_list

implicit none

type :: node
    integer :: val
    type(node), pointer :: next => null()
end type node

interface
    function is_palindrome(head) result(is_palindrome)
        type(node), pointer, intent(in) :: head
        logical :: is_palindrome
    end function is_palindrome
end interface

contains

function is_palindrome(head) result(is_palindrome)
    type(node), pointer, intent(in) :: head
    type(node), pointer :: slow, fast
    integer :: length, mid, i
    logical :: is_palindrome

    ! Find the length of the list
    length = 0
    do
        length = length + 1
        if (.not. associated(head%next)) exit
        head => head%next
    end do

    ! Find the middle of the list
    mid = length / 2 + 1

    ! Reverse the second half of the list
    slow => head
    do i = 1, mid - 1
        fast => slow%next
        slow%next => fast%next
        fast%next => slow
    end do

    ! Check if the first and second halves are the same
    is_palindrome = .true.
    do i = 1, mid
        if (head%val /= slow%val) then
            is_palindrome = .false.
            exit
        end if
        head => head%next
        slow => slow%next
    end do

end function is_palindrome

end module palindrome_list

program test
    use palindrome_list
    implicit none

    ! Examples
    type(node), pointer :: head
    head => null()
    call add_node(head, 1)
    call add_node(head, 2)
    call add_node(head, 2)
    call add_node(head, 1)
    write (*,*) is_palindrome(head)

    head => null()
    call add_node(head, 1)
    call add_node(head, 2)
    call add_node(head, 3)
    write (*,*) is_palindrome(head)

contains

subroutine add_node(head, val)
    type(node), pointer, intent(inout) :: head
    integer, intent(in) :: val
    type(node), pointer :: new_node

    allocate(new_node)
    new_node%val = val
    new_node%next => head
    head => new_node

end subroutine add_node

end program test
</code></pre>
           
          <div class="alert alert-danger" role="alert">
            <strong>stderr</strong>
            <pre>temp.f95:11:54:

   11 |     function is_palindrome(head) result(is_palindrome)
      |                                                      1
Error: RESULT variable at (1) must be different than function name
temp.f95:12:47:

   12 |         type(node), pointer, intent(in) :: head
      |                                               1
Error: Unexpected data declaration statement in INTERFACE block at (1)
temp.f95:13:32:

   13 |         logical :: is_palindrome
      |                                1
Error: Unexpected data declaration statement in INTERFACE block at (1)
temp.f95:14:7:

   14 |     end function is_palindrome
      |       1
Error: Expecting END INTERFACE statement at (1)
temp.f95:19:50:

   19 | function is_palindrome(head) result(is_palindrome)
      |                                                  1
Error: RESULT variable at (1) must be different than function name
temp.f95:20:43:

   20 |     type(node), pointer, intent(in) :: head
      |                                           1
Error: Unexpected data declaration statement in CONTAINS section at (1)
temp.f95:21:37:

   21 |     type(node), pointer :: slow, fast
      |                                     1
Error: Unexpected data declaration statement in CONTAINS section at (1)
temp.f95:22:29:

   22 |     integer :: length, mid, i
      |                             1
Error: Unexpected data declaration statement in CONTAINS section at (1)
temp.f95:23:28:

   23 |     logical :: is_palindrome
      |                            1
Error: Symbol ‚Äòis_palindrome‚Äô at (1) has already been host associated
temp.f95:26:14:

   26 |     length = 0
      |              1
Error: Unexpected assignment statement in CONTAINS section at (1)
temp.f95:27:6:

   27 |     do
      |      1
Error: Unexpected DO statement in CONTAINS section at (1)
temp.f95:28:27:

   28 |         length = length + 1
      |                           1
Error: Unexpected assignment statement in CONTAINS section at (1)
temp.f95:29:35:

   29 |         if (.not. associated(head%next)) exit
      |                                   1
Error: Symbol ‚Äòhead‚Äô at (1) has no IMPLICIT type
temp.f95:30:22:

   30 |         head => head%next
      |                      1
Error: Symbol ‚Äòhead‚Äô at (1) has no IMPLICIT type
temp.f95:31:7:

   31 |     end do
      |       1
Error: Expecting END MODULE statement at (1)
temp.f95:34:24:

   34 |     mid = length / 2 + 1
      |                        1
Error: Unexpected assignment statement in CONTAINS section at (1)
temp.f95:37:16:

   37 |     slow => head
      |                1
Error: Unexpected pointer assignment statement in CONTAINS section at (1)
temp.f95:38:21:

   38 |     do i = 1, mid - 1
      |                     1
Error: Unexpected DO statement in CONTAINS section at (1)
temp.f95:39:22:

   39 |         fast => slow%next
      |                      1
Error: Symbol ‚Äòslow‚Äô at (1) has no IMPLICIT type
temp.f95:40:14:

   40 |         slow%next => fast%next
      |              1
Error: Symbol ‚Äòslow‚Äô at (1) has no IMPLICIT type
temp.f95:41:14:

   41 |         fast%next => slow
      |              1
Error: Symbol ‚Äòfast‚Äô at (1) has no IMPLICIT type
temp.f95:42:7:

   42 |     end do
      |       1
Error: Expecting END MODULE statement at (1)
temp.f95:45:18:

   45 |     is_palindrome = .true.
      |                  1
Error: Symbol ‚Äòis_palindrome‚Äô at (1) has already been host associated
temp.f95:46:17:

   46 |     do i = 1, mid
      |                 1
Error: Unexpected DO statement in CONTAINS section at (1)
temp.f95:47:18:

   47 |         if (head%val /= slow%val) then
      |                  1
Error: Symbol ‚Äòhead‚Äô at (1) has no IMPLICIT type
temp.f95:48:26:

   48 |             is_palindrome = .false.
      |                          1
Error: Symbol ‚Äòis_palindrome‚Äô at (1) has already been host associated
temp.f95:49:16:

   49 |             exit
      |                1
Error: EXIT statement at (1) is not within a construct
temp.f95:50:11:

   50 |         end if
      |           1
Error: Expecting END MODULE statement at (1)
temp.f95:51:22:

   51 |         head => head%next
      |                      1
Error: Symbol ‚Äòhead‚Äô at (1) has no IMPLICIT type
temp.f95:52:22:

   52 |         slow => slow%next
      |                      1
Error: Symbol ‚Äòslow‚Äô at (1) has no IMPLICIT type
temp.f95:53:7:

   53 |     end do
      |       1
Error: Expecting END MODULE statement at (1)
temp.f95:55:3:

   55 | end function is_palindrome
      |   1
Error: Expecting END MODULE statement at (1)
temp.f95:60:9:

   60 |     use palindrome_list
      |         1
Fatal Error: Cannot open module file ‚Äòpalindrome_list.mod‚Äô for reading at (1): No such file or directory
compilation terminated.
</pre>
          </div>
          
        </div>
        <div
          class="tab-pane fade"
          id="python-tab-pane"
          role="tabpanel"
          aria-labelledby="python-tab"
          tabindex="0">
          <alert class="alert alert-info d-flex">
            <strong>üåê Data from online sources</strong>
          </alert>
          <pre><code class="language-python">class ListNode:
    def __init__(self, val=0, next=None):
        self.val = val
        self.next = next

def isPalindrome(head):
    if not head or not head.next:
        return True

    fast, slow, prev = head, head, None
    while fast and fast.next:
        fast = fast.next.next
        temp = slow.next
        slow.next = prev
        prev = slow
        slow = temp

    if fast:
        slow = slow.next

    while prev and prev.val == slow.val:
        prev = prev.next
        slow = slow.next

    return prev == None
</code></pre>
<p>The function uses the slow and fast pointers approach to find the middle of the linked list. It simultaneously reverses the first half of the linked list. At the end of this process, slow will be at the middle and prev will be the reversed first half of the list. If the list has an odd length, slow moves one step forward (skipping the middle element). Finally, we compare the elements of the reversed first half (using prev) and the rest of the list (starting from slow). If they match, it means the list is a palindrome.</p>
        </div>
        <div
          class="tab-pane fade"
          id="cpp-tab-pane"
          role="tabpanel"
          aria-labelledby="cpp-tab"
          tabindex="0">
          <alert class="alert alert-info d-flex">
            <strong>üåê Data from online sources</strong>
          </alert>
          <pre><code class="language-cpp">class ListNode {
public:
    int val;
    ListNode *next;
    ListNode(int x) : val(x), next(NULL) {}
};

bool isPalindrome(ListNode* head) {
    if (!head || !head-&gt;next) return true;

    ListNode *fast = head, *slow = head, *prev = NULL;
    while (fast &amp;&amp; fast-&gt;next) {
        fast = fast-&gt;next-&gt;next;
        ListNode *temp = slow-&gt;next;
        slow-&gt;next = prev;
        prev = slow;
        slow = temp;
    }

    if (fast) slow = slow-&gt;next;

    while (prev &amp;&amp; prev-&gt;val == slow-&gt;val) {
        prev = prev-&gt;next;
        slow = slow-&gt;next;
    }

    return prev == NULL;
}
</code></pre>
<p>The function uses the slow and fast pointers approach to find the middle of the linked list. It simultaneously reverses the first half of the linked list. At the end of this process, slow will be at the middle and prev will be the reversed first half of the list. If the list has an odd length, slow moves one step forward (skipping the middle element). Finally, we compare the elements of the reversed first half (using prev) and the rest of the list (starting from slow). If they match, it means the list is a palindrome.</p>
        </div>
      </div>
      <style>
        .model-code {
          max-height: 600px;
          overflow-y: auto;
        }

        .font-emoji {
          font-family: emoji;
        }
      </style>
    </div>
  </div>
</div>
<script>
  hljs.addPlugin(new CopyButtonPlugin());
  hljs.highlightAll();
</script>

  </body>
</html>