<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Fine-tuning CodeLlama-7B for Fortran Code Generation</title>
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/5.3.3/zephyr/bootstrap.min.css"
      integrity="sha512-CWXb9sx63+REyEBV/cte+dE1hSsYpJifb57KkqAXjsN3gZQt6phZt7e5RhgZrUbaNfCdtdpcqDZtuTEB+D3q2Q=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer" />
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@11.9.0/build/styles/atom-one-dark.min.css" />
    <link
      rel="stylesheet"
      href="https://unpkg.com/highlightjs-copy/dist/highlightjs-copy.min.css" />
    <script src="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@11.9.0/build/highlight.min.js"></script>
    <script src="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@11.9.0/build/languages/fortran.min.js"></script>
    <script src="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@11.9.0/build/languages/python.min.js"></script>
    <script src="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@11.9.0/build/languages/cpp.min.js"></script>
    <script src="https://unpkg.com/highlightjs-copy/dist/highlightjs-copy.min.js"></script>
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.min.js"
      integrity="sha384-BBtl+eGJRgqQAUMxJ7pMwbEyER4l1g+O15P+16Ep7Q9Q+zqX6gSbd85u4mG4QzX+"
      crossorigin="anonymous"></script>
  </head>
  <body>
    
<div class="container">
  <div class="row">
    <div class="col d-flex justify-content-between align-items-center">
      <h2>The Employee That Worked on the Longest Task</h2>
      <div>
        <a href="/" class="btn btn-outline-primary me-2">
          üè†
        </a>
        <a
          href="/2427/"
          class="btn btn-outline-secondary me-2">
          ‚¨ÖÔ∏è
        </a>
        <a
          href="/2437/"
          class="btn btn-outline-secondary">
          ‚û°Ô∏è
        </a>
      </div>
    </div>
  </div>

  <div class="row">
    <div class="col">
      <div class="leetcode-problem-content card">
        <div class="card-body">
          <p>There are <code>n</code> employees, each with a unique id from <code>0</code> to <code>n - 1</code>.</p>
<p>You are given a 2D integer array <code>logs</code> where <code>logs[i] = [idi, leaveTimei]</code> where:</p>
<ul>
<li><code>idi</code> is the id of the employee that worked on the <code>ith</code> task, and</li>
<li><code>leaveTimei</code> is the time at which the employee finished the <code>ith</code> task. All the values <code>leaveTimei</code> are <strong>unique</strong>.</li>
</ul>
<p>Note that the <code>ith</code> task starts the moment right after the <code>(i - 1)th</code> task ends, and the <code>0th</code> task starts at time <code>0</code>.</p>
<p>Return <em>the id of the employee that worked the task with the longest time.</em> If there is a tie between two or more employees, return <em>the <strong>smallest</strong> id among them</em>.</p>
<p><strong>Example 1:</strong></p>
<p><strong>Input:</strong> n = 10, logs = [[0,3],[2,5],[0,9],[1,15]]
<strong>Output:</strong> 1
<strong>Explanation:</strong> 
Task 0 started at 0 and ended at 3 with 3 units of times.
Task 1 started at 3 and ended at 5 with 2 units of times.
Task 2 started at 5 and ended at 9 with 4 units of times.
Task 3 started at 9 and ended at 15 with 6 units of times.
The task with the longest time is task 3 and the employee with id 1 is the one that worked on it, so we return 1.</p>
<p><strong>Example 2:</strong></p>
<p><strong>Input:</strong> n = 26, logs = [[1,1],[3,7],[2,12],[7,17]]
<strong>Output:</strong> 3
<strong>Explanation:</strong> 
Task 0 started at 0 and ended at 1 with 1 unit of times.
Task 1 started at 1 and ended at 7 with 6 units of times.
Task 2 started at 7 and ended at 12 with 5 units of times.
Task 3 started at 12 and ended at 17 with 5 units of times.
The tasks with the longest time is task 1. The employees that worked on it is 3, so we return 3.</p>
<p><strong>Example 3:</strong></p>
<p><strong>Input:</strong> n = 2, logs = [[0,10],[1,20]]
<strong>Output:</strong> 0
<strong>Explanation:</strong> 
Task 0 started at 0 and ended at 10 with 10 units of times.
Task 1 started at 10 and ended at 20 with 10 units of times.
The tasks with the longest time are tasks 0 and 1. The employees that worked on them are 0 and 1, so we return the smallest id 0.</p>
<p><strong>Constraints:</strong></p>
<ul>
<li><code>2 &lt;= n &lt;= 500</code></li>
<li><code>1 &lt;= logs.length &lt;= 500</code></li>
<li><code>logs[i].length == 2</code></li>
<li><code>0 &lt;= idi &lt;= n - 1</code></li>
<li><code>1 &lt;= leaveTimei &lt;= 500</code></li>
<li><code>idi != idi+1</code></li>
<li><code>leaveTimei</code> are sorted in a strictly increasing order.</li>
</ul>
          <hr />
          <span class="fst-italic">
            Note: This problem is from
            <a
              href="https://leetcode.com/problems/the-employee-that-worked-on-the-longest-task/description/">LeetCode</a>.
          </span>
        </div>
      </div>
      <style>
        .leetcode-problem-content {
          max-height: 200px;
          overflow-y: auto;
        }
      </style>
    </div>
  </div>
  <div class="row">
    <div class="col-md-6">
      <ul class="nav nav-underline mb-2" id="myTab" role="tablist">
        <li class="nav-item" role="presentation">
          <button
            class="nav-link active"
            id="our-model-tab"
            data-bs-toggle="tab"
            data-bs-target="#our-model-tab-pane"
            type="button"
            role="tab"
            aria-controls="our-model-tab-pane"
            aria-selected="true">
            ü¶æ Our model
          </button>
        </li>
      </ul>
      <div class="tab-content" id="myTabContent">
        <div
          class="tab-pane fade show active"
          id="our-model-tab-pane"
          role="tabpanel"
          aria-labelledby="our-model-tab"
          tabindex="0">
          <div class="row mb-2">
            <div class="col">
              <div
                class="card border-success"
                style="border-width: 2px">
                <div class="card-body">
                  <span class="font-emoji">
                    ‚úÖ
                  </span>
                  <strong>Compiled</strong>
                </div>
              </div>
            </div>

            <div class="col">
              <div
                class="card border-danger"
                style="border-width: 2px">
                <div class="card-body">
                  <span class="font_emoji">
                    ‚ùå
                  </span>
                  <strong>Executed</strong>
                </div>
              </div>
            </div>

            <div class="col">
              <div
                class="card border-danger"
                style="border-width: 2px">
                <div class="card-body">
                  <span class="font-emoji">
                    ‚ùå
                  </span>
                  <strong>Correct</strong>
                </div>
              </div>
            </div>
          </div>
          <pre><code class="language-fortran model-code">program main
    implicit none

    integer :: n, i, j, id, leaveTime, maxLeaveTime, maxId
    integer, allocatable :: logs(:, :)

    ! read input
    read(*, *) n
    allocate(logs(n, 2))
    do i = 1, n
        read(*, *) logs(i, :)
    end do

    ! solve problem
    maxLeaveTime = 0
    maxId = 0
    do i = 1, n
        id = logs(i, 1)
        leaveTime = logs(i, 2)
        if (leaveTime > maxLeaveTime) then
            maxLeaveTime = leaveTime
            maxId = id
        elseif (leaveTime == maxLeaveTime .and. id < maxId) then
            maxId = id
        end if
    end do

    ! print output
    write (*, '(I0)') maxId

end program main</code></pre>

           
          <div class="alert alert-danger" role="alert">
            <strong>stderr</strong>
            <pre>At line 8 of file temp.f95 (unit = 5, file = 'stdin')
Fortran runtime error: End of file

Error termination. Backtrace:
#0  0x7e6ba8716960 in ???
#1  0x7e6ba87174d9 in ???
#2  0x7e6ba896b17b in ???
#3  0x7e6ba8964684 in ???
#4  0x7e6ba89652aa in ???
#5  0x5cca4eaa628c in MAIN__
#6  0x5cca4eaa670a in main
</pre>
          </div>
          
        </div>
      </div>
    </div>
    <div class="col-md-6">
      <ul class="nav nav-underline mb-2" id="myTab" role="tablist">
        <li class="nav-item" role="presentation">
          <button
            class="nav-link active"
            id="codellama-tab"
            data-bs-toggle="tab"
            data-bs-target="#codellama-tab-pane"
            type="button"
            role="tab"
            aria-controls="codellama-tab-pane"
            aria-selected="true">
            ü¶ô CodeLlama-7B
          </button>
        </li>
        <li class="nav-item" role="presentation">
          <button
            class="nav-link"
            id="python-tab"
            data-bs-toggle="tab"
            data-bs-target="#python-tab-pane"
            type="button"
            role="tab"
            aria-controls="python-tab-pane"
            aria-selected="false">
            üêç Python
          </button>
        </li>
        <li class="nav-item" role="presentation">
          <button
            class="nav-link"
            id="cpp-tab"
            data-bs-toggle="tab"
            data-bs-target="#cpp-tab-pane"
            type="button"
            role="tab"
            aria-controls="cpp-tab-pane"
            aria-selected="false">
            ü§† C++
          </button>
        </li>
      </ul>
      <div class="tab-content" id="myTabContent">
        <div
          class="tab-pane fade show active"
          id="codellama-tab-pane"
          role="tabpanel"
          aria-labelledby="codellama-tab"
          tabindex="0">
          <div class="row mb-2">
            <div class="col">
              <div
                class="card border-danger"
                style="border-width: 2px">
                <div class="card-body">
                  <span class="font-emoji">
                    ‚ùå
                  </span>
                  <strong>Compiled</strong>
                </div>
              </div>
            </div>

            <div class="col">
              <div
                class="card border-danger"
                style="border-width: 2px">
                <div class="card-body">
                  <span class="font-emoji">
                    ‚ùå
                  </span>
                  <strong>Executed</strong>
                </div>
              </div>
            </div>

            <div class="col">
              <div
                class="card border-danger"
                style="border-width: 2px">
                <div class="card-body">
                  <span class="font-emoji">
                    ‚ùå
                  </span>
                  <strong>Correct</strong>
                </div>
              </div>
            </div>
          </div>
          <pre><code class="language-fortran model-code">module m_longest_task

  implicit none

contains

  function longest_task(n, logs) result(employee_id)
    integer, intent(in) :: n
    integer, intent(in) :: logs(n, 2)
    integer :: employee_id
    integer :: i, j, id, leave_time, max_leave_time, max_id

    ! Initialize variables
    max_leave_time = 0
    max_id = 0

    ! Iterate over the logs
    do i = 1, n
      id = logs(i, 1)
      leave_time = logs(i, 2)

      ! If the leave time is greater than the current max leave time,
      ! update the max leave time and the employee id
      if (leave_time > max_leave_time) then
        max_leave_time = leave_time
        max_id = id
      end if
    end do

    ! Return the employee id with the longest leave time
    employee_id = max_id

  end function longest_task

end module m_longest_task

program p_longest_task
  use m_longest_task
  implicit none

  ! Test case 1
  print *, longest_task(10, &
      reshape([0, 3, 2, 5, 0, 9, 1, 15], [7, 2]))

  ! Test case 2
  print *, longest_task(26, &
      reshape([1, 1, 3, 7, 2, 12, 7, 17], [8, 2]))

  ! Test case 3
  print *, longest_task(2, &
      reshape([0, 10, 1, 20], [4, 2]))

end program p_longest_task
</code></pre>
           
          <div class="alert alert-danger" role="alert">
            <strong>stderr</strong>
            <pre>temp.f95:43:14:

   43 |       reshape([0, 3, 2, 5, 0, 9, 1, 15], [7, 2]))
      |              1
Error: Without padding, there are not enough elements in the intrinsic RESHAPE source at (1) to match the shape
temp.f95:47:14:

   47 |       reshape([1, 1, 3, 7, 2, 12, 7, 17], [8, 2]))
      |              1
Error: Without padding, there are not enough elements in the intrinsic RESHAPE source at (1) to match the shape
temp.f95:51:14:

   51 |       reshape([0, 10, 1, 20], [4, 2]))
      |              1
Error: Without padding, there are not enough elements in the intrinsic RESHAPE source at (1) to match the shape
</pre>
          </div>
          
        </div>
        <div
          class="tab-pane fade"
          id="python-tab-pane"
          role="tabpanel"
          aria-labelledby="python-tab"
          tabindex="0">
          <alert class="alert alert-info d-flex">
            <strong>üåê Data from online sources</strong>
          </alert>
          <pre><code class="language-python">def worker_with_longest_task(n, logs):
    result = 0
    max_time = logs[0][1] - 0

    for i in range(1, len(logs)):
        time = logs[i][1] - logs[i-1][1]
        if time &gt; max_time:
            max_time = time
            result = logs[i][0]

    return result
</code></pre>
<p>The algorithm iterates through the array <code>logs</code> one task at a time. For each task, the algorithm computes the time it took to complete the task by subtracting the leave time of the previous task from the leave time of the current task. We initialize the <code>max_time</code> with the first task duration and set the <code>result</code> to the ID of the first task worker.</p>
<p>During iteration, if the computed time for the current task is greater than the <code>max_time</code>, the algorithm updates the <code>max_time</code> to the current task's time and selects the worker of the current task as <code>result</code>.</p>
<p>After iterating through all tasks, the algorithm returns the worker ID in <code>result</code>, which is the worker that worked the task with the longest time. If there is a tie, the algorithm will return the smallest ID among them since we only update the <code>result</code> when we find a strictly greater time.</p>
        </div>
        <div
          class="tab-pane fade"
          id="cpp-tab-pane"
          role="tabpanel"
          aria-labelledby="cpp-tab"
          tabindex="0">
          <alert class="alert alert-info d-flex">
            <strong>üåê Data from online sources</strong>
          </alert>
          <pre><code class="language-cpp">int workerWithLongestTask(int n, vector&lt;vector&lt;int&gt;&gt;&amp; logs) {
    int result = 0;
    int max_time = logs[0][1] - 0;

    for (int i = 1; i &lt; logs.size(); ++i) {
        int time = logs[i][1] - logs[i-1][1];
        if (time &gt; max_time) {
            max_time = time;
            result = logs[i][0];
        }
    }
    return result;
}
</code></pre>
<p>The algorithm iterates through the array <code>logs</code> one task at a time. For each task, the algorithm computes the time it took to complete the task by subtracting the leave time of the previous task from the leave time of the current task. We initialize the <code>max_time</code> with the first task duration and set the <code>result</code> to the ID of the first task worker.</p>
<p>During iteration, if the computed time for the current task is greater than the <code>max_time</code>, the algorithm updates the <code>max_time</code> to the current task's time and selects the worker of the current task as <code>result</code>.</p>
<p>After iterating through all tasks, the algorithm returns the worker ID in <code>result</code>, which is the worker that worked the task with the longest time. If there is a tie, the algorithm will return the smallest ID among them since we only update the <code>result</code> when we find a strictly greater time.</p>
        </div>
      </div>
      <style>
        .model-code {
          max-height: 600px;
          overflow-y: auto;
        }

        .font-emoji {
          font-family: emoji;
        }
      </style>
    </div>
  </div>
</div>
<script>
  hljs.addPlugin(new CopyButtonPlugin());
  hljs.highlightAll();
</script>

  </body>
</html>