<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Fine-tuning CodeLlama-7B for Fortran Code Generation</title>
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/5.3.3/zephyr/bootstrap.min.css"
      integrity="sha512-CWXb9sx63+REyEBV/cte+dE1hSsYpJifb57KkqAXjsN3gZQt6phZt7e5RhgZrUbaNfCdtdpcqDZtuTEB+D3q2Q=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer" />
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@11.9.0/build/styles/atom-one-dark.min.css" />
    <link
      rel="stylesheet"
      href="https://unpkg.com/highlightjs-copy/dist/highlightjs-copy.min.css" />
    <script src="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@11.9.0/build/highlight.min.js"></script>
    <script src="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@11.9.0/build/languages/fortran.min.js"></script>
    <script src="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@11.9.0/build/languages/python.min.js"></script>
    <script src="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@11.9.0/build/languages/cpp.min.js"></script>
    <script src="https://unpkg.com/highlightjs-copy/dist/highlightjs-copy.min.js"></script>
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.min.js"
      integrity="sha384-BBtl+eGJRgqQAUMxJ7pMwbEyER4l1g+O15P+16Ep7Q9Q+zqX6gSbd85u4mG4QzX+"
      crossorigin="anonymous"></script>
  </head>
  <body>
    
<div class="container">
  <div class="row">
    <div class="col d-flex justify-content-between align-items-center">
      <h2>Number of Distinct Averages</h2>
      <div>
        <a href="/" class="btn btn-outline-primary me-2">
          üè†
        </a>
        <a
          href="/2460/"
          class="btn btn-outline-secondary me-2">
          ‚¨ÖÔ∏è
        </a>
        <a
          href="/2469/"
          class="btn btn-outline-secondary">
          ‚û°Ô∏è
        </a>
      </div>
    </div>
  </div>

  <div class="row">
    <div class="col">
      <div class="leetcode-problem-content card">
        <div class="card-body">
          <p>You are given a <strong>0-indexed</strong> integer array <code>nums</code> of <strong>even</strong> length.</p>
<p>As long as <code>nums</code> is <strong>not</strong> empty, you must repetitively:</p>
<ul>
<li>Find the minimum number in <code>nums</code> and remove it.</li>
<li>Find the maximum number in <code>nums</code> and remove it.</li>
<li>Calculate the average of the two removed numbers.</li>
</ul>
<p>The <strong>average</strong> of two numbers <code>a</code> and <code>b</code> is <code>(a + b) / 2</code>.</p>
<ul>
<li>For example, the average of <code>2</code> and <code>3</code> is <code>(2 + 3) / 2 = 2.5</code>.</li>
</ul>
<p>Return <em>the number of <strong>distinct</strong> averages calculated using the above process</em>.</p>
<p><strong>Note</strong> that when there is a tie for a minimum or maximum number, any can be removed.</p>
<p><strong>Example 1:</strong></p>
<p><strong>Input:</strong> nums = [4,1,4,0,3,5]
<strong>Output:</strong> 2
<strong>Explanation:</strong>
1. Remove 0 and 5, and the average is (0 + 5) / 2 = 2.5. Now, nums = [4,1,4,3].
2. Remove 1 and 4. The average is (1 + 4) / 2 = 2.5, and nums = [4,3].
3. Remove 3 and 4, and the average is (3 + 4) / 2 = 3.5.
Since there are 2 distinct numbers among 2.5, 2.5, and 3.5, we return 2.</p>
<p><strong>Example 2:</strong></p>
<p><strong>Input:</strong> nums = [1,100]
<strong>Output:</strong> 1
<strong>Explanation:</strong>
There is only one average to be calculated after removing 1 and 100, so we return 1.</p>
<p><strong>Constraints:</strong></p>
<ul>
<li><code>2 &lt;= nums.length &lt;= 100</code></li>
<li><code>nums.length</code> is even.</li>
<li><code>0 &lt;= nums[i] &lt;= 100</code></li>
</ul>
          <hr />
          <span class="fst-italic">
            Note: This problem is from
            <a
              href="https://leetcode.com/problems/number-of-distinct-averages/description/">LeetCode</a>.
          </span>
        </div>
      </div>
      <style>
        .leetcode-problem-content {
          max-height: 200px;
          overflow-y: auto;
        }
      </style>
    </div>
  </div>
  <div class="row">
    <div class="col-md-6">
      <ul class="nav nav-underline mb-2" id="myTab" role="tablist">
        <li class="nav-item" role="presentation">
          <button
            class="nav-link active"
            id="our-model-tab"
            data-bs-toggle="tab"
            data-bs-target="#our-model-tab-pane"
            type="button"
            role="tab"
            aria-controls="our-model-tab-pane"
            aria-selected="true">
            ü¶æ Our model
          </button>
        </li>
      </ul>
      <div class="tab-content" id="myTabContent">
        <div
          class="tab-pane fade show active"
          id="our-model-tab-pane"
          role="tabpanel"
          aria-labelledby="our-model-tab"
          tabindex="0">
          <div class="row mb-2">
            <div class="col">
              <div
                class="card border-success"
                style="border-width: 2px">
                <div class="card-body">
                  <span class="font-emoji">
                    ‚úÖ
                  </span>
                  <strong>Compiled</strong>
                </div>
              </div>
            </div>

            <div class="col">
              <div
                class="card border-danger"
                style="border-width: 2px">
                <div class="card-body">
                  <span class="font_emoji">
                    ‚ùå
                  </span>
                  <strong>Executed</strong>
                </div>
              </div>
            </div>

            <div class="col">
              <div
                class="card border-danger"
                style="border-width: 2px">
                <div class="card-body">
                  <span class="font-emoji">
                    ‚ùå
                  </span>
                  <strong>Correct</strong>
                </div>
              </div>
            </div>
          </div>
          <pre><code class="language-fortran model-code">program main
    implicit none

    integer :: i, j, k, n, m, min_idx, max_idx, avg
    integer, dimension(100) :: nums
    logical, dimension(100) :: used

    ! read input
    read *, n
    do i = 1, n
        read *, nums(i)
    end do

    ! solve problem
    m = 0
    do while (size(nums) > 0)
        ! find minimum
        min_idx = -1
        do i = 1, size(nums)
            if (min_idx == -1 .or. nums(i) < nums(min_idx)) then
                min_idx = i
            end if
        end do
        ! find maximum
        max_idx = -1
        do i = 1, size(nums)
            if (max_idx == -1 .or. nums(i) > nums(max_idx)) then
                max_idx = i
            end if
        end do
        ! calculate average
        avg = (nums(min_idx) + nums(max_idx)) / 2
        ! remove minimum and maximum
        used(min_idx) = .true.
        used(max_idx) = .true.
        nums(min_idx) = nums(size(nums))
        nums(max_idx) = nums(size(nums))
        nums(:) = nums(:) - 1
        ! count unique averages
        if (.not. any(used)) then
            m = m + 1
        else
            do i = 1, size(used)
                if (.not. used(i)) then
                    exit
                end if
            end do
            m = m + 1
        end if
    end do

    ! print output
    write (*, '(I0)') m

end program main</code></pre>

           
          <div class="alert alert-danger" role="alert">
            <strong>stderr</strong>
            <pre>At line 9 of file temp.f95 (unit = 5, file = 'stdin')
Fortran runtime error: End of file

Error termination. Backtrace:
#0  0x7e3dbab7f960 in ???
#1  0x7e3dbab804d9 in ???
#2  0x7e3dbadd417b in ???
#3  0x7e3dbadcd684 in ???
#4  0x7e3dbadce2aa in ???
#5  0x564d660171da in MAIN__
#6  0x564d660174b6 in main
</pre>
          </div>
          
        </div>
      </div>
    </div>
    <div class="col-md-6">
      <ul class="nav nav-underline mb-2" id="myTab" role="tablist">
        <li class="nav-item" role="presentation">
          <button
            class="nav-link active"
            id="codellama-tab"
            data-bs-toggle="tab"
            data-bs-target="#codellama-tab-pane"
            type="button"
            role="tab"
            aria-controls="codellama-tab-pane"
            aria-selected="true">
            ü¶ô CodeLlama-7B
          </button>
        </li>
        <li class="nav-item" role="presentation">
          <button
            class="nav-link"
            id="python-tab"
            data-bs-toggle="tab"
            data-bs-target="#python-tab-pane"
            type="button"
            role="tab"
            aria-controls="python-tab-pane"
            aria-selected="false">
            üêç Python
          </button>
        </li>
        <li class="nav-item" role="presentation">
          <button
            class="nav-link"
            id="cpp-tab"
            data-bs-toggle="tab"
            data-bs-target="#cpp-tab-pane"
            type="button"
            role="tab"
            aria-controls="cpp-tab-pane"
            aria-selected="false">
            ü§† C++
          </button>
        </li>
      </ul>
      <div class="tab-content" id="myTabContent">
        <div
          class="tab-pane fade show active"
          id="codellama-tab-pane"
          role="tabpanel"
          aria-labelledby="codellama-tab"
          tabindex="0">
          <div class="row mb-2">
            <div class="col">
              <div
                class="card border-danger"
                style="border-width: 2px">
                <div class="card-body">
                  <span class="font-emoji">
                    ‚ùå
                  </span>
                  <strong>Compiled</strong>
                </div>
              </div>
            </div>

            <div class="col">
              <div
                class="card border-danger"
                style="border-width: 2px">
                <div class="card-body">
                  <span class="font-emoji">
                    ‚ùå
                  </span>
                  <strong>Executed</strong>
                </div>
              </div>
            </div>

            <div class="col">
              <div
                class="card border-danger"
                style="border-width: 2px">
                <div class="card-body">
                  <span class="font-emoji">
                    ‚ùå
                  </span>
                  <strong>Correct</strong>
                </div>
              </div>
            </div>
          </div>
          <pre><code class="language-fortran model-code">module avg_of_min_max
    implicit none
    private
    public :: avg_of_min_max
contains
    function avg_of_min_max(nums) result(ans)
        integer, intent(in) :: nums(:)
        integer :: ans
        integer :: min_idx, max_idx, avg

        ans = 0
        do while (size(nums) > 0)
            min_idx = minloc(nums, 1)
            max_idx = maxloc(nums, 1)
            avg = (nums(min_idx) + nums(max_idx)) / 2
            ans = ans + 1
            nums(min_idx) = -1
            nums(max_idx) = -1
        end do
    end function avg_of_min_max
end module avg_of_min_max

program test_avg_of_min_max
    use avg_of_min_max
    implicit none
    integer, parameter :: nums1(4) = [4, 1, 4, 0, 3, 5]
    integer, parameter :: nums2(2) = [1, 100]
    integer :: ans1, ans2

    ans1 = avg_of_min_max(nums1)
    ans2 = avg_of_min_max(nums2)

    write (*,*) "Test 1:", ans1
    write (*,*) "Test 2:", ans2
end program test_avg_of_min_max
</code></pre>
           
          <div class="alert alert-danger" role="alert">
            <strong>stderr</strong>
            <pre>temp.f95:4:28:

    4 |     public :: avg_of_min_max
      |                            1
Error: PUBLIC attribute applied to MODULE avg_of_min_max at (1)
temp.f95:6:27:

    6 |     function avg_of_min_max(nums) result(ans)
      |                           1
Error: MODULE attribute of ‚Äòavg_of_min_max‚Äô conflicts with PROCEDURE attribute at (1)
temp.f95:7:38:

    7 |         integer, intent(in) :: nums(:)
      |                                      1
Error: Unexpected data declaration statement in CONTAINS section at (1)
temp.f95:8:22:

    8 |         integer :: ans
      |                      1
Error: Unexpected data declaration statement in CONTAINS section at (1)
temp.f95:9:40:

    9 |         integer :: min_idx, max_idx, avg
      |                                        1
Error: Unexpected data declaration statement in CONTAINS section at (1)
temp.f95:11:15:

   11 |         ans = 0
      |               1
Error: Unexpected assignment statement in CONTAINS section at (1)
temp.f95:12:33:

   12 |         do while (size(nums) > 0)
      |                                 1
Error: Unexpected DO statement in CONTAINS section at (1)
temp.f95:13:37:

   13 |             min_idx = minloc(nums, 1)
      |                                     1
Error: Unexpected assignment statement in CONTAINS section at (1)
temp.f95:14:37:

   14 |             max_idx = maxloc(nums, 1)
      |                                     1
Error: Unexpected assignment statement in CONTAINS section at (1)
temp.f95:15:53:

   15 |             avg = (nums(min_idx) + nums(max_idx)) / 2
      |                                                     1
Error: Unexpected assignment statement in CONTAINS section at (1)
temp.f95:16:25:

   16 |             ans = ans + 1
      |                         1
Error: Unexpected assignment statement in CONTAINS section at (1)
temp.f95:17:30:

   17 |             nums(min_idx) = -1
      |                              1
Error: Unexpected assignment statement in CONTAINS section at (1)
temp.f95:18:30:

   18 |             nums(max_idx) = -1
      |                              1
Error: Unexpected assignment statement in CONTAINS section at (1)
temp.f95:19:11:

   19 |         end do
      |           1
Error: Expecting END MODULE statement at (1)
temp.f95:20:7:

   20 |     end function avg_of_min_max
      |       1
Error: Expecting END MODULE statement at (1)
temp.f95:24:9:

   24 |     use avg_of_min_max
      |         1
Fatal Error: Cannot open module file ‚Äòavg_of_min_max.mod‚Äô for reading at (1): No such file or directory
compilation terminated.
</pre>
          </div>
          
        </div>
        <div
          class="tab-pane fade"
          id="python-tab-pane"
          role="tabpanel"
          aria-labelledby="python-tab"
          tabindex="0">
          <alert class="alert alert-info d-flex">
            <strong>üåê Data from online sources</strong>
          </alert>
          <pre><code class="language-python">def distinctAverages(nums):
    averages = set()
    nums.sort()
    n = len(nums)
    for i in range(n // 2):
        averages.add((nums[i] + nums[n - 1 - i]) / 2.0)
    return len(averages)
</code></pre>
<ol>
<li>Initialize an empty sets called 'averages' to store the distinct averages.</li>
<li>Sort the input array 'nums'.</li>
<li>Iterate through the first half of the sorted array and calculate the average of the current number and its counterpart from the other end, then add this average to the 'averages' set.</li>
<li>Return the size of the 'averages' set which represents the distinct averages calculated using the given process.</li>
</ol>
        </div>
        <div
          class="tab-pane fade"
          id="cpp-tab-pane"
          role="tabpanel"
          aria-labelledby="cpp-tab"
          tabindex="0">
          <alert class="alert alert-info d-flex">
            <strong>üåê Data from online sources</strong>
          </alert>
          <pre><code class="language-cpp">int distinctAverages(vector&lt;int&gt;&amp; nums) {
    set&lt;double&gt; averages;
    sort(nums.begin(), nums.end());
    int n = nums.size();
    for (int i = 0; i &lt; n / 2; i++) {
        averages.insert((nums[i] + nums[n - 1 - i]) / 2.0);
    }
    return averages.size();
}
</code></pre>
<ol>
<li>Initialize an empty sets called 'averages' to store the distinct averages.</li>
<li>Sort the input array 'nums'.</li>
<li>Iterate through the first half of the sorted array and calculate the average of the current number and its counterpart from the other end, then add this average to the 'averages' set.</li>
<li>Return the size of the 'averages' set which represents the distinct averages calculated using the given process.</li>
</ol>
        </div>
      </div>
      <style>
        .model-code {
          max-height: 600px;
          overflow-y: auto;
        }

        .font-emoji {
          font-family: emoji;
        }
      </style>
    </div>
  </div>
</div>
<script>
  hljs.addPlugin(new CopyButtonPlugin());
  hljs.highlightAll();
</script>

  </body>
</html>