<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Fine-tuning CodeLlama-7B for Fortran Code Generation</title>
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/5.3.3/zephyr/bootstrap.min.css"
      integrity="sha512-CWXb9sx63+REyEBV/cte+dE1hSsYpJifb57KkqAXjsN3gZQt6phZt7e5RhgZrUbaNfCdtdpcqDZtuTEB+D3q2Q=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer" />
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@11.9.0/build/styles/atom-one-dark.min.css" />
    <link
      rel="stylesheet"
      href="https://unpkg.com/highlightjs-copy/dist/highlightjs-copy.min.css" />
    <script src="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@11.9.0/build/highlight.min.js"></script>
    <script src="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@11.9.0/build/languages/fortran.min.js"></script>
    <script src="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@11.9.0/build/languages/python.min.js"></script>
    <script src="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@11.9.0/build/languages/cpp.min.js"></script>
    <script src="https://unpkg.com/highlightjs-copy/dist/highlightjs-copy.min.js"></script>
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.min.js"
      integrity="sha384-BBtl+eGJRgqQAUMxJ7pMwbEyER4l1g+O15P+16Ep7Q9Q+zqX6gSbd85u4mG4QzX+"
      crossorigin="anonymous"></script>
  </head>
  <body>
    
<div class="container">
  <div class="row">
    <div class="col d-flex justify-content-between align-items-center">
      <h2>Maximum Enemy Forts That Can Be Captured</h2>
      <div>
        <a href="/" class="btn btn-outline-primary me-2">
          üè†
        </a>
        <a
          href="/2506/"
          class="btn btn-outline-secondary me-2">
          ‚¨ÖÔ∏è
        </a>
        <a
          href="/2515/"
          class="btn btn-outline-secondary">
          ‚û°Ô∏è
        </a>
      </div>
    </div>
  </div>

  <div class="row">
    <div class="col">
      <div class="leetcode-problem-content card">
        <div class="card-body">
          <p>You are given a <strong>0-indexed</strong> integer array <code>forts</code> of length <code>n</code> representing the positions of several forts. <code>forts[i]</code> can be <code>-1</code>, <code>0</code>, or <code>1</code> where:</p>
<ul>
<li><code>-1</code> represents there is <strong>no fort</strong> at the <code>ith</code> position.</li>
<li><code>0</code> indicates there is an <strong>enemy</strong> fort at the <code>ith</code> position.</li>
<li><code>1</code> indicates the fort at the <code>ith</code> the position is under your command.</li>
</ul>
<p>Now you have decided to move your army from one of your forts at position <code>i</code> to an empty position <code>j</code> such that:</p>
<ul>
<li><code>0 &lt;= i, j &lt;= n - 1</code></li>
<li>The army travels over enemy forts <strong>only</strong>. Formally, for all <code>k</code> where <code>min(i,j) &lt; k &lt; max(i,j)</code>, <code>forts[k] == 0.</code></li>
</ul>
<p>While moving the army, all the enemy forts that come in the way are <strong>captured</strong>.</p>
<p>Return <em>the <strong>maximum</strong> number of enemy forts that can be captured</em>. In case it is <strong>impossible</strong> to move your army, or you do not have any fort under your command, return <code>0</code><em>.</em></p>
<p><strong>Example 1:</strong></p>
<p><strong>Input:</strong> forts = [1,0,0,-1,0,0,0,0,1]
<strong>Output:</strong> 4
<strong>Explanation:</strong>
- Moving the army from position 0 to position 3 captures 2 enemy forts, at 1 and 2.
- Moving the army from position 8 to position 3 captures 4 enemy forts.
Since 4 is the maximum number of enemy forts that can be captured, we return 4.</p>
<p><strong>Example 2:</strong></p>
<p><strong>Input:</strong> forts = [0,0,1,-1]
<strong>Output:</strong> 0
<strong>Explanation:</strong> Since no enemy fort can be captured, 0 is returned.</p>
<p><strong>Constraints:</strong></p>
<ul>
<li><code>1 &lt;= forts.length &lt;= 1000</code></li>
<li><code>-1 &lt;= forts[i] &lt;= 1</code></li>
</ul>
          <hr />
          <span class="fst-italic">
            Note: This problem is from
            <a
              href="https://leetcode.com/problems/maximum-enemy-forts-that-can-be-captured/description/">LeetCode</a>.
          </span>
        </div>
      </div>
      <style>
        .leetcode-problem-content {
          max-height: 200px;
          overflow-y: auto;
        }
      </style>
    </div>
  </div>
  <div class="row">
    <div class="col-md-6">
      <ul class="nav nav-underline mb-2" id="myTab" role="tablist">
        <li class="nav-item" role="presentation">
          <button
            class="nav-link active"
            id="our-model-tab"
            data-bs-toggle="tab"
            data-bs-target="#our-model-tab-pane"
            type="button"
            role="tab"
            aria-controls="our-model-tab-pane"
            aria-selected="true">
            ü¶æ Our model
          </button>
        </li>
      </ul>
      <div class="tab-content" id="myTabContent">
        <div
          class="tab-pane fade show active"
          id="our-model-tab-pane"
          role="tabpanel"
          aria-labelledby="our-model-tab"
          tabindex="0">
          <div class="row mb-2">
            <div class="col">
              <div
                class="card border-danger"
                style="border-width: 2px">
                <div class="card-body">
                  <span class="font-emoji">
                    ‚ùå
                  </span>
                  <strong>Compiled</strong>
                </div>
              </div>
            </div>

            <div class="col">
              <div
                class="card border-danger"
                style="border-width: 2px">
                <div class="card-body">
                  <span class="font_emoji">
                    ‚ùå
                  </span>
                  <strong>Executed</strong>
                </div>
              </div>
            </div>

            <div class="col">
              <div
                class="card border-danger"
                style="border-width: 2px">
                <div class="card-body">
                  <span class="font-emoji">
                    ‚ùå
                  </span>
                  <strong>Correct</strong>
                </div>
              </div>
            </div>
          </div>
          <pre><code class="language-fortran model-code">program main
    implicit none

    integer, parameter :: n = 9
    integer, dimension(n) :: forts
    integer :: i, j, k, max_enemies

    ! Example 1
    forts = [-1, 0, 0, -1, 0, 0, 0, 0, 1]
    write(*,*) "Example 1"
    write(*,*) "Forts:", forts
    call solve(forts, i, j, k, max_enemies)
    write(*,*) "Max enemies:", max_enemies

    ! Example 2
    forts = [0, 0, 1, -1]
    write(*,*) "Example 2"
    write(*,*) "Forts:", forts
    call solve(forts, i, j, k, max_enemies)
    write(*,*) "Max enemies:", max_enemies

contains

    subroutine solve(forts, i, j, k, max_enemies)
        implicit none
        integer, intent(in) :: forts(:)
        integer, intent(out) :: i, j, k, max_enemies
        logical :: found_empty

        ! Initialize variables
        i = 0
        j = 0
        k = 0
        max_enemies = 0
        found_empty = .false.

        ! Loop through the forts
        do while (i /= n)
            if (forts(i) == 0) then
                ! Enemy fort found
                max_enemies = max(max_enemies, k - i + 1)
            else if (forts(i) == 1) then
                ! Your fort found
                if (.not. found_empty) then
                    ! Found an empty position
                    j = i
                    found_empty = .true.
                end if
            end if

            ! Move to next fort
            i = i + 1
        end do

        ! Check if we found an empty position
        if (found_empty) then
            ! Move the army
            do while (i /= j)
                if (forts(i) == 0) then
                    ! Enemy fort found
                    max_enemies = max(max_enemies, k - i + 1)
                end if

                ! Move to next fort
                i = i + 1
            end do
        end if
    end subroutine solve
end program main</code></pre>

           
          <div class="alert alert-danger" role="alert">
            <strong>stderr</strong>
            <pre>temp.f95:16:4:

   16 |     forts = [0, 0, 1, -1]
      |    1
Error: Different shape for array assignment at (1) on dimension 1 (9 and 4)
</pre>
          </div>
          
        </div>
      </div>
    </div>
    <div class="col-md-6">
      <ul class="nav nav-underline mb-2" id="myTab" role="tablist">
        <li class="nav-item" role="presentation">
          <button
            class="nav-link active"
            id="codellama-tab"
            data-bs-toggle="tab"
            data-bs-target="#codellama-tab-pane"
            type="button"
            role="tab"
            aria-controls="codellama-tab-pane"
            aria-selected="true">
            ü¶ô CodeLlama-7B
          </button>
        </li>
        <li class="nav-item" role="presentation">
          <button
            class="nav-link"
            id="python-tab"
            data-bs-toggle="tab"
            data-bs-target="#python-tab-pane"
            type="button"
            role="tab"
            aria-controls="python-tab-pane"
            aria-selected="false">
            üêç Python
          </button>
        </li>
        <li class="nav-item" role="presentation">
          <button
            class="nav-link"
            id="cpp-tab"
            data-bs-toggle="tab"
            data-bs-target="#cpp-tab-pane"
            type="button"
            role="tab"
            aria-controls="cpp-tab-pane"
            aria-selected="false">
            ü§† C++
          </button>
        </li>
      </ul>
      <div class="tab-content" id="myTabContent">
        <div
          class="tab-pane fade show active"
          id="codellama-tab-pane"
          role="tabpanel"
          aria-labelledby="codellama-tab"
          tabindex="0">
          <div class="row mb-2">
            <div class="col">
              <div
                class="card border-success"
                style="border-width: 2px">
                <div class="card-body">
                  <span class="font-emoji">
                    ‚úÖ
                  </span>
                  <strong>Compiled</strong>
                </div>
              </div>
            </div>

            <div class="col">
              <div
                class="card border-danger"
                style="border-width: 2px">
                <div class="card-body">
                  <span class="font-emoji">
                    ‚ùå
                  </span>
                  <strong>Executed</strong>
                </div>
              </div>
            </div>

            <div class="col">
              <div
                class="card border-danger"
                style="border-width: 2px">
                <div class="card-body">
                  <span class="font-emoji">
                    ‚ùå
                  </span>
                  <strong>Correct</strong>
                </div>
              </div>
            </div>
          </div>
          <pre><code class="language-fortran model-code">program capture_enemy_forts
      implicit none

      integer, parameter :: n = 1000
      integer :: forts(n)
      integer :: i, j, k, max_enemy_forts

      read(*,*) forts

      max_enemy_forts = 0

      do i = 0, n - 1
          do j = i + 1, n - 1
              if (forts(i) == 0 .and. forts(j) == 0) then
                  do k = min(i, j) + 1, max(i, j) - 1
                      if (forts(k) == 0) then
                          max_enemy_forts = max_enemy_forts + 1
                      end if
                  end do
              end if
          end do
      end do

      write(*,*) max_enemy_forts

      end program capture_enemy_forts
</code></pre>
           
          <div class="alert alert-danger" role="alert">
            <strong>stderr</strong>
            <pre>At line 8 of file temp.f95 (unit = 5, file = 'stdin')
Fortran runtime error: End of file

Error termination. Backtrace:
#0  0x788f2dceb960 in ???
#1  0x788f2dcec4d9 in ???
#2  0x788f2df4017b in ???
#3  0x788f2df39684 in ???
#4  0x788f2df3a2aa in ???
#5  0x788f2df3fb7a in ???
#6  0x568a42f29282 in MAIN__
#7  0x568a42f29419 in main
</pre>
          </div>
          
        </div>
        <div
          class="tab-pane fade"
          id="python-tab-pane"
          role="tabpanel"
          aria-labelledby="python-tab"
          tabindex="0">
          <alert class="alert alert-info d-flex">
            <strong>üåê Data from online sources</strong>
          </alert>
          <pre><code class="language-python">def max_captured_forts(forts):
    n = len(forts)
    max_capture = 0
    for i in range(n):
        if forts[i] == 1:
            for j in range(i+1, n):
                if forts[j] != -1:
                    capture = sum(1 for k in range(i+1, j) if forts[k] == 0)
                    if forts[j] == 1:
                        max_capture = max(max_capture, capture)
    return max_capture
</code></pre>
<pre><code>For each of our fort (1), we try to move our army to another our fort (1) through enemy forts (0). For each pair of our forts, we count how many enemy forts we can capture in between our forts. We are only interested in the pair that captures the maximum number of enemy forts.
</code></pre>
<ol>
<li>Iterate through each element in the array.</li>
<li>If the current fort is our fort (1), we iterate through the rest of the elements.</li>
<li>If the next element <code>j</code> is not an empty position (-1), we count the number of enemy forts we can capture.</li>
<li>If <code>forts[j]</code> is equal to 1, it means it's our fort, and we update the maximum number of captures.</li>
<li>After iterating through all elements, return the maximum number of captures.</li>
</ol>
        </div>
        <div
          class="tab-pane fade"
          id="cpp-tab-pane"
          role="tabpanel"
          aria-labelledby="cpp-tab"
          tabindex="0">
          <alert class="alert alert-info d-flex">
            <strong>üåê Data from online sources</strong>
          </alert>
          <pre><code class="language-cpp">int maxCapturedForts(vector&lt;int&gt;&amp; forts) {
    int n = forts.size();
    int maxCapture = 0;
    for(int i = 0; i &lt; n; i++) {
        if(forts[i] == 1) {
            for(int j = i + 1; j &lt; n; j++) {
                if(forts[j] != -1) {
                    int capture = 0;
                    for(int k = i + 1; k &lt; j; k++) {
                        if(forts[k] == 0) capture++;
                    }
                    if(forts[j] == 1) maxCapture = max(maxCapture, capture);
                }
            }
        }
    }
    return maxCapture;
}
</code></pre>
<pre><code>For each of our fort (1), we try to move our army to another our fort (1) through enemy forts (0). For each pair of our forts, we count how many enemy forts we can capture in between our forts. We are only interested in the pair that captures the maximum number of enemy forts.
</code></pre>
<ol>
<li>Iterate through each element in the array.</li>
<li>If the current fort is our fort (1), we iterate through the rest of the elements.</li>
<li>If the next element <code>j</code> is not an empty position (-1), we count the number of enemy forts we can capture.</li>
<li>If <code>forts[j]</code> is equal to 1, it means it's our fort, and we update the maximum number of captures.</li>
<li>After iterating through all elements, return the maximum number of captures.</li>
</ol>
        </div>
      </div>
      <style>
        .model-code {
          max-height: 600px;
          overflow-y: auto;
        }

        .font-emoji {
          font-family: emoji;
        }
      </style>
    </div>
  </div>
</div>
<script>
  hljs.addPlugin(new CopyButtonPlugin());
  hljs.highlightAll();
</script>

  </body>
</html>