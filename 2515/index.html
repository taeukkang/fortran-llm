<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Fine-tuning CodeLlama-7B for Fortran Code Generation</title>
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/5.3.3/zephyr/bootstrap.min.css"
      integrity="sha512-CWXb9sx63+REyEBV/cte+dE1hSsYpJifb57KkqAXjsN3gZQt6phZt7e5RhgZrUbaNfCdtdpcqDZtuTEB+D3q2Q=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer" />
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@11.9.0/build/styles/atom-one-dark.min.css" />
    <link
      rel="stylesheet"
      href="https://unpkg.com/highlightjs-copy/dist/highlightjs-copy.min.css" />
    <script src="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@11.9.0/build/highlight.min.js"></script>
    <script src="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@11.9.0/build/languages/fortran.min.js"></script>
    <script src="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@11.9.0/build/languages/python.min.js"></script>
    <script src="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@11.9.0/build/languages/cpp.min.js"></script>
    <script src="https://unpkg.com/highlightjs-copy/dist/highlightjs-copy.min.js"></script>
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.min.js"
      integrity="sha384-BBtl+eGJRgqQAUMxJ7pMwbEyER4l1g+O15P+16Ep7Q9Q+zqX6gSbd85u4mG4QzX+"
      crossorigin="anonymous"></script>
  </head>
  <body>
    
<div class="container">
  <div class="row">
    <div class="col d-flex justify-content-between align-items-center">
      <h2>Shortest Distance to Target String in a Circular Array</h2>
      <div>
        <a href="/fortran-llm/" class="btn btn-outline-primary me-2">
          üè†
        </a>
        <a
          href="/fortran-llm/2511/"
          class="btn btn-outline-secondary me-2">
          ‚¨ÖÔ∏è
        </a>
        <a
          href="/fortran-llm/2520/"
          class="btn btn-outline-secondary">
          ‚û°Ô∏è
        </a>
      </div>
    </div>
  </div>

  <div class="row">
    <div class="col">
      <div class="leetcode-problem-content card">
        <div class="card-body">
          <p>You are given a <strong>0-indexed</strong> <strong>circular</strong> string array <code>words</code> and a string <code>target</code>. A <strong>circular array</strong> means that the array's end connects to the array's beginning.</p>
<ul>
<li>Formally, the next element of <code>words[i]</code> is <code>words[(i + 1) % n]</code> and the previous element of <code>words[i]</code> is <code>words[(i - 1 + n) % n]</code>, where <code>n</code> is the length of <code>words</code>.</li>
</ul>
<p>Starting from <code>startIndex</code>, you can move to either the next word or the previous word with <code>1</code> step at a time.</p>
<p>Return <em>the <strong>shortest</strong> distance needed to reach the string</em> <code>target</code>. If the string <code>target</code> does not exist in <code>words</code>, return <code>-1</code>.</p>
<p><strong>Example 1:</strong></p>
<p><strong>Input:</strong> words = [ "hello ", "i ", "am ", "leetcode ", "hello "], target =  "hello ", startIndex = 1
<strong>Output:</strong> 1
<strong>Explanation:</strong> We start from index 1 and can reach  "hello " by
- moving 3 units to the right to reach index 4.
- moving 2 units to the left to reach index 4.
- moving 4 units to the right to reach index 0.
- moving 1 unit to the left to reach index 0.
The shortest distance to reach  "hello " is 1.</p>
<p><strong>Example 2:</strong></p>
<p><strong>Input:</strong> words = [ "a ", "b ", "leetcode "], target =  "leetcode ", startIndex = 0
<strong>Output:</strong> 1
<strong>Explanation:</strong> We start from index 0 and can reach  "leetcode " by
- moving 2 units to the right to reach index 3.
- moving 1 unit to the left to reach index 3.
The shortest distance to reach  "leetcode " is 1.</p>
<p><strong>Example 3:</strong></p>
<p><strong>Input:</strong> words = [ "i ", "eat ", "leetcode "], target =  "ate ", startIndex = 0
<strong>Output:</strong> -1
<strong>Explanation:</strong> Since  "ate " does not exist in <code>words</code>, we return -1.</p>
<p><strong>Constraints:</strong></p>
<ul>
<li><code>1 &lt;= words.length &lt;= 100</code></li>
<li><code>1 &lt;= words[i].length &lt;= 100</code></li>
<li><code>words[i]</code> and <code>target</code> consist of only lowercase English letters.</li>
<li><code>0 &lt;= startIndex &lt; words.length</code></li>
</ul>
          <hr />
          <span class="fst-italic">
            Note: This problem is from
            <a
              href="https://leetcode.com/problems/shortest-distance-to-target-string-in-a-circular-array/description/">LeetCode</a>.
          </span>
        </div>
      </div>
      <style>
        .leetcode-problem-content {
          max-height: 200px;
          overflow-y: auto;
        }
      </style>
    </div>
  </div>
  <div class="row">
    <div class="col-md-6">
      <ul class="nav nav-underline mb-2" id="myTab" role="tablist">
        <li class="nav-item" role="presentation">
          <button
            class="nav-link active"
            id="our-model-tab"
            data-bs-toggle="tab"
            data-bs-target="#our-model-tab-pane"
            type="button"
            role="tab"
            aria-controls="our-model-tab-pane"
            aria-selected="true">
            ü¶æ Our model
          </button>
        </li>
      </ul>
      <div class="tab-content" id="myTabContent">
        <div
          class="tab-pane fade show active"
          id="our-model-tab-pane"
          role="tabpanel"
          aria-labelledby="our-model-tab"
          tabindex="0">
          <div class="row mb-2">
            <div class="col">
              <div
                class="card border-danger"
                style="border-width: 2px">
                <div class="card-body">
                  <span class="font-emoji">
                    ‚ùå
                  </span>
                  <strong>Compiled</strong>
                </div>
              </div>
            </div>

            <div class="col">
              <div
                class="card border-danger"
                style="border-width: 2px">
                <div class="card-body">
                  <span class="font_emoji">
                    ‚ùå
                  </span>
                  <strong>Executed</strong>
                </div>
              </div>
            </div>

            <div class="col">
              <div
                class="card border-danger"
                style="border-width: 2px">
                <div class="card-body">
                  <span class="font-emoji">
                    ‚ùå
                  </span>
                  <strong>Correct</strong>
                </div>
              </div>
            </div>
          </div>
          <pre><code class="language-fortran model-code">program main
    implicit none

    integer :: i, j, k, l, m, n
    character(len=100), dimension(:), allocatable :: words
    character(len=100) :: target
    integer :: startIndex
    integer :: result

    ! Examples
    allocate(words(5))
    words(1) = 'hello '
    words(2) = 'i '
    words(3) = 'am '
    words(4) = 'leetcode '
    words(5) = 'hello '
    target = 'hello '
    startIndex = 1
    result = shortestDistance(words, target, startIndex)
    write(*,*) 'Example 1:'
    write(*,*) 'words = ', words
    write(*,*) 'target = ', target
    write(*,*) 'startIndex = ', startIndex
    write(*,*) 'result = ', result

    deallocate(words)

    allocate(words(3))
    words(1) = 'a '
    words(2) = 'b '
    words(3) = 'leetcode '
    target = 'leetcode '
    startIndex = 0
    result = shortestDistance(words, target, startIndex)
    write(*,*) 'Example 2:'
    write(*,*) 'words = ', words
    write(*,*) 'target = ', target
    write(*,*) 'startIndex = ', startIndex
    write(*,*) 'result = ', result

    deallocate(words)

    allocate(words(3))
    words(1) = 'i '
    words(2) = 'eat '
    words(3) = 'leetcode '
    target = 'ate '
    startIndex = 0
    result = shortestDistance(words, target, startIndex)
    write(*,*) 'Example 3:'
    write(*,*) 'words = ', words
    write(*,*) 'target = ', target
    write(*,*) 'startIndex = ', startIndex
    write(*,*) 'result = ', result

contains

    function shortestDistance(words, target, startIndex) result(res)
        implicit none
        character(len=*), dimension(:), intent(in) :: words
        character(len=*), intent(in) :: target
        integer, intent(in) :: startIndex
        integer :: res

        integer :: i, j, k, l, m, n
        logical :: found

        res = -1
        found = .false.
        do i = 1, size(words)
            if (words(i) == target) then
                found = .true.
                exit
            end if
        end do

        if (.not. found) return

        res = 0
        do while (.true.)
            if (words(startIndex) == target) then
                exit
            end if

            if (startIndex == 0) then
                startIndex = size(words)
            else
                startIndex = startIndex - 1
            end if

            res = res + 1
        end do

    end function shortestDistance

end program main</code></pre>

           
          <div class="alert alert-danger" role="alert">
            <strong>stderr</strong>
            <pre>temp.f95:86:16:

   86 |                 startIndex = size(words)
      |                1
Error: Dummy argument ‚Äòstartindex‚Äô with INTENT(IN) in variable definition context (assignment) at (1)
temp.f95:88:16:

   88 |                 startIndex = startIndex - 1
      |                1
Error: Dummy argument ‚Äòstartindex‚Äô with INTENT(IN) in variable definition context (assignment) at (1)
</pre>
          </div>
          
        </div>
      </div>
    </div>
    <div class="col-md-6">
      <ul class="nav nav-underline mb-2" id="myTab" role="tablist">
        <li class="nav-item" role="presentation">
          <button
            class="nav-link active"
            id="codellama-tab"
            data-bs-toggle="tab"
            data-bs-target="#codellama-tab-pane"
            type="button"
            role="tab"
            aria-controls="codellama-tab-pane"
            aria-selected="true">
            ü¶ô CodeLlama-7B
          </button>
        </li>
        <li class="nav-item" role="presentation">
          <button
            class="nav-link"
            id="python-tab"
            data-bs-toggle="tab"
            data-bs-target="#python-tab-pane"
            type="button"
            role="tab"
            aria-controls="python-tab-pane"
            aria-selected="false">
            üêç Python
          </button>
        </li>
        <li class="nav-item" role="presentation">
          <button
            class="nav-link"
            id="cpp-tab"
            data-bs-toggle="tab"
            data-bs-target="#cpp-tab-pane"
            type="button"
            role="tab"
            aria-controls="cpp-tab-pane"
            aria-selected="false">
            ü§† C++
          </button>
        </li>
      </ul>
      <div class="tab-content" id="myTabContent">
        <div
          class="tab-pane fade show active"
          id="codellama-tab-pane"
          role="tabpanel"
          aria-labelledby="codellama-tab"
          tabindex="0">
          <div class="row mb-2">
            <div class="col">
              <div
                class="card border-danger"
                style="border-width: 2px">
                <div class="card-body">
                  <span class="font-emoji">
                    ‚ùå
                  </span>
                  <strong>Compiled</strong>
                </div>
              </div>
            </div>

            <div class="col">
              <div
                class="card border-danger"
                style="border-width: 2px">
                <div class="card-body">
                  <span class="font-emoji">
                    ‚ùå
                  </span>
                  <strong>Executed</strong>
                </div>
              </div>
            </div>

            <div class="col">
              <div
                class="card border-danger"
                style="border-width: 2px">
                <div class="card-body">
                  <span class="font-emoji">
                    ‚ùå
                  </span>
                  <strong>Correct</strong>
                </div>
              </div>
            </div>
          </div>
          <pre><code class="language-fortran model-code">module shortest_distance_to_target

implicit none

contains

function shortest_distance(words, target, start_index) result(distance)

! Declare the variables
integer, dimension(size(words)) :: next_index, prev_index
integer :: distance, n, i, j, k
character(len=*), dimension(size(words)) :: words
character(len=*) :: target
integer :: start_index

! Initialize the variables
n = size(words)
distance = -1

! Find the next and previous indices of the target word
do i = 1, n
    if (words(i) == target) then
        next_index(i) = (i + 1) % n
        prev_index(i) = (i - 1 + n) % n
        distance = 0
        exit
    end if
end do

! If the target word is not found, return -1
if (distance == -1) then
    return
end if

! Find the shortest distance to the target word
do i = 1, n
    do j = 1, n
        if (words(i) == words(j)) then
            do k = 1, n
                if (words(k) == target) then
                    distance = min(distance, abs(i - k) + abs(j - k))
                    exit
                end if
            end do
        end if
    end do
end do

end function shortest_distance

end module

! Test the shortest_distance function with the given examples
program test_shortest_distance

use shortest_distance_to_target

implicit none

! Declare the variables
integer, parameter :: n = 5
character(len=10), dimension(n) :: words
character(len=10) :: target
integer :: start_index, distance

! Test case 1:
words = ["hello ", "i ", "am ", "leetcode ", "hello "]
target = "hello "
start_index = 1
distance = shortest_distance(words, target, start_index)
write (*,*) "Test case 1: ", distance

! Test case 2:
words = ["a ", "b ", "leetcode "]
target = "leetcode "
start_index = 0
distance = shortest_distance(words, target, start_index)
write (*,*) "Test case 2: ", distance

! Test case 3:
words = ["i ", "eat ", "leetcode "]
target = "ate "
start_index = 0
distance = shortest_distance(words, target, start_index)
write (*,*) "Test case 3: ", distance

end program
</code></pre>
           
          <div class="alert alert-danger" role="alert">
            <strong>stderr</strong>
            <pre>temp.f95:10:24:

   10 | integer, dimension(size(words)) :: next_index, prev_index
      |                        1
Error: Symbol ‚Äòwords‚Äô is used before it is typed at (1)
temp.f95:12:33:

   12 | character(len=*), dimension(size(words)) :: words
      |                                 1
Error: Symbol ‚Äòwords‚Äô is used before it is typed at (1)
temp.f95:7:32:

    7 | function shortest_distance(words, target, start_index) result(distance)
      |                                1
Error: Symbol ‚Äòwords‚Äô at (1) has no IMPLICIT type
temp.f95:22:8:

   22 |     if (words(i) == target) then
      |        1
Error: Function ‚Äòwords‚Äô at (1) has no IMPLICIT type
temp.f95:38:23:

   38 |         if (words(i) == words(j)) then
      |                       1
Error: Function ‚Äòwords‚Äô at (1) has no IMPLICIT type
temp.f95:40:20:

   40 |                 if (words(k) == target) then
      |                    1
Error: Function ‚Äòwords‚Äô at (1) has no IMPLICIT type
temp.f95:56:5:

   56 | use shortest_distance_to_target
      |     1
Fatal Error: Cannot open module file ‚Äòshortest_distance_to_target.mod‚Äô for reading at (1): No such file or directory
compilation terminated.
</pre>
          </div>
          
        </div>
        <div
          class="tab-pane fade"
          id="python-tab-pane"
          role="tabpanel"
          aria-labelledby="python-tab"
          tabindex="0">
          <alert class="alert alert-info d-flex">
            <strong>üåê Data from online sources</strong>
          </alert>
          <pre><code class="language-python">def shortest_distance(words, target, startIndex):
    n = len(words)
    left, right, i = 0, 0, startIndex
    while True:
        if words[i] == target:
            return min(left, right)
        left += 1
        right += 1
        i = (i + 1) % n
        if left == n:
            break
    return -1
</code></pre>
<p>The algorithm initializes the variables left, right, and i to count the minimum steps taken to reach the target string. It starts searching from the startIndex and iterates in a circular manner with the help of the modulo operator. When the word at the current index i matches the target, the minimum of left and right is returned as the shortest distance. If no matching word is found after the entire traversal, the algorithm returns -1. The reason for maintaining both left and right counters is that we are allowed to move in both directions (previous or next) from the startIndex. Both left and right counters are incremented in each iteration for every step taken during the search.</p>
<p>The code provided above is directly focused on solving the given problem, looping over until either the target is found or the traversal is complete, and in each language, the syntax is adapted to match the respective language conventions. The logic and algorithm stay the same across all languages.</p>
        </div>
        <div
          class="tab-pane fade"
          id="cpp-tab-pane"
          role="tabpanel"
          aria-labelledby="cpp-tab"
          tabindex="0">
          <alert class="alert alert-info d-flex">
            <strong>üåê Data from online sources</strong>
          </alert>
          <pre><code class="language-cpp">int shortest_distance(vector&lt;string&gt;&amp; words, string target, int startIndex) {
    int n = words.size();
    int left = 0, right = 0, i = startIndex;
    while (true) {
        if (words[i] == target) {
            return min(left, right);
        }
        left++;
        right++;
        i = (i + 1) % n;
        if (left == n) {
            break;
        }
    }
    return -1;
}
</code></pre>
<p>The algorithm initializes the variables left, right, and i to count the minimum steps taken to reach the target string. It starts searching from the startIndex and iterates in a circular manner with the help of the modulo operator. When the word at the current index i matches the target, the minimum of left and right is returned as the shortest distance. If no matching word is found after the entire traversal, the algorithm returns -1. The reason for maintaining both left and right counters is that we are allowed to move in both directions (previous or next) from the startIndex. Both left and right counters are incremented in each iteration for every step taken during the search.</p>
<p>The code provided above is directly focused on solving the given problem, looping over until either the target is found or the traversal is complete, and in each language, the syntax is adapted to match the respective language conventions. The logic and algorithm stay the same across all languages.</p>
        </div>
      </div>
      <style>
        .model-code {
          max-height: 600px;
          overflow-y: auto;
        }

        .font-emoji {
          font-family: emoji;
        }
      </style>
    </div>
  </div>
</div>
<script>
  hljs.addPlugin(new CopyButtonPlugin());
  hljs.highlightAll();
</script>

  </body>
</html>