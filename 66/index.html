<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Fine-tuning CodeLlama-7B for Fortran Code Generation</title>
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/5.3.3/zephyr/bootstrap.min.css"
      integrity="sha512-CWXb9sx63+REyEBV/cte+dE1hSsYpJifb57KkqAXjsN3gZQt6phZt7e5RhgZrUbaNfCdtdpcqDZtuTEB+D3q2Q=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer" />
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@11.9.0/build/styles/atom-one-dark.min.css" />
    <link
      rel="stylesheet"
      href="https://unpkg.com/highlightjs-copy/dist/highlightjs-copy.min.css" />
    <script src="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@11.9.0/build/highlight.min.js"></script>
    <script src="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@11.9.0/build/languages/fortran.min.js"></script>
    <script src="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@11.9.0/build/languages/python.min.js"></script>
    <script src="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@11.9.0/build/languages/cpp.min.js"></script>
    <script src="https://unpkg.com/highlightjs-copy/dist/highlightjs-copy.min.js"></script>
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.min.js"
      integrity="sha384-BBtl+eGJRgqQAUMxJ7pMwbEyER4l1g+O15P+16Ep7Q9Q+zqX6gSbd85u4mG4QzX+"
      crossorigin="anonymous"></script>
  </head>
  <body>
    
<div class="container">
  <div class="row">
    <div class="col d-flex justify-content-between align-items-center">
      <h2>Plus One</h2>
      <div>
        <a href="/" class="btn btn-outline-primary me-2">
          üè†
        </a>
        <a
          href="/58/"
          class="btn btn-outline-secondary me-2">
          ‚¨ÖÔ∏è
        </a>
        <a
          href="/67/"
          class="btn btn-outline-secondary">
          ‚û°Ô∏è
        </a>
      </div>
    </div>
  </div>

  <div class="row">
    <div class="col">
      <div class="leetcode-problem-content card">
        <div class="card-body">
          <p>You are given a <strong>large integer</strong> represented as an integer array <code>digits</code>, where each <code>digits[i]</code> is the <code>ith</code> digit of the integer. The digits are ordered from most significant to least significant in left-to-right order. The large integer does not contain any leading <code>0</code>'s.</p>
<p>Increment the large integer by one and return <em>the resulting array of digits</em>.</p>
<p><strong>Example 1:</strong></p>
<p><strong>Input:</strong> digits = [1,2,3]
<strong>Output:</strong> [1,2,4]
<strong>Explanation:</strong> The array represents the integer 123.
Incrementing by one gives 123 + 1 = 124.
Thus, the result should be [1,2,4].</p>
<p><strong>Example 2:</strong></p>
<p><strong>Input:</strong> digits = [4,3,2,1]
<strong>Output:</strong> [4,3,2,2]
<strong>Explanation:</strong> The array represents the integer 4321.
Incrementing by one gives 4321 + 1 = 4322.
Thus, the result should be [4,3,2,2].</p>
<p><strong>Example 3:</strong></p>
<p><strong>Input:</strong> digits = [9]
<strong>Output:</strong> [1,0]
<strong>Explanation:</strong> The array represents the integer 9.
Incrementing by one gives 9 + 1 = 10.
Thus, the result should be [1,0].</p>
<p><strong>Constraints:</strong></p>
<ul>
<li><code>1 &lt;= digits.length &lt;= 100</code></li>
<li><code>0 &lt;= digits[i] &lt;= 9</code></li>
<li><code>digits</code> does not contain any leading <code>0</code>'s.</li>
</ul>
          <hr />
          <span class="fst-italic">
            Note: This problem is from
            <a
              href="https://leetcode.com/problems/plus-one/description/">LeetCode</a>.
          </span>
        </div>
      </div>
      <style>
        .leetcode-problem-content {
          max-height: 200px;
          overflow-y: auto;
        }
      </style>
    </div>
  </div>
  <div class="row">
    <div class="col-md-6">
      <ul class="nav nav-underline mb-2" id="myTab" role="tablist">
        <li class="nav-item" role="presentation">
          <button
            class="nav-link active"
            id="our-model-tab"
            data-bs-toggle="tab"
            data-bs-target="#our-model-tab-pane"
            type="button"
            role="tab"
            aria-controls="our-model-tab-pane"
            aria-selected="true">
            ü¶æ Our model
          </button>
        </li>
      </ul>
      <div class="tab-content" id="myTabContent">
        <div
          class="tab-pane fade show active"
          id="our-model-tab-pane"
          role="tabpanel"
          aria-labelledby="our-model-tab"
          tabindex="0">
          <div class="row mb-2">
            <div class="col">
              <div
                class="card border-danger"
                style="border-width: 2px">
                <div class="card-body">
                  <span class="font-emoji">
                    ‚ùå
                  </span>
                  <strong>Compiled</strong>
                </div>
              </div>
            </div>

            <div class="col">
              <div
                class="card border-danger"
                style="border-width: 2px">
                <div class="card-body">
                  <span class="font_emoji">
                    ‚ùå
                  </span>
                  <strong>Executed</strong>
                </div>
              </div>
            </div>

            <div class="col">
              <div
                class="card border-danger"
                style="border-width: 2px">
                <div class="card-body">
                  <span class="font-emoji">
                    ‚ùå
                  </span>
                  <strong>Correct</strong>
                </div>
              </div>
            </div>
          </div>
          <pre><code class="language-fortran model-code">program main
    implicit none

    integer, parameter :: n = 100
    integer(kind=8) :: digits(n), result(n)

    ! Example 1
    digits = [1, 2, 3]
    call increment_large_integer(digits, result)
    print "(A,*(I1))", "Example 1: ", result

    ! Example 2
    digits = [4, 3, 2, 1]
    call increment_large_integer(digits, result)
    print "(A,*(I1))", "Example 2: ", result

    ! Example 3
    digits = [9]
    call increment_large_integer(digits, result)
    print "(A,*(I1))", "Example 3: ", result

contains

    subroutine increment_large_integer(digits, result)
        implicit none
        integer, intent(in) :: digits(:)
        integer, intent(out) :: result(:)
        integer :: i, carry

        carry = 1
        do i = size(digits), 1, -1
            if (carry == 0) exit
            result(i) = digits(i) + carry
            carry = 0
            if (result(i) >= 10) then
                result(i) = result(i) - 10
                carry = 1
            end if
        end do
        if (carry /= 0) then
            result(1:size(digits)) = digits(1:size(digits))
            result(size(digits)+1) = carry
        end if
    end subroutine increment_large_integer

end program main</code></pre>

           
          <div class="alert alert-danger" role="alert">
            <strong>stderr</strong>
            <pre>temp.f95:8:4:

    8 |     digits = [1, 2, 3]
      |    1
Error: Different shape for array assignment at (1) on dimension 1 (100 and 3)
temp.f95:9:48:

    9 |     call increment_large_integer(digits, result)
      |                                                1
Error: Type mismatch in argument ‚Äòdigits‚Äô at (1); passed INTEGER(8) to INTEGER(4)
temp.f95:13:4:

   13 |     digits = [4, 3, 2, 1]
      |    1
Error: Different shape for array assignment at (1) on dimension 1 (100 and 4)
temp.f95:14:48:

   14 |     call increment_large_integer(digits, result)
      |                                                1
Error: Type mismatch in argument ‚Äòdigits‚Äô at (1); passed INTEGER(8) to INTEGER(4)
temp.f95:18:4:

   18 |     digits = [9]
      |    1
Error: Different shape for array assignment at (1) on dimension 1 (100 and 1)
temp.f95:19:48:

   19 |     call increment_large_integer(digits, result)
      |                                                1
Error: Type mismatch in argument ‚Äòdigits‚Äô at (1); passed INTEGER(8) to INTEGER(4)
</pre>
          </div>
          
        </div>
      </div>
    </div>
    <div class="col-md-6">
      <ul class="nav nav-underline mb-2" id="myTab" role="tablist">
        <li class="nav-item" role="presentation">
          <button
            class="nav-link active"
            id="codellama-tab"
            data-bs-toggle="tab"
            data-bs-target="#codellama-tab-pane"
            type="button"
            role="tab"
            aria-controls="codellama-tab-pane"
            aria-selected="true">
            ü¶ô CodeLlama-7B
          </button>
        </li>
        <li class="nav-item" role="presentation">
          <button
            class="nav-link"
            id="python-tab"
            data-bs-toggle="tab"
            data-bs-target="#python-tab-pane"
            type="button"
            role="tab"
            aria-controls="python-tab-pane"
            aria-selected="false">
            üêç Python
          </button>
        </li>
        <li class="nav-item" role="presentation">
          <button
            class="nav-link"
            id="cpp-tab"
            data-bs-toggle="tab"
            data-bs-target="#cpp-tab-pane"
            type="button"
            role="tab"
            aria-controls="cpp-tab-pane"
            aria-selected="false">
            ü§† C++
          </button>
        </li>
      </ul>
      <div class="tab-content" id="myTabContent">
        <div
          class="tab-pane fade show active"
          id="codellama-tab-pane"
          role="tabpanel"
          aria-labelledby="codellama-tab"
          tabindex="0">
          <div class="row mb-2">
            <div class="col">
              <div
                class="card border-danger"
                style="border-width: 2px">
                <div class="card-body">
                  <span class="font-emoji">
                    ‚ùå
                  </span>
                  <strong>Compiled</strong>
                </div>
              </div>
            </div>

            <div class="col">
              <div
                class="card border-danger"
                style="border-width: 2px">
                <div class="card-body">
                  <span class="font-emoji">
                    ‚ùå
                  </span>
                  <strong>Executed</strong>
                </div>
              </div>
            </div>

            <div class="col">
              <div
                class="card border-danger"
                style="border-width: 2px">
                <div class="card-body">
                  <span class="font-emoji">
                    ‚ùå
                  </span>
                  <strong>Correct</strong>
                </div>
              </div>
            </div>
          </div>
          <pre><code class="language-fortran model-code">module IncrementLargeInteger
    implicit none
    private
    public :: increment_large_integer
contains
    function increment_large_integer(digits) result(result_digits)
        integer, intent(in) :: digits(:)
        integer :: result_digits(size(digits))
        integer :: carry

        ! Initialize carry to 1
        carry = 1

        ! Iterate over the digits in reverse order
        do i = size(digits), 1, -1
            ! Add the current digit to the carry
            result_digits(i) = digits(i) + carry

            ! If the result is greater than 9, subtract 9 and set carry to 1
            if (result_digits(i) > 9) then
                result_digits(i) = result_digits(i) - 9
                carry = 1
            ! If the result is less than or equal to 9, set carry to 0
            else
                carry = 0
            end if
        end do

        ! If the carry is still 1 after iterating over all digits,
        ! add a new digit to the front of the result
        if (carry == 1) then
            allocate(result_digits(size(digits) + 1))
            result_digits(1) = 1
            result_digits(2:) = digits
        end if
    end function increment_large_integer
end module IncrementLargeInteger

program test_increment_large_integer
    use IncrementLargeInteger
    implicit none
    integer, parameter :: example_1_digits(3) = [1, 2, 3]
    integer, parameter :: example_1_result(3) = [1, 2, 4]
    integer, parameter :: example_2_digits(4) = [4, 3, 2, 1]
    integer, parameter :: example_2_result(4) = [4, 3, 2, 2]
    integer, parameter :: example_3_digits(1) = [9]
    integer, parameter :: example_3_result(2) = [1, 0]

    integer :: digits(100)
    integer :: i

    digits = example_1_digits
    write (*, '(A, I0)') 'Example 1: ', increment_large_integer(digits)
    do i = 1, size(digits)
        write (*, '(I0)', advance='no') digits(i)
    end do
    write (*, *)

    digits = example_2_digits
    write (*, '(A, I0)') 'Example 2: ', increment_large_integer(digits)
    do i = 1, size(digits)
        write (*, '(I0)', advance='no') digits(i)
    end do
    write (*, *)

    digits = example_3_digits
    write (*, '(A, I0)') 'Example 3: ', increment_large_integer(digits)
    do i = 1, size(digits)
        write (*, '(I0)', advance='no') digits(i)
    end do
    write (*, *)
end program test_increment_large_integer
</code></pre>
           
          <div class="alert alert-danger" role="alert">
            <strong>stderr</strong>
            <pre>temp.f95:15:12:

   15 |         do i = size(digits), 1, -1
      |            1
Error: Symbol ‚Äòi‚Äô at (1) has no IMPLICIT type
temp.f95:32:21:

   32 |             allocate(result_digits(size(digits) + 1))
      |                     1
Error: Allocate-object at (1) must be ALLOCATABLE or a POINTER
temp.f95:40:9:

   40 |     use IncrementLargeInteger
      |         1
Fatal Error: Cannot open module file ‚Äòincrementlargeinteger.mod‚Äô for reading at (1): No such file or directory
compilation terminated.
</pre>
          </div>
          
        </div>
        <div
          class="tab-pane fade"
          id="python-tab-pane"
          role="tabpanel"
          aria-labelledby="python-tab"
          tabindex="0">
          <alert class="alert alert-info d-flex">
            <strong>üåê Data from online sources</strong>
          </alert>
          <pre><code class="language-python">def plusOne(digits: List[int]) -&gt; List[int]:
    n = len(digits)

    for i in range(n - 1, -1, -1):
        if digits[i] &lt; 9:
            digits[i] += 1
            return digits
        digits[i] = 0

    digits.insert(0, 1)
    return digits
</code></pre>
<pre><code>We start by iterating through the array from the least significant digit (rightmost) to the most significant digit (leftmost). In each iteration, we check whether the digit is less than 9. If the digit is less than 9, increment it and return the incremented array. If the digit is 9, we set it to 0 and continue the loop to the next most significant digit.
</code></pre>
<p>After the loop, if we haven't found any digit less than 9, that means we have a number like 9999...9 which needs to be incremented to 10000...0. So we add a 1 at the beginning of the array (the most significant digit). Finally, we return the incremented array.</p>
        </div>
        <div
          class="tab-pane fade"
          id="cpp-tab-pane"
          role="tabpanel"
          aria-labelledby="cpp-tab"
          tabindex="0">
          <alert class="alert alert-info d-flex">
            <strong>üåê Data from online sources</strong>
          </alert>
          <pre><code class="language-cpp">#include &lt;vector&gt;

std::vector&lt;int&gt; plusOne(std::vector&lt;int&gt;&amp; digits) {
    int n = digits.size();

    for(int i = n - 1; i &gt;= 0; i--) {
        if(digits[i] &lt; 9) {
            digits[i]++;
            return digits;
        }
        digits[i] = 0;
    }

    digits.insert(digits.begin(), 1);
    return digits;
}
</code></pre>
<pre><code>We start by iterating through the array from the least significant digit (rightmost) to the most significant digit (leftmost). In each iteration, we check whether the digit is less than 9. If the digit is less than 9, increment it and return the incremented array. If the digit is 9, we set it to 0 and continue the loop to the next most significant digit.
</code></pre>
<p>After the loop, if we haven't found any digit less than 9, that means we have a number like 9999...9 which needs to be incremented to 10000...0. So we add a 1 at the beginning of the array (the most significant digit). Finally, we return the incremented array.</p>
        </div>
      </div>
      <style>
        .model-code {
          max-height: 600px;
          overflow-y: auto;
        }

        .font-emoji {
          font-family: emoji;
        }
      </style>
    </div>
  </div>
</div>
<script>
  hljs.addPlugin(new CopyButtonPlugin());
  hljs.highlightAll();
</script>

  </body>
</html>