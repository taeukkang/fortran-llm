<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Fine-tuning CodeLlama-7B for Fortran Code Generation</title>
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/5.3.3/zephyr/bootstrap.min.css"
      integrity="sha512-CWXb9sx63+REyEBV/cte+dE1hSsYpJifb57KkqAXjsN3gZQt6phZt7e5RhgZrUbaNfCdtdpcqDZtuTEB+D3q2Q=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer" />
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@11.9.0/build/styles/atom-one-dark.min.css" />
    <link
      rel="stylesheet"
      href="https://unpkg.com/highlightjs-copy/dist/highlightjs-copy.min.css" />
    <script src="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@11.9.0/build/highlight.min.js"></script>
    <script src="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@11.9.0/build/languages/fortran.min.js"></script>
    <script src="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@11.9.0/build/languages/python.min.js"></script>
    <script src="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@11.9.0/build/languages/cpp.min.js"></script>
    <script src="https://unpkg.com/highlightjs-copy/dist/highlightjs-copy.min.js"></script>
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.min.js"
      integrity="sha384-BBtl+eGJRgqQAUMxJ7pMwbEyER4l1g+O15P+16Ep7Q9Q+zqX6gSbd85u4mG4QzX+"
      crossorigin="anonymous"></script>
  </head>
  <body>
    
<div class="container">
  <div class="row">
    <div class="col d-flex justify-content-between align-items-center">
      <h2>DI String Match</h2>
      <div>
        <a href="/" class="btn btn-outline-primary me-2">
          üè†
        </a>
        <a
          href="/941/"
          class="btn btn-outline-secondary me-2">
          ‚¨ÖÔ∏è
        </a>
        <a
          href="/944/"
          class="btn btn-outline-secondary">
          ‚û°Ô∏è
        </a>
      </div>
    </div>
  </div>

  <div class="row">
    <div class="col">
      <div class="leetcode-problem-content card">
        <div class="card-body">
          <p>A permutation <code>perm</code> of <code>n + 1</code> integers of all the integers in the range <code>[0, n]</code> can be represented as a string <code>s</code> of length <code>n</code> where:</p>
<ul>
<li><code>s[i] == 'I'</code> if <code>perm[i] &lt; perm[i + 1]</code>, and</li>
<li><code>s[i] == 'D'</code> if <code>perm[i] &gt; perm[i + 1]</code>.</li>
</ul>
<p>Given a string <code>s</code>, reconstruct the permutation <code>perm</code> and return it. If there are multiple valid permutations perm, return <strong>any of them</strong>.</p>
<p><strong>Example 1:</strong></p>
<p><strong>Input:</strong> s = "IDID"
<strong>Output:</strong> [0,4,1,3,2]</p>
<p><strong>Example 2:</strong></p>
<p><strong>Input:</strong> s = "III"
<strong>Output:</strong> [0,1,2,3]</p>
<p><strong>Example 3:</strong></p>
<p><strong>Input:</strong> s = "DDI"
<strong>Output:</strong> [3,2,0,1]</p>
<p><strong>Constraints:</strong></p>
<ul>
<li><code>1 &lt;= s.length &lt;= 105</code></li>
<li><code>s[i]</code> is either <code>'I'</code> or <code>'D'</code>.</li>
</ul>
          <hr />
          <span class="fst-italic">
            Note: This problem is from
            <a
              href="https://leetcode.com/problems/di-string-match/description/">LeetCode</a>.
          </span>
        </div>
      </div>
      <style>
        .leetcode-problem-content {
          max-height: 200px;
          overflow-y: auto;
        }
      </style>
    </div>
  </div>
  <div class="row">
    <div class="col-md-6">
      <ul class="nav nav-underline mb-2" id="myTab" role="tablist">
        <li class="nav-item" role="presentation">
          <button
            class="nav-link active"
            id="our-model-tab"
            data-bs-toggle="tab"
            data-bs-target="#our-model-tab-pane"
            type="button"
            role="tab"
            aria-controls="our-model-tab-pane"
            aria-selected="true">
            ü¶æ Our model
          </button>
        </li>
      </ul>
      <div class="tab-content" id="myTabContent">
        <div
          class="tab-pane fade show active"
          id="our-model-tab-pane"
          role="tabpanel"
          aria-labelledby="our-model-tab"
          tabindex="0">
          <div class="row mb-2">
            <div class="col">
              <div
                class="card border-success"
                style="border-width: 2px">
                <div class="card-body">
                  <span class="font-emoji">
                    ‚úÖ
                  </span>
                  <strong>Compiled</strong>
                </div>
              </div>
            </div>

            <div class="col">
              <div
                class="card border-danger"
                style="border-width: 2px">
                <div class="card-body">
                  <span class="font_emoji">
                    ‚ùå
                  </span>
                  <strong>Executed</strong>
                </div>
              </div>
            </div>

            <div class="col">
              <div
                class="card border-danger"
                style="border-width: 2px">
                <div class="card-body">
                  <span class="font-emoji">
                    ‚ùå
                  </span>
                  <strong>Correct</strong>
                </div>
              </div>
            </div>
          </div>
          <pre><code class="language-fortran model-code">program main
    implicit none

    integer :: i, j, k, n
    character(len=1) :: s(105)
    integer :: perm(105)

    ! read input
    read(*,*) n
    read(*,*) s

    ! solve problem
    do i = 1, n
        perm(i) = i - 1
    end do
    do i = 1, n - 1
        if (s(i) == 'I') then
            j = perm(i)
            k = perm(i + 1)
            perm(i) = k
            perm(i + 1) = j
        else if (s(i) == 'D') then
            j = perm(i)
            k = perm(i + 1)
            perm(i) = k
            perm(i + 1) = j
        end if
    end do

    ! print output
    write(*,*) perm

end program main</code></pre>

           
          <div class="alert alert-danger" role="alert">
            <strong>stderr</strong>
            <pre>At line 9 of file temp.f95 (unit = 5, file = 'stdin')
Fortran runtime error: End of file

Error termination. Backtrace:
#0  0x7f1fc97b7960 in ???
#1  0x7f1fc97b84d9 in ???
#2  0x7f1fc9a0c17b in ???
#3  0x7f1fc9a05684 in ???
#4  0x7f1fc9a062aa in ???
#5  0x56a48ede7219 in MAIN__
#6  0x56a48ede754d in main
</pre>
          </div>
          
        </div>
      </div>
    </div>
    <div class="col-md-6">
      <ul class="nav nav-underline mb-2" id="myTab" role="tablist">
        <li class="nav-item" role="presentation">
          <button
            class="nav-link active"
            id="codellama-tab"
            data-bs-toggle="tab"
            data-bs-target="#codellama-tab-pane"
            type="button"
            role="tab"
            aria-controls="codellama-tab-pane"
            aria-selected="true">
            ü¶ô CodeLlama-7B
          </button>
        </li>
        <li class="nav-item" role="presentation">
          <button
            class="nav-link"
            id="python-tab"
            data-bs-toggle="tab"
            data-bs-target="#python-tab-pane"
            type="button"
            role="tab"
            aria-controls="python-tab-pane"
            aria-selected="false">
            üêç Python
          </button>
        </li>
        <li class="nav-item" role="presentation">
          <button
            class="nav-link"
            id="cpp-tab"
            data-bs-toggle="tab"
            data-bs-target="#cpp-tab-pane"
            type="button"
            role="tab"
            aria-controls="cpp-tab-pane"
            aria-selected="false">
            ü§† C++
          </button>
        </li>
      </ul>
      <div class="tab-content" id="myTabContent">
        <div
          class="tab-pane fade show active"
          id="codellama-tab-pane"
          role="tabpanel"
          aria-labelledby="codellama-tab"
          tabindex="0">
          <div class="row mb-2">
            <div class="col">
              <div
                class="card border-danger"
                style="border-width: 2px">
                <div class="card-body">
                  <span class="font-emoji">
                    ‚ùå
                  </span>
                  <strong>Compiled</strong>
                </div>
              </div>
            </div>

            <div class="col">
              <div
                class="card border-danger"
                style="border-width: 2px">
                <div class="card-body">
                  <span class="font-emoji">
                    ‚ùå
                  </span>
                  <strong>Executed</strong>
                </div>
              </div>
            </div>

            <div class="col">
              <div
                class="card border-danger"
                style="border-width: 2px">
                <div class="card-body">
                  <span class="font-emoji">
                    ‚ùå
                  </span>
                  <strong>Correct</strong>
                </div>
              </div>
            </div>
          </div>
          <pre><code class="language-fortran model-code">module permutation

implicit none

contains

function reconstruct_permutation(s) result(perm)

integer, intent(in) :: s(:)
integer :: perm(size(s))

! Edge case: empty string
if (size(s) == 0) then
    perm = []
    return
endif

! Initialize permutation with identity mapping
perm = [(i, i=1,size(s))]

! Loop through string and update permutation accordingly
do i=1,size(s)
    if (s(i) == 'I') then
        ! Swap adjacent elements if they are in decreasing order
        if (perm(i) > perm(i+1)) then
            call swap(perm(i), perm(i+1))
        endif
    else
        ! Swap adjacent elements if they are in increasing order
        if (perm(i) < perm(i+1)) then
            call swap(perm(i), perm(i+1))
        endif
    endif
enddo

end function reconstruct_permutation

subroutine swap(a, b)

integer, intent(inout) :: a, b
integer :: temp

temp = a
a = b
b = temp

end subroutine swap

end module permutation

program test

use permutation
implicit none

! Test case 1:
call test_case(["IDID"], [0,4,1,3,2])

! Test case 2:
call test_case(["III"], [0,1,2,3])

! Test case 3:
call test_case(["DDI"], [3,2,0,1])

contains

subroutine test_case(s, expected)

character(len=*), intent(in) :: s
integer, intent(in) :: expected(:)

integer :: perm(size(expected))

perm = reconstruct_permutation(s)

if (any(perm /= expected)) then
    write (*,*) "Error:", s, "should be", expected, "but was", perm
endif

end subroutine test_case

end program test
</code></pre>
           
          <div class="alert alert-danger" role="alert">
            <strong>stderr</strong>
            <pre>temp.f95:14:13:

   14 |     perm = []
      |             1
Error: Empty array constructor at (1) is not allowed
temp.f95:19:10:

   19 | perm = [(i, i=1,size(s))]
      |          1
Error: Symbol ‚Äòi‚Äô at (1) has no IMPLICIT type
temp.f95:53:5:

   53 | use permutation
      |     1
Fatal Error: Cannot open module file ‚Äòpermutation.mod‚Äô for reading at (1): No such file or directory
compilation terminated.
</pre>
          </div>
          
        </div>
        <div
          class="tab-pane fade"
          id="python-tab-pane"
          role="tabpanel"
          aria-labelledby="python-tab"
          tabindex="0">
          <alert class="alert alert-info d-flex">
            <strong>üåê Data from online sources</strong>
          </alert>
          <pre><code class="language-python">def isPalindrome(num):
    return str(num) == str(num)[::-1]

def superpalindromesInRange(left: str, right: str) -&gt; int:
    l = int(left)
    r = int(right)
    cnt = 0
    base = 1
    while base * base &lt;= r:
        if isPalindrome(base) and isPalindrome(base * base):
            if base * base &gt;= l:
                cnt += 1
        base += 1
    return cnt
</code></pre>
<pre><code>To solve the problem, we will do the following steps:
</code></pre>
<ol>
<li>Create a helper function <code>isPalindrome</code> to check if a given number is a palindrome.</li>
<li>Iterate over all the possible palindrome base numbers. For each base, check if the base and the square of the base are both palindromes. If they are, check if the square of the base is within the range [l, r] and increment a counter for each valid super-palindrome found.</li>
<li>Return the counter as the final result.</li>
</ol>
        </div>
        <div
          class="tab-pane fade"
          id="cpp-tab-pane"
          role="tabpanel"
          aria-labelledby="cpp-tab"
          tabindex="0">
          <alert class="alert alert-info d-flex">
            <strong>üåê Data from online sources</strong>
          </alert>
          <pre><code class="language-cpp">bool isPalindrome(long num) {
    string str = to_string(num);
    string revStr = str;
    reverse(revStr.begin(), revStr.end());
    return str == revStr;
}

int superpalindromesInRange(string left, string right) {
    long l = stol(left);
    long r = stol(right);
    int cnt = 0;
    for (long base = 1; base * base &lt;= r; ++base) {
        if (isPalindrome(base) &amp;&amp; isPalindrome(base * base)) {
            if (base * base &gt;= l) {
                cnt++;
            }
        }
    }
    return cnt;
}
</code></pre>
<pre><code>To solve the problem, we will do the following steps:
</code></pre>
<ol>
<li>Create a helper function <code>isPalindrome</code> to check if a given number is a palindrome.</li>
<li>Iterate over all the possible palindrome base numbers. For each base, check if the base and the square of the base are both palindromes. If they are, check if the square of the base is within the range [l, r] and increment a counter for each valid super-palindrome found.</li>
<li>Return the counter as the final result.</li>
</ol>
        </div>
      </div>
      <style>
        .model-code {
          max-height: 600px;
          overflow-y: auto;
        }

        .font-emoji {
          font-family: emoji;
        }
      </style>
    </div>
  </div>
</div>
<script>
  hljs.addPlugin(new CopyButtonPlugin());
  hljs.highlightAll();
</script>

  </body>
</html>