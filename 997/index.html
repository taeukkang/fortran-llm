<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Fine-tuning CodeLlama-7B for Fortran Code Generation</title>
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/5.3.3/zephyr/bootstrap.min.css"
      integrity="sha512-CWXb9sx63+REyEBV/cte+dE1hSsYpJifb57KkqAXjsN3gZQt6phZt7e5RhgZrUbaNfCdtdpcqDZtuTEB+D3q2Q=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer" />
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@11.9.0/build/styles/atom-one-dark.min.css" />
    <link
      rel="stylesheet"
      href="https://unpkg.com/highlightjs-copy/dist/highlightjs-copy.min.css" />
    <script src="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@11.9.0/build/highlight.min.js"></script>
    <script src="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@11.9.0/build/languages/fortran.min.js"></script>
    <script src="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@11.9.0/build/languages/python.min.js"></script>
    <script src="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@11.9.0/build/languages/cpp.min.js"></script>
    <script src="https://unpkg.com/highlightjs-copy/dist/highlightjs-copy.min.js"></script>
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.min.js"
      integrity="sha384-BBtl+eGJRgqQAUMxJ7pMwbEyER4l1g+O15P+16Ep7Q9Q+zqX6gSbd85u4mG4QzX+"
      crossorigin="anonymous"></script>
  </head>
  <body>
    
<div class="container">
  <div class="row">
    <div class="col d-flex justify-content-between align-items-center">
      <h2>Find the Town Judge</h2>
      <div>
        <a href="/fortran-llm/" class="btn btn-outline-primary me-2">
          üè†
        </a>
        <a
          href="/fortran-llm/993/"
          class="btn btn-outline-secondary me-2">
          ‚¨ÖÔ∏è
        </a>
        <a
          href="/fortran-llm/999/"
          class="btn btn-outline-secondary">
          ‚û°Ô∏è
        </a>
      </div>
    </div>
  </div>

  <div class="row">
    <div class="col">
      <div class="leetcode-problem-content card">
        <div class="card-body">
          <p>In a town, there are <code>n</code> people labeled from <code>1</code> to <code>n</code>. There is a rumor that one of these people is secretly the town judge.</p>
<p>If the town judge exists, then:</p>
<ol>
<li>The town judge trusts nobody.</li>
<li>Everybody (except for the town judge) trusts the town judge.</li>
<li>There is exactly one person that satisfies properties <strong>1</strong> and <strong>2</strong>.</li>
</ol>
<p>You are given an array <code>trust</code> where <code>trust[i] = [ai, bi]</code> representing that the person labeled <code>ai</code> trusts the person labeled <code>bi</code>. If a trust relationship does not exist in <code>trust</code> array, then such a trust relationship does not exist.</p>
<p>Return <em>the label of the town judge if the town judge exists and can be identified, or return</em> <code>-1</code> <em>otherwise</em>.</p>
<p><strong>Example 1:</strong></p>
<p><strong>Input:</strong> n = 2, trust = [[1,2]]
<strong>Output:</strong> 2</p>
<p><strong>Example 2:</strong></p>
<p><strong>Input:</strong> n = 3, trust = [[1,3],[2,3]]
<strong>Output:</strong> 3</p>
<p><strong>Example 3:</strong></p>
<p><strong>Input:</strong> n = 3, trust = [[1,3],[2,3],[3,1]]
<strong>Output:</strong> -1</p>
<p><strong>Constraints:</strong></p>
<ul>
<li><code>1 &lt;= n &lt;= 1000</code></li>
<li><code>0 &lt;= trust.length &lt;= 104</code></li>
<li><code>trust[i].length == 2</code></li>
<li>All the pairs of <code>trust</code> are <strong>unique</strong>.</li>
<li><code>ai != bi</code></li>
<li><code>1 &lt;= ai, bi &lt;= n</code></li>
</ul>
          <hr />
          <span class="fst-italic">
            Note: This problem is from
            <a
              href="https://leetcode.com/problems/find-the-town-judge/description/">LeetCode</a>.
          </span>
        </div>
      </div>
      <style>
        .leetcode-problem-content {
          max-height: 200px;
          overflow-y: auto;
        }
      </style>
    </div>
  </div>
  <div class="row">
    <div class="col-md-6">
      <ul class="nav nav-underline mb-2" id="myTab" role="tablist">
        <li class="nav-item" role="presentation">
          <button
            class="nav-link active"
            id="our-model-tab"
            data-bs-toggle="tab"
            data-bs-target="#our-model-tab-pane"
            type="button"
            role="tab"
            aria-controls="our-model-tab-pane"
            aria-selected="true">
            ü¶æ Our model
          </button>
        </li>
      </ul>
      <div class="tab-content" id="myTabContent">
        <div
          class="tab-pane fade show active"
          id="our-model-tab-pane"
          role="tabpanel"
          aria-labelledby="our-model-tab"
          tabindex="0">
          <div class="row mb-2">
            <div class="col">
              <div
                class="card border-danger"
                style="border-width: 2px">
                <div class="card-body">
                  <span class="font-emoji">
                    ‚ùå
                  </span>
                  <strong>Compiled</strong>
                </div>
              </div>
            </div>

            <div class="col">
              <div
                class="card border-danger"
                style="border-width: 2px">
                <div class="card-body">
                  <span class="font_emoji">
                    ‚ùå
                  </span>
                  <strong>Executed</strong>
                </div>
              </div>
            </div>

            <div class="col">
              <div
                class="card border-danger"
                style="border-width: 2px">
                <div class="card-body">
                  <span class="font-emoji">
                    ‚ùå
                  </span>
                  <strong>Correct</strong>
                </div>
              </div>
            </div>
          </div>
          <pre><code class="language-fortran model-code">program main
    implicit none

    integer :: n, i, j, k, m, n_people, n_trust, trust(n, n), trusted(n), &
               untrusted(n), town_judge

    ! Examples
    n = 2
    trust = reshape([1, 2, 2, 1], shape=[n, n])
    write(*, '(A, I0)') 'Example 1: ', solve(n, trust)

    n = 3
    trust = reshape([1, 3, 2, 3], shape=[n, n])
    write(*, '(A, I0)') 'Example 2: ', solve(n, trust)

    n = 3
    trust = reshape([1, 3, 2, 3, 3, 1], shape=[n, n])
    write(*, '(A, I0)') 'Example 3: ', solve(n, trust)

contains

    function solve(n_people, trust) result(town_judge)
        implicit none
        integer, intent(in) :: n_people, trust(:, :)
        integer :: i, j, k, m, trusted(n_people), untrusted(n_people)

        town_judge = -1

        ! Initialize arrays
        trusted = 0
        untrusted = 0

        ! Count number of trust relationships
        do i = 1, n_people
            do j = 1, n_people
                if (trust(i, j) > 0) then
                    trusted(j) = trusted(j) + 1
                    untrusted(i) = untrusted(i) + 1
                end if
            end do
        end do

        ! Check if there is only one person who trusts nobody
        m = count(untrusted == 0)
        if (m == 1) then
            town_judge = maxloc(untrusted, dim=1)
        end if

        ! Check if there is only one person who is trusted by everybody
        m = count(trusted == n_people - 1)
        if (m == 1) then
            town_judge = minloc(trusted, dim=1)
        end if

    end function solve
end program main</code></pre>

           
          <div class="alert alert-danger" role="alert">
            <strong>stderr</strong>
            <pre>temp.f95:4:61:

    4 |     integer :: n, i, j, k, m, n_people, n_trust, trust(n, n), trusted(n), &
      |                                                             1
Error: Explicit shaped array with nonconstant bounds at (1)
temp.f95:22:54:

   22 |     function solve(n_people, trust) result(town_judge)
      |                                                      1
Error: Function result ‚Äòtown_judge‚Äô at (1) has no IMPLICIT type
temp.f95:8:5:

    8 |     n = 2
      |     1
Error: Symbol ‚Äòn‚Äô at (1) has no IMPLICIT type
temp.f95:9:9:

    9 |     trust = reshape([1, 2, 2, 1], shape=[n, n])
      |         1
Error: Symbol ‚Äòtrust‚Äô at (1) has no IMPLICIT type
</pre>
          </div>
          
        </div>
      </div>
    </div>
    <div class="col-md-6">
      <ul class="nav nav-underline mb-2" id="myTab" role="tablist">
        <li class="nav-item" role="presentation">
          <button
            class="nav-link active"
            id="codellama-tab"
            data-bs-toggle="tab"
            data-bs-target="#codellama-tab-pane"
            type="button"
            role="tab"
            aria-controls="codellama-tab-pane"
            aria-selected="true">
            ü¶ô CodeLlama-7B
          </button>
        </li>
        <li class="nav-item" role="presentation">
          <button
            class="nav-link"
            id="python-tab"
            data-bs-toggle="tab"
            data-bs-target="#python-tab-pane"
            type="button"
            role="tab"
            aria-controls="python-tab-pane"
            aria-selected="false">
            üêç Python
          </button>
        </li>
        <li class="nav-item" role="presentation">
          <button
            class="nav-link"
            id="cpp-tab"
            data-bs-toggle="tab"
            data-bs-target="#cpp-tab-pane"
            type="button"
            role="tab"
            aria-controls="cpp-tab-pane"
            aria-selected="false">
            ü§† C++
          </button>
        </li>
      </ul>
      <div class="tab-content" id="myTabContent">
        <div
          class="tab-pane fade show active"
          id="codellama-tab-pane"
          role="tabpanel"
          aria-labelledby="codellama-tab"
          tabindex="0">
          <div class="row mb-2">
            <div class="col">
              <div
                class="card border-danger"
                style="border-width: 2px">
                <div class="card-body">
                  <span class="font-emoji">
                    ‚ùå
                  </span>
                  <strong>Compiled</strong>
                </div>
              </div>
            </div>

            <div class="col">
              <div
                class="card border-danger"
                style="border-width: 2px">
                <div class="card-body">
                  <span class="font-emoji">
                    ‚ùå
                  </span>
                  <strong>Executed</strong>
                </div>
              </div>
            </div>

            <div class="col">
              <div
                class="card border-danger"
                style="border-width: 2px">
                <div class="card-body">
                  <span class="font-emoji">
                    ‚ùå
                  </span>
                  <strong>Correct</strong>
                </div>
              </div>
            </div>
          </div>
          <pre><code class="language-fortran model-code">module Judge
    implicit none
    private
    public :: find_judge
contains
    function find_judge(n, trust) result(judge)
        integer, intent(in) :: n
        integer, dimension(:, :), intent(in) :: trust
        integer :: judge
        logical, dimension(n) :: trusted
        integer :: i, j, k

        judge = -1

        ! Initialize the trusted array
        trusted = .false.

        ! Loop through the trust relationships
        do i = 1, size(trust, 1)
            j = trust(i, 1)
            k = trust(i, 2)
            if (j == k) then
                ! Self-trust is not allowed
                cycle
            end if
            trusted(j) = .true.
            if (trusted(k)) then
                ! If someone is trusted by someone else, then they cannot be the judge
                judge = -1
                exit
            end if
        end do

        ! Check if there is only one person who is trusted by no one
        do i = 1, n
            if (.not. trusted(i)) then
                judge = i
                exit
            end if
        end do
    end function find_judge
end module Judge

program test
    use Judge
    implicit none
    integer :: n, i, j, k
    integer, dimension(:, :), allocatable :: trust
    integer :: judge

    ! Test case 1:
    n = 2
    allocate(trust(1, 2))
    trust = reshape([1, 2, 2, 1], shape(trust))
    judge = find_judge(n, trust)
    if (judge /= 2) then
        write (*, *) "Test case 1 failed"
        stop
    end if

    ! Test case 2:
    n = 3
    allocate(trust(2, 3))
    trust = reshape([1, 3, 2, 3, 3, 1], shape(trust))
    judge = find_judge(n, trust)
    if (judge /= 3) then
        write (*, *) "Test case 2 failed"
        stop
    end if

    ! Test case 3:
    n = 3
    allocate(trust(3, 3))
    trust = reshape([1, 3, 2, 3, 3, 1], shape(trust))
    judge = find_judge(n, trust)
    if (judge /= -1) then
        write (*, *) "Test case 3 failed"
        stop
    end if

    ! Test case 4:
    n = 4
    allocate(trust(4, 4))
    trust = reshape([1, 3, 2, 4, 3, 4, 4, 1], shape(trust))
    judge = find_judge(n, trust)
    if (judge /= -1) then
        write (*, *) "Test case 4 failed"
        stop
    end if

    ! Test case 5:
    n = 5
    allocate(trust(5, 5))
    trust = reshape([1, 3, 2, 4, 5, 3, 4, 5, 4, 1], shape(trust))
    judge = find_judge(n, trust)
    if (judge /= -1) then
        write (*, *) "Test case 5 failed"
        stop
    end if

    ! Test case 6:
    n = 6
    allocate(trust(6, 6))
    trust = reshape([1, 3, 2, 4, 5, 6, 3, 4, 5, 6, 4, 1], shape(trust))
    judge = find_judge(n, trust)
    if (judge /= -1) then
        write (*, *) "Test case 6 failed"
        stop
    end if

    ! Test case 7:
    n = 7
    allocate(trust(7, 7))
    trust = reshape([1, 3,
</code></pre>
           
          <div class="alert alert-danger" role="alert">
            <strong>stderr</strong>
            <pre>temp.f95:114:26:

  114 |     trust = reshape([1, 3,
      |                          1
Error: Syntax error in array constructor at (1)
f951: Error: Unexpected end of file in ‚Äòtemp.f95‚Äô
</pre>
          </div>
          
        </div>
        <div
          class="tab-pane fade"
          id="python-tab-pane"
          role="tabpanel"
          aria-labelledby="python-tab"
          tabindex="0">
          <alert class="alert alert-info d-flex">
            <strong>üåê Data from online sources</strong>
          </alert>
          <pre><code class="language-python">def findJudge(n, trust):
    trust_counts = [0] * (n + 1)
    for a, b in trust:
        trust_counts[a] -= 1
        trust_counts[b] += 1
    for i in range(1, n + 1):
        if trust_counts[i] == n - 1:
            return i
    return -1
</code></pre>
<ol>
<li>Create an array <code>trustCounts</code> to store the number of trusts for each person.</li>
<li>Loop through the trust relationships, decrement the count in <code>trustCounts</code> for the person who trusts (a), and increment the count for the person being trusted (b).</li>
<li>Loop through the <code>trustCounts</code> array and check if any person has a trust count equal to <code>n - 1</code>, as this would mean that everyone trusts that person (except for themselves).</li>
<li>If such a person is found, return their index as the town judge. If no such person is found, return -1.</li>
</ol>
        </div>
        <div
          class="tab-pane fade"
          id="cpp-tab-pane"
          role="tabpanel"
          aria-labelledby="cpp-tab"
          tabindex="0">
          <alert class="alert alert-info d-flex">
            <strong>üåê Data from online sources</strong>
          </alert>
          <pre><code class="language-cpp">int findJudge(int n, vector&lt;vector&lt;int&gt;&gt;&amp; trust) {
    vector&lt;int&gt; trustCounts(n + 1, 0);
    for (auto&amp; t : trust) {
        trustCounts[t[0]]--;
        trustCounts[t[1]]++;
    }
    for (int i = 1; i &lt;= n; i++) {
        if (trustCounts[i] == n - 1)
            return i;
    }
    return -1;
}
</code></pre>
<ol>
<li>Create an array <code>trustCounts</code> to store the number of trusts for each person.</li>
<li>Loop through the trust relationships, decrement the count in <code>trustCounts</code> for the person who trusts (a), and increment the count for the person being trusted (b).</li>
<li>Loop through the <code>trustCounts</code> array and check if any person has a trust count equal to <code>n - 1</code>, as this would mean that everyone trusts that person (except for themselves).</li>
<li>If such a person is found, return their index as the town judge. If no such person is found, return -1.</li>
</ol>
        </div>
      </div>
      <style>
        .model-code {
          max-height: 600px;
          overflow-y: auto;
        }

        .font-emoji {
          font-family: emoji;
        }
      </style>
    </div>
  </div>
</div>
<script>
  hljs.addPlugin(new CopyButtonPlugin());
  hljs.highlightAll();
</script>

  </body>
</html>